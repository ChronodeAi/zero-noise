/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/upload/route";
exports.ids = ["app/api/upload/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fchronode%2FDocuments%2Fzero-noise%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fchronode%2FDocuments%2Fzero-noise&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fchronode%2FDocuments%2Fzero-noise%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fchronode%2FDocuments%2Fzero-noise&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _Users_chronode_Documents_zero_noise_src_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./src/app/api/upload/route.ts */ \"(rsc)/./src/app/api/upload/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/upload/route\",\n        pathname: \"/api/upload\",\n        filename: \"route\",\n        bundlePath: \"app/api/upload/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"/Users/chronode/Documents/zero-noise/src/app/api/upload/route.ts\",\n    nextConfigOutput,\n    userland: _Users_chronode_Documents_zero_noise_src_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/upload/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZ1cGxvYWQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmNocm9ub2RlJTJGRG9jdW1lbnRzJTJGemVyby1ub2lzZSUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZjaHJvbm9kZSUyRkRvY3VtZW50cyUyRnplcm8tbm9pc2UmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QmaXNHbG9iYWxOb3RGb3VuZEVuYWJsZWQ9ISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNkO0FBQ1M7QUFDTztBQUNLO0FBQ21DO0FBQ2pEO0FBQ087QUFDZjtBQUNzQztBQUN6QjtBQUNNO0FBQ0M7QUFDaEI7QUFDMkI7QUFDN0Y7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsYUFBYSxPQUFvQyxJQUFJLENBQUU7QUFDdkQsd0JBQXdCLE1BQXVDO0FBQy9EO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RB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QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsNkVBQTZFLGdGQUFjO0FBQzNGLGlDQUFpQyxRQUFRLEVBQUUsUUFBUTtBQUNuRCwwQkFBMEIsdUVBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxNQUFNO0FBQ04sNkJBQTZCLDZGQUFlO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDJGQUFtQjtBQUNyRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw2RUFBWTtBQUMxQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgeyBnZXRSZXF1ZXN0TWV0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QtbWV0YVwiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZUFwcFBhdGggfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL2FwcC1wYXRoc1wiO1xuaW1wb3J0IHsgTm9kZU5leHRSZXF1ZXN0LCBOb2RlTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYmFzZS1odHRwL25vZGVcIjtcbmltcG9ydCB7IE5leHRSZXF1ZXN0QWRhcHRlciwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi9zcGVjLWV4dGVuc2lvbi9hZGFwdGVycy9uZXh0LXJlcXVlc3RcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0UmV2YWxpZGF0ZVJlYXNvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2luc3RydW1lbnRhdGlvbi91dGlsc1wiO1xuaW1wb3J0IHsgc2VuZFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvc2VuZC1yZXNwb25zZVwiO1xuaW1wb3J0IHsgZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzLCB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3V0aWxzXCI7XG5pbXBvcnQgeyBnZXRDYWNoZUNvbnRyb2xIZWFkZXIgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvY2FjaGUtY29udHJvbFwiO1xuaW1wb3J0IHsgSU5GSU5JVEVfQ0FDSEUsIE5FWFRfQ0FDSEVfVEFHU19IRUFERVIgfSBmcm9tIFwibmV4dC9kaXN0L2xpYi9jb25zdGFudHNcIjtcbmltcG9ydCB7IE5vRmFsbGJhY2tFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9uby1mYWxsYmFjay1lcnJvci5leHRlcm5hbFwiO1xuaW1wb3J0IHsgQ2FjaGVkUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVzcG9uc2UtY2FjaGVcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvY2hyb25vZGUvRG9jdW1lbnRzL3plcm8tbm9pc2Uvc3JjL2FwcC9hcGkvdXBsb2FkL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS91cGxvYWQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS91cGxvYWRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3VwbG9hZC9yb3V0ZVwiXG4gICAgfSxcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXG4gICAgcmVsYXRpdmVQcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJycsXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvY2hyb25vZGUvRG9jdW1lbnRzL3plcm8tbm9pc2Uvc3JjL2FwcC9hcGkvdXBsb2FkL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMsIGN0eCkge1xuICAgIHZhciBfbmV4dENvbmZpZ19leHBlcmltZW50YWw7XG4gICAgbGV0IHNyY1BhZ2UgPSBcIi9hcGkvdXBsb2FkL3JvdXRlXCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH0gZWxzZSBpZiAoc3JjUGFnZSA9PT0gJy9pbmRleCcpIHtcbiAgICAgICAgLy8gd2UgYWx3YXlzIG5vcm1hbGl6ZSAvaW5kZXggc3BlY2lmaWNhbGx5XG4gICAgICAgIHNyY1BhZ2UgPSAnLyc7XG4gICAgfVxuICAgIGNvbnN0IG11bHRpWm9uZURyYWZ0TW9kZSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREU7XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZSxcbiAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IGJ1aWxkSWQsIHBhcmFtcywgbmV4dENvbmZpZywgaXNEcmFmdE1vZGUsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0LCBpc09uRGVtYW5kUmV2YWxpZGF0ZSwgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsIHJlc29sdmVkUGF0aG5hbWUgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgY29uc3Qgbm9ybWFsaXplZFNyY1BhZ2UgPSBub3JtYWxpemVBcHBQYXRoKHNyY1BhZ2UpO1xuICAgIGxldCBpc0lzciA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0gfHwgcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICBpZiAoaXNJc3IgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNvbnN0IGlzUHJlcmVuZGVyZWQgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgICAgIGNvbnN0IHByZXJlbmRlckluZm8gPSBwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXTtcbiAgICAgICAgaWYgKHByZXJlbmRlckluZm8pIHtcbiAgICAgICAgICAgIGlmIChwcmVyZW5kZXJJbmZvLmZhbGxiYWNrID09PSBmYWxzZSAmJiAhaXNQcmVyZW5kZXJlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb0ZhbGxiYWNrRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgY2FjaGVLZXkgPSBudWxsO1xuICAgIGlmIChpc0lzciAmJiAhcm91dGVNb2R1bGUuaXNEZXYgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNhY2hlS2V5ID0gcmVzb2x2ZWRQYXRobmFtZTtcbiAgICAgICAgLy8gZW5zdXJlIC9pbmRleCBhbmQgLyBpcyBub3JtYWxpemVkIHRvIG9uZSBrZXlcbiAgICAgICAgY2FjaGVLZXkgPSBjYWNoZUtleSA9PT0gJy9pbmRleCcgPyAnLycgOiBjYWNoZUtleTtcbiAgICB9XG4gICAgY29uc3Qgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UgPSAvLyBJZiB3ZSdyZSBpbiBkZXZlbG9wbWVudCwgd2UgYWx3YXlzIHN1cHBvcnQgZHluYW1pYyBIVE1MXG4gICAgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgLy8gSWYgdGhpcyBpcyBub3QgU1NHIG9yIGRvZXMgbm90IGhhdmUgc3RhdGljIHBhdGhzLCB0aGVuIGl0IHN1cHBvcnRzXG4gICAgLy8gZHluYW1pYyBIVE1MLlxuICAgICFpc0lzcjtcbiAgICAvLyBUaGlzIGlzIGEgcmV2YWxpZGF0aW9uIHJlcXVlc3QgaWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljXG4gICAgLy8gcGFnZSBhbmQgaXQgaXMgbm90IGJlaW5nIHJlc3VtZWQgZnJvbSBhIHBvc3Rwb25lZCByZW5kZXIgYW5kXG4gICAgLy8gaXQgaXMgbm90IGEgZHluYW1pYyBSU0MgcmVxdWVzdCB0aGVuIGl0IGlzIGEgcmV2YWxpZGF0aW9uXG4gICAgLy8gcmVxdWVzdC5cbiAgICBjb25zdCBpc1JldmFsaWRhdGUgPSBpc0lzciAmJiAhc3VwcG9ydHNEeW5hbWljUmVzcG9uc2U7XG4gICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgICAgICAgICAgIGNhY2hlQ29tcG9uZW50czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jYWNoZUNvbXBvbmVudHMpLFxuICAgICAgICAgICAgICAgIGF1dGhJbnRlcnJ1cHRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmF1dGhJbnRlcnJ1cHRzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlLFxuICAgICAgICAgICAgaW5jcmVtZW50YWxDYWNoZTogZ2V0UmVxdWVzdE1ldGEocmVxLCAnaW5jcmVtZW50YWxDYWNoZScpLFxuICAgICAgICAgICAgY2FjaGVMaWZlUHJvZmlsZXM6IChfbmV4dENvbmZpZ19leHBlcmltZW50YWwgPSBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbC5jYWNoZUxpZmUsXG4gICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWwsXG4gICAgICAgICAgICBvbkNsb3NlOiAoY2IpPT57XG4gICAgICAgICAgICAgICAgcmVzLm9uKCdjbG9zZScsIGNiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkFmdGVyVGFza0Vycm9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBvbkluc3RydW1lbnRhdGlvblJlcXVlc3RFcnJvcjogKGVycm9yLCBfcmVxdWVzdCwgZXJyb3JDb250ZXh0KT0+cm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnJvciwgZXJyb3JDb250ZXh0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KVxuICAgICAgICB9LFxuICAgICAgICBzaGFyZWRDb250ZXh0OiB7XG4gICAgICAgICAgICBidWlsZElkXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG5vZGVOZXh0UmVxID0gbmV3IE5vZGVOZXh0UmVxdWVzdChyZXEpO1xuICAgIGNvbnN0IG5vZGVOZXh0UmVzID0gbmV3IE5vZGVOZXh0UmVzcG9uc2UocmVzKTtcbiAgICBjb25zdCBuZXh0UmVxID0gTmV4dFJlcXVlc3RBZGFwdGVyLmZyb21Ob2RlTmV4dFJlcXVlc3Qobm9kZU5leHRSZXEsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UocmVzKSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW52b2tlUm91dGVNb2R1bGUgPSBhc3luYyAoc3Bhbik9PntcbiAgICAgICAgICAgIHJldHVybiByb3V0ZU1vZHVsZS5oYW5kbGUobmV4dFJlcSwgY29udGV4dCkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGlmICghc3BhbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICduZXh0LnJzYyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHdlcmUgdW5hYmxlIHRvIGdldCBhdHRyaWJ1dGVzLCBwcm9iYWJseSBPVEVMIGlzIG5vdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKCFyb290U3BhbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKSAhPT0gQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke21ldGhvZH0gJHtyb3V0ZX1gO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGAke21ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoYW5kbGVSZXNwb25zZSA9IGFzeW5jIChjdXJyZW50U3Bhbik9PntcbiAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlR2VuZXJhdG9yID0gYXN5bmMgKHsgcHJldmlvdXNDYWNoZUVudHJ5IH0pPT57XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzT25EZW1hbmRSZXZhbGlkYXRlICYmIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkICYmICFwcmV2aW91c0NhY2hlRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24tZGVtYW5kIHJldmFsaWRhdGUgYWx3YXlzIHNldHMgdGhpcyBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgJ1JFVkFMSURBVEVEJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGN1cnJlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmZldGNoTWV0cmljcyA9IGNvbnRleHQucmVuZGVyT3B0cy5mZXRjaE1ldHJpY3M7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwZW5kaW5nV2FpdFVudGlsID0gY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWw7XG4gICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdXNpbmcgcHJvdmlkZWQgd2FpdFVudGlsIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIG5vdCB3ZSBmYWxsYmFjayB0byBzZW5kUmVzcG9uc2UncyBoYW5kbGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ1dhaXRVbnRpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC53YWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgud2FpdFVudGlsKHBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdXYWl0VW50aWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVUYWdzID0gY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFRhZ3M7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpYyByZXNwb25zZSwgd2UgY2FuIGNhY2hlIGl0IHNvIGxvbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgaXQncyBub3QgZWRnZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSXNyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29weSB0aGUgaGVhZGVycyBmcm9tIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlVGFncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl0gPSBjYWNoZVRhZ3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddICYmIGJsb2IudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gYmxvYi50eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV2YWxpZGF0ZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPj0gSU5GSU5JVEVfQ0FDSEUgPyBmYWxzZSA6IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwaXJlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPj0gSU5GSU5JVEVfQ0FDSEUgPyB1bmRlZmluZWQgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjYWNoZSBlbnRyeSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogQnVmZmVyLmZyb20oYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmQgcmVzcG9uc2Ugd2l0aG91dCBjYWNoaW5nIGlmIG5vdCBJU1JcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIHJlc3BvbnNlLCBjb250ZXh0LnJlbmRlck9wdHMucGVuZGluZ1dhaXRVbnRpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgYmFja2dyb3VuZCByZXZhbGlkYXRlIHdlIG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXF1ZXN0IGVycm9yIGhlcmUgYXMgaXQgd29uJ3QgYmUgYnViYmxlZFxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNDYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2aW91c0NhY2hlRW50cnkuaXNTdGFsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVQYXRoOiBzcmNQYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSBhd2FpdCByb3V0ZU1vZHVsZS5oYW5kbGVSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgIG5leHRDb25maWcsXG4gICAgICAgICAgICAgICAgY2FjaGVLZXksXG4gICAgICAgICAgICAgICAgcm91dGVLaW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgIGlzRmFsbGJhY2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICAgICAgICAgIGlzUm91dGVQUFJFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlT25seUdlbmVyYXRlZCxcbiAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcixcbiAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgY3JlYXRlIGEgY2FjaGVFbnRyeSBmb3IgSVNSXG4gICAgICAgICAgICBpZiAoIWlzSXNyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZS5raW5kKSAhPT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50OiBhcHAtcm91dGUgcmVjZWl2ZWQgaW52YWxpZCBjYWNoZSBlbnRyeSAke2NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZTEgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNzAxXCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgaXNPbkRlbWFuZFJldmFsaWRhdGUgPyAnUkVWQUxJREFURUQnIDogY2FjaGVFbnRyeS5pc01pc3MgPyAnTUlTUycgOiBjYWNoZUVudHJ5LmlzU3RhbGUgPyAnU1RBTEUnIDogJ0hJVCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHJhZnQgbW9kZSBzaG91bGQgbmV2ZXIgYmUgY2FjaGVkXG4gICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMoY2FjaGVFbnRyeS52YWx1ZS5oZWFkZXJzKTtcbiAgICAgICAgICAgIGlmICghKGdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNJc3IpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5kZWxldGUoTkVYVF9DQUNIRV9UQUdTX0hFQURFUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBjYWNoZSBjb250cm9sIGlzIGFscmVhZHkgc2V0IG9uIHRoZSByZXNwb25zZSB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gb3ZlcnJpZGUgaXQgdG8gYWxsb3cgdXNlcnMgdG8gY3VzdG9taXplIGl0IHZpYSBuZXh0LmNvbmZpZ1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sICYmICFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykgJiYgIWhlYWRlcnMuZ2V0KCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIGdldENhY2hlQ29udHJvbEhlYWRlcihjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKGNhY2hlRW50cnkudmFsdWUuYm9keSwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBjYWNoZUVudHJ5LnZhbHVlLnN0YXR1cyB8fCAyMDBcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlUmVzcG9uc2UoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtyZXEudXJsfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlUmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBOb0ZhbGxiYWNrRXJyb3IpKSB7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IG5vcm1hbGl6ZWRTcmNQYWdlLFxuICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRocm93IHNvIHRoYXQgd2UgY2FuIGhhbmRsZSBzZXJ2aW5nIGVycm9yIHBhZ2VcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBkdXJpbmcgc3RhdGljIGdlbmVyYXRpb24sIHRocm93IHRoZSBlcnJvciBhZ2Fpbi5cbiAgICAgICAgaWYgKGlzSXNyKSB0aHJvdyBlcnI7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgc2VuZCBhIDUwMCByZXNwb25zZS5cbiAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgIHN0YXR1czogNTAwXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fchronode%2FDocuments%2Fzero-noise%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fchronode%2FDocuments%2Fzero-noise&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./node_modules/pdf-parse/dist/pdf-parse/cjs lazy recursive":
/*!**************************************************************************!*\
  !*** ./node_modules/pdf-parse/dist/pdf-parse/cjs/ lazy namespace object ***!
  \**************************************************************************/
/***/ ((module) => {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncaught exception popping up in devtools
	return Promise.resolve().then(() => {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	});
}
webpackEmptyAsyncContext.keys = () => ([]);
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "(rsc)/./node_modules/pdf-parse/dist/pdf-parse/cjs lazy recursive";
module.exports = webpackEmptyAsyncContext;

/***/ }),

/***/ "(rsc)/./src/app/api/upload/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/upload/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_serverValidation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/serverValidation */ \"(rsc)/./src/lib/serverValidation.ts\");\n/* harmony import */ var _lib_filebaseClient__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/filebaseClient */ \"(rsc)/./src/lib/filebaseClient.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _lib_urlScraper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/urlScraper */ \"(rsc)/./src/lib/urlScraper.ts\");\n/* harmony import */ var _lib_textExtraction__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/textExtraction */ \"(rsc)/./src/lib/textExtraction.ts\");\n\n\n\n\n\n\n\nconst runtime = 'nodejs';\nconst dynamic = 'force-dynamic';\n/**\n * POST /api/upload\n * Upload files with server-side validation and Filebase IPFS upload\n * \n * Story 3: Server-side validation \n * Story 4: Filebase IPFS integration \n */ async function POST(request) {\n    try {\n        const formData = await request.formData();\n        const files = formData.getAll('file');\n        const urlsString = formData.get('urls');\n        // Parse URLs if provided\n        const urls = urlsString ? urlsString.split('\\n').filter(Boolean).map((u)=>u.trim()) : [];\n        if ((!files || files.length === 0) && urls.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'No files or URLs provided'\n            }, {\n                status: 400\n            });\n        }\n        // Generate collection ID for this upload session\n        const collectionId = (0,crypto__WEBPACK_IMPORTED_MODULE_4__.randomUUID)();\n        // Validate and process each file\n        const results = await Promise.all(files.map(async (file)=>{\n            try {\n                // Convert File to Buffer\n                const arrayBuffer = await file.arrayBuffer();\n                const buffer = Buffer.from(arrayBuffer);\n                // Server-side validation\n                const validation = (0,_lib_serverValidation__WEBPACK_IMPORTED_MODULE_1__.validateUploadedFile)(buffer, file.type, file.name);\n                if (!validation.valid) {\n                    return {\n                        filename: file.name,\n                        success: false,\n                        error: validation.error,\n                        errorCode: validation.errorCode\n                    };\n                }\n                // Sanitize filename\n                const safeFilename = (0,_lib_serverValidation__WEBPACK_IMPORTED_MODULE_1__.sanitizeFilename)(file.name);\n                // Story 4: Upload to Filebase IPFS\n                const uploadResult = await (0,_lib_filebaseClient__WEBPACK_IMPORTED_MODULE_2__.uploadToFilebase)(buffer, safeFilename);\n                if (!uploadResult.success) {\n                    return {\n                        filename: file.name,\n                        success: false,\n                        error: `Filebase upload failed: ${uploadResult.error}`,\n                        errorCode: 'UPLOAD_FAILED'\n                    };\n                }\n                // Extract text content for search indexing\n                let textContent = null;\n                try {\n                    const extracted = await (0,_lib_textExtraction__WEBPACK_IMPORTED_MODULE_6__.extractTextFromFile)(buffer, file.type);\n                    if (extracted) {\n                        textContent = (0,_lib_textExtraction__WEBPACK_IMPORTED_MODULE_6__.cleanTextForEmbedding)(extracted);\n                    }\n                } catch (error) {\n                    console.error('Text extraction failed:', error);\n                // Non-critical, continue without text content\n                }\n                // Success! File uploaded to IPFS\n                return {\n                    filename: file.name,\n                    sanitizedFilename: safeFilename,\n                    success: true,\n                    size: buffer.length,\n                    type: file.type,\n                    cid: uploadResult.cid,\n                    duration: uploadResult.duration,\n                    gatewayUrl: (0,_lib_filebaseClient__WEBPACK_IMPORTED_MODULE_2__.getFilebaseGatewayUrl)(uploadResult.cid),\n                    fallbackUrls: (0,_lib_filebaseClient__WEBPACK_IMPORTED_MODULE_2__.getPublicGatewayUrls)(uploadResult.cid),\n                    message: 'Successfully uploaded to Filebase IPFS',\n                    collectionId,\n                    textContent\n                };\n            } catch (error) {\n                return {\n                    filename: file.name,\n                    success: false,\n                    error: error instanceof Error ? error.message : 'Processing failed',\n                    errorCode: 'VALIDATION_ERROR'\n                };\n            }\n        }));\n        // Check if any files failed\n        const failures = results.filter((r)=>!r.success);\n        const successes = results.filter((r)=>r.success);\n        if (failures.length > 0 && successes.length === 0) {\n            // All files failed\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'All files failed validation',\n                results\n            }, {\n                status: 400\n            });\n        }\n        // Scrape URL metadata if URLs provided\n        let urlMetadata = [];\n        if (urls.length > 0) {\n            try {\n                urlMetadata = await (0,_lib_urlScraper__WEBPACK_IMPORTED_MODULE_5__.scrapeUrls)(urls);\n            } catch (error) {\n                console.error('URL scraping error:', error);\n            }\n        }\n        // Story 2: Save metadata to database\n        if (successes.length > 0 || urlMetadata.length > 0) {\n            try {\n                // Create collection with files and links\n                await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.collection.create({\n                    data: {\n                        id: collectionId,\n                        files: {\n                            create: successes.filter((file)=>file.cid && file.size && file.type).map((file)=>({\n                                    cid: file.cid,\n                                    filename: file.sanitizedFilename || file.filename,\n                                    size: file.size,\n                                    mimeType: file.type,\n                                    textContent: file.textContent,\n                                    indexed: !!file.textContent,\n                                    indexedAt: file.textContent ? new Date() : null\n                                }))\n                        },\n                        links: {\n                            create: urlMetadata.map((meta)=>({\n                                    url: meta.url,\n                                    title: meta.title,\n                                    description: meta.description,\n                                    imageUrl: meta.imageUrl,\n                                    siteName: meta.siteName,\n                                    linkType: meta.linkType\n                                }))\n                        }\n                    }\n                });\n            } catch (dbError) {\n                console.error('Database save error:', dbError);\n            // Don't fail the upload if DB save fails, just log it\n            // Files are already in IPFS\n            }\n        }\n        // Return results (partial or full success)\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: `${successes.length} file(s) and ${urlMetadata.length} URL(s) processed successfully`,\n            collectionId,\n            results,\n            urls: urlMetadata\n        });\n    } catch (error) {\n        console.error('Upload API error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Upload failed',\n            message: error instanceof Error ? error.message : 'Unknown error'\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * GET /api/upload\n * API health check\n */ async function GET() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        status: 'ok',\n        message: 'Upload API ready',\n        maxFileSize: '100MB',\n        allowedTypes: [\n            'PDF',\n            'Images',\n            'Videos',\n            'Text',\n            'CSV'\n        ]\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPO1lBQ1A2QixTQUFTN0IsaUJBQWlCOEIsUUFBUTlCLE1BQU02QixPQUFPLEdBQUc7UUFDcEQsR0FDQTtZQUFFNUIsUUFBUTtRQUFJO0lBRWxCO0FBQ0Y7QUFFQTs7O0NBR0MsR0FDTSxlQUFlbUQ7SUFDcEIsT0FBT2pGLHFEQUFZQSxDQUFDNEIsSUFBSSxDQUFDO1FBQ3ZCRSxRQUFRO1FBQ1I0QixTQUFTO1FBQ1R3QixhQUFhO1FBQ2JDLGNBQWM7WUFBQztZQUFPO1lBQVU7WUFBVTtZQUFRO1NBQU07SUFDMUQ7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2Nocm9ub2RlL0RvY3VtZW50cy96ZXJvLW5vaXNlL3NyYy9hcHAvYXBpL3VwbG9hZC9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyB2YWxpZGF0ZVVwbG9hZGVkRmlsZSwgc2FuaXRpemVGaWxlbmFtZSB9IGZyb20gJ0AvbGliL3NlcnZlclZhbGlkYXRpb24nXG5pbXBvcnQgeyB1cGxvYWRUb0ZpbGViYXNlLCBnZXRGaWxlYmFzZUdhdGV3YXlVcmwsIGdldFB1YmxpY0dhdGV3YXlVcmxzIH0gZnJvbSAnQC9saWIvZmlsZWJhc2VDbGllbnQnXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL2xpYi9wcmlzbWEnXG5pbXBvcnQgeyByYW5kb21VVUlEIH0gZnJvbSAnY3J5cHRvJ1xuaW1wb3J0IHsgc2NyYXBlVXJscyB9IGZyb20gJ0AvbGliL3VybFNjcmFwZXInXG5pbXBvcnQgeyBleHRyYWN0VGV4dEZyb21GaWxlLCBjbGVhblRleHRGb3JFbWJlZGRpbmcgfSBmcm9tICdAL2xpYi90ZXh0RXh0cmFjdGlvbidcblxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAnbm9kZWpzJ1xuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYydcblxuLyoqXG4gKiBQT1NUIC9hcGkvdXBsb2FkXG4gKiBVcGxvYWQgZmlsZXMgd2l0aCBzZXJ2ZXItc2lkZSB2YWxpZGF0aW9uIGFuZCBGaWxlYmFzZSBJUEZTIHVwbG9hZFxuICogXG4gKiBTdG9yeSAzOiBTZXJ2ZXItc2lkZSB2YWxpZGF0aW9uIOKchVxuICogU3RvcnkgNDogRmlsZWJhc2UgSVBGUyBpbnRlZ3JhdGlvbiDinIVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcXVlc3QuZm9ybURhdGEoKVxuICAgIGNvbnN0IGZpbGVzID0gZm9ybURhdGEuZ2V0QWxsKCdmaWxlJykgYXMgRmlsZVtdXG4gICAgY29uc3QgdXJsc1N0cmluZyA9IGZvcm1EYXRhLmdldCgndXJscycpIGFzIHN0cmluZyB8IG51bGxcbiAgICBcbiAgICAvLyBQYXJzZSBVUkxzIGlmIHByb3ZpZGVkXG4gICAgY29uc3QgdXJsczogc3RyaW5nW10gPSB1cmxzU3RyaW5nID8gdXJsc1N0cmluZy5zcGxpdCgnXFxuJykuZmlsdGVyKEJvb2xlYW4pLm1hcCh1ID0+IHUudHJpbSgpKSA6IFtdXG5cbiAgICBpZiAoKCFmaWxlcyB8fCBmaWxlcy5sZW5ndGggPT09IDApICYmIHVybHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdObyBmaWxlcyBvciBVUkxzIHByb3ZpZGVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBHZW5lcmF0ZSBjb2xsZWN0aW9uIElEIGZvciB0aGlzIHVwbG9hZCBzZXNzaW9uXG4gICAgY29uc3QgY29sbGVjdGlvbklkID0gcmFuZG9tVVVJRCgpXG5cbiAgICAvLyBWYWxpZGF0ZSBhbmQgcHJvY2VzcyBlYWNoIGZpbGVcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBmaWxlcy5tYXAoYXN5bmMgKGZpbGUpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBDb252ZXJ0IEZpbGUgdG8gQnVmZmVyXG4gICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBmaWxlLmFycmF5QnVmZmVyKClcbiAgICAgICAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlcilcblxuICAgICAgICAgIC8vIFNlcnZlci1zaWRlIHZhbGlkYXRpb25cbiAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uID0gdmFsaWRhdGVVcGxvYWRlZEZpbGUoXG4gICAgICAgICAgICBidWZmZXIsXG4gICAgICAgICAgICBmaWxlLnR5cGUsXG4gICAgICAgICAgICBmaWxlLm5hbWVcbiAgICAgICAgICApXG5cbiAgICAgICAgICBpZiAoIXZhbGlkYXRpb24udmFsaWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGZpbGVuYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICBlcnJvcjogdmFsaWRhdGlvbi5lcnJvcixcbiAgICAgICAgICAgICAgZXJyb3JDb2RlOiB2YWxpZGF0aW9uLmVycm9yQ29kZSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBTYW5pdGl6ZSBmaWxlbmFtZVxuICAgICAgICAgIGNvbnN0IHNhZmVGaWxlbmFtZSA9IHNhbml0aXplRmlsZW5hbWUoZmlsZS5uYW1lKVxuXG4gICAgICAgICAgLy8gU3RvcnkgNDogVXBsb2FkIHRvIEZpbGViYXNlIElQRlNcbiAgICAgICAgICBjb25zdCB1cGxvYWRSZXN1bHQgPSBhd2FpdCB1cGxvYWRUb0ZpbGViYXNlKGJ1ZmZlciwgc2FmZUZpbGVuYW1lKVxuXG4gICAgICAgICAgaWYgKCF1cGxvYWRSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgZmlsZW5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgIGVycm9yOiBgRmlsZWJhc2UgdXBsb2FkIGZhaWxlZDogJHt1cGxvYWRSZXN1bHQuZXJyb3J9YCxcbiAgICAgICAgICAgICAgZXJyb3JDb2RlOiAnVVBMT0FEX0ZBSUxFRCcsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gRXh0cmFjdCB0ZXh0IGNvbnRlbnQgZm9yIHNlYXJjaCBpbmRleGluZ1xuICAgICAgICAgIGxldCB0ZXh0Q29udGVudDogc3RyaW5nIHwgbnVsbCA9IG51bGxcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZXh0cmFjdGVkID0gYXdhaXQgZXh0cmFjdFRleHRGcm9tRmlsZShidWZmZXIsIGZpbGUudHlwZSlcbiAgICAgICAgICAgIGlmIChleHRyYWN0ZWQpIHtcbiAgICAgICAgICAgICAgdGV4dENvbnRlbnQgPSBjbGVhblRleHRGb3JFbWJlZGRpbmcoZXh0cmFjdGVkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUZXh0IGV4dHJhY3Rpb24gZmFpbGVkOicsIGVycm9yKVxuICAgICAgICAgICAgLy8gTm9uLWNyaXRpY2FsLCBjb250aW51ZSB3aXRob3V0IHRleHQgY29udGVudFxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFN1Y2Nlc3MhIEZpbGUgdXBsb2FkZWQgdG8gSVBGU1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaWxlbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgc2FuaXRpemVkRmlsZW5hbWU6IHNhZmVGaWxlbmFtZSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBzaXplOiBidWZmZXIubGVuZ3RoLFxuICAgICAgICAgICAgdHlwZTogZmlsZS50eXBlLFxuICAgICAgICAgICAgY2lkOiB1cGxvYWRSZXN1bHQuY2lkISxcbiAgICAgICAgICAgIGR1cmF0aW9uOiB1cGxvYWRSZXN1bHQuZHVyYXRpb24sXG4gICAgICAgICAgICBnYXRld2F5VXJsOiBnZXRGaWxlYmFzZUdhdGV3YXlVcmwodXBsb2FkUmVzdWx0LmNpZCEpLFxuICAgICAgICAgICAgZmFsbGJhY2tVcmxzOiBnZXRQdWJsaWNHYXRld2F5VXJscyh1cGxvYWRSZXN1bHQuY2lkISksXG4gICAgICAgICAgICBtZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IHVwbG9hZGVkIHRvIEZpbGViYXNlIElQRlMnLFxuICAgICAgICAgICAgY29sbGVjdGlvbklkLCAvLyBJbmNsdWRlIGNvbGxlY3Rpb24gSUQgaW4gcmVzcG9uc2VcbiAgICAgICAgICAgIHRleHRDb250ZW50LCAvLyBJbmNsdWRlIGV4dHJhY3RlZCB0ZXh0XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaWxlbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnUHJvY2Vzc2luZyBmYWlsZWQnLFxuICAgICAgICAgICAgZXJyb3JDb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIClcblxuICAgIC8vIENoZWNrIGlmIGFueSBmaWxlcyBmYWlsZWRcbiAgICBjb25zdCBmYWlsdXJlcyA9IHJlc3VsdHMuZmlsdGVyKChyKSA9PiAhci5zdWNjZXNzKVxuICAgIGNvbnN0IHN1Y2Nlc3NlcyA9IHJlc3VsdHMuZmlsdGVyKChyKSA9PiByLnN1Y2Nlc3MpXG5cbiAgICBpZiAoZmFpbHVyZXMubGVuZ3RoID4gMCAmJiBzdWNjZXNzZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBBbGwgZmlsZXMgZmFpbGVkXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHtcbiAgICAgICAgICBlcnJvcjogJ0FsbCBmaWxlcyBmYWlsZWQgdmFsaWRhdGlvbicsXG4gICAgICAgICAgcmVzdWx0cyxcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gU2NyYXBlIFVSTCBtZXRhZGF0YSBpZiBVUkxzIHByb3ZpZGVkXG4gICAgbGV0IHVybE1ldGFkYXRhOiBhbnlbXSA9IFtdXG4gICAgaWYgKHVybHMubGVuZ3RoID4gMCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdXJsTWV0YWRhdGEgPSBhd2FpdCBzY3JhcGVVcmxzKHVybHMpXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdVUkwgc2NyYXBpbmcgZXJyb3I6JywgZXJyb3IpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3RvcnkgMjogU2F2ZSBtZXRhZGF0YSB0byBkYXRhYmFzZVxuICAgIGlmIChzdWNjZXNzZXMubGVuZ3RoID4gMCB8fCB1cmxNZXRhZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBDcmVhdGUgY29sbGVjdGlvbiB3aXRoIGZpbGVzIGFuZCBsaW5rc1xuICAgICAgICBhd2FpdCBwcmlzbWEuY29sbGVjdGlvbi5jcmVhdGUoe1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGlkOiBjb2xsZWN0aW9uSWQsXG4gICAgICAgICAgICBmaWxlczoge1xuICAgICAgICAgICAgICBjcmVhdGU6IHN1Y2Nlc3Nlc1xuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGZpbGUpID0+IGZpbGUuY2lkICYmIGZpbGUuc2l6ZSAmJiBmaWxlLnR5cGUpXG4gICAgICAgICAgICAgICAgLm1hcCgoZmlsZSkgPT4gKHtcbiAgICAgICAgICAgICAgICAgIGNpZDogZmlsZS5jaWQhLFxuICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IGZpbGUuc2FuaXRpemVkRmlsZW5hbWUgfHwgZmlsZS5maWxlbmFtZSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IGZpbGUuc2l6ZSEsXG4gICAgICAgICAgICAgICAgICBtaW1lVHlwZTogZmlsZS50eXBlISxcbiAgICAgICAgICAgICAgICAgIHRleHRDb250ZW50OiBmaWxlLnRleHRDb250ZW50LFxuICAgICAgICAgICAgICAgICAgaW5kZXhlZDogISFmaWxlLnRleHRDb250ZW50LFxuICAgICAgICAgICAgICAgICAgaW5kZXhlZEF0OiBmaWxlLnRleHRDb250ZW50ID8gbmV3IERhdGUoKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxpbmtzOiB7XG4gICAgICAgICAgICAgIGNyZWF0ZTogdXJsTWV0YWRhdGEubWFwKChtZXRhKSA9PiAoe1xuICAgICAgICAgICAgICAgIHVybDogbWV0YS51cmwsXG4gICAgICAgICAgICAgICAgdGl0bGU6IG1ldGEudGl0bGUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG1ldGEuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgaW1hZ2VVcmw6IG1ldGEuaW1hZ2VVcmwsXG4gICAgICAgICAgICAgICAgc2l0ZU5hbWU6IG1ldGEuc2l0ZU5hbWUsXG4gICAgICAgICAgICAgICAgbGlua1R5cGU6IG1ldGEubGlua1R5cGUsXG4gICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgIH0gY2F0Y2ggKGRiRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2Ugc2F2ZSBlcnJvcjonLCBkYkVycm9yKVxuICAgICAgICAvLyBEb24ndCBmYWlsIHRoZSB1cGxvYWQgaWYgREIgc2F2ZSBmYWlscywganVzdCBsb2cgaXRcbiAgICAgICAgLy8gRmlsZXMgYXJlIGFscmVhZHkgaW4gSVBGU1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiByZXN1bHRzIChwYXJ0aWFsIG9yIGZ1bGwgc3VjY2VzcylcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6IGAke3N1Y2Nlc3Nlcy5sZW5ndGh9IGZpbGUocykgYW5kICR7dXJsTWV0YWRhdGEubGVuZ3RofSBVUkwocykgcHJvY2Vzc2VkIHN1Y2Nlc3NmdWxseWAsXG4gICAgICBjb2xsZWN0aW9uSWQsXG4gICAgICByZXN1bHRzLFxuICAgICAgdXJsczogdXJsTWV0YWRhdGEsXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdVcGxvYWQgQVBJIGVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgZXJyb3I6ICdVcGxvYWQgZmFpbGVkJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG5cbi8qKlxuICogR0VUIC9hcGkvdXBsb2FkXG4gKiBBUEkgaGVhbHRoIGNoZWNrXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgc3RhdHVzOiAnb2snLFxuICAgIG1lc3NhZ2U6ICdVcGxvYWQgQVBJIHJlYWR5JyxcbiAgICBtYXhGaWxlU2l6ZTogJzEwME1CJyxcbiAgICBhbGxvd2VkVHlwZXM6IFsnUERGJywgJ0ltYWdlcycsICdWaWRlb3MnLCAnVGV4dCcsICdDU1YnXSxcbiAgfSlcbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJ2YWxpZGF0ZVVwbG9hZGVkRmlsZSIsInNhbml0aXplRmlsZW5hbWUiLCJ1cGxvYWRUb0ZpbGViYXNlIiwiZ2V0RmlsZWJhc2VHYXRld2F5VXJsIiwiZ2V0UHVibGljR2F0ZXdheVVybHMiLCJwcmlzbWEiLCJyYW5kb21VVUlEIiwic2NyYXBlVXJscyIsImV4dHJhY3RUZXh0RnJvbUZpbGUiLCJjbGVhblRleHRGb3JFbWJlZGRpbmciLCJydW50aW1lIiwiZHluYW1pYyIsIlBPU1QiLCJyZXF1ZXN0IiwiZm9ybURhdGEiLCJmaWxlcyIsImdldEFsbCIsInVybHNTdHJpbmciLCJnZXQiLCJ1cmxzIiwic3BsaXQiLCJmaWx0ZXIiLCJCb29sZWFuIiwibWFwIiwidSIsInRyaW0iLCJsZW5ndGgiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJjb2xsZWN0aW9uSWQiLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFsbCIsImZpbGUiLCJhcnJheUJ1ZmZlciIsImJ1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJ2YWxpZGF0aW9uIiwidHlwZSIsIm5hbWUiLCJ2YWxpZCIsImZpbGVuYW1lIiwic3VjY2VzcyIsImVycm9yQ29kZSIsInNhZmVGaWxlbmFtZSIsInVwbG9hZFJlc3VsdCIsInRleHRDb250ZW50IiwiZXh0cmFjdGVkIiwiY29uc29sZSIsInNhbml0aXplZEZpbGVuYW1lIiwic2l6ZSIsImNpZCIsImR1cmF0aW9uIiwiZ2F0ZXdheVVybCIsImZhbGxiYWNrVXJscyIsIm1lc3NhZ2UiLCJFcnJvciIsImZhaWx1cmVzIiwiciIsInN1Y2Nlc3NlcyIsInVybE1ldGFkYXRhIiwiY29sbGVjdGlvbiIsImNyZWF0ZSIsImRhdGEiLCJpZCIsIm1pbWVUeXBlIiwiaW5kZXhlZCIsImluZGV4ZWRBdCIsIkRhdGUiLCJsaW5rcyIsIm1ldGEiLCJ1cmwiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiaW1hZ2VVcmwiLCJzaXRlTmFtZSIsImxpbmtUeXBlIiwiZGJFcnJvciIsIkdFVCIsIm1heEZpbGVTaXplIiwiYWxsb3dlZFR5cGVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/upload/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/filebaseClient.ts":
/*!***********************************!*\
  !*** ./src/lib/filebaseClient.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkFilebaseHealth: () => (/* binding */ checkFilebaseHealth),\n/* harmony export */   getFilebaseGatewayUrl: () => (/* binding */ getFilebaseGatewayUrl),\n/* harmony export */   getPublicGatewayUrls: () => (/* binding */ getPublicGatewayUrls),\n/* harmony export */   uploadMultipleToFilebase: () => (/* binding */ uploadMultipleToFilebase),\n/* harmony export */   uploadToFilebase: () => (/* binding */ uploadToFilebase)\n/* harmony export */ });\n/* harmony import */ var form_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! form-data */ \"(rsc)/./node_modules/form-data/lib/form_data.js\");\n/* harmony import */ var form_data__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(form_data__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n/**\n * Filebase IPFS Client\n * Uploads files to IPFS via Filebase RPC API\n */ \n\nconst RPC_ENDPOINT = process.env.FILEBASE_IPFS_RPC_ENDPOINT || 'https://rpc.filebase.io';\nconst RPC_KEY = process.env.FILEBASE_IPFS_RPC_KEY;\nif (!RPC_KEY) {\n    console.error('  FILEBASE_IPFS_RPC_KEY not set');\n}\n/**\n * Upload file to Filebase IPFS via RPC API\n */ async function uploadToFilebase(buffer, filename) {\n    const startTime = Date.now();\n    try {\n        if (!RPC_KEY) {\n            throw new Error('Filebase API key not configured');\n        }\n        // Create form data\n        const form = new (form_data__WEBPACK_IMPORTED_MODULE_0___default())();\n        form.append('file', buffer, filename);\n        // Upload to Filebase IPFS RPC\n        const response = await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].post(`${RPC_ENDPOINT}/api/v0/add`, form, {\n            headers: {\n                'Authorization': `Bearer ${RPC_KEY}`,\n                ...form.getHeaders()\n            },\n            maxBodyLength: Infinity,\n            timeout: 30000\n        });\n        const duration = Date.now() - startTime;\n        const cid = response.data.Hash;\n        const size = parseInt(response.data.Size) || buffer.length;\n        return {\n            success: true,\n            cid,\n            name: response.data.Name || filename,\n            size,\n            duration\n        };\n    } catch (error) {\n        const duration = Date.now() - startTime;\n        if (axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isAxiosError(error)) {\n            return {\n                success: false,\n                error: error.response?.data?.error || error.message,\n                duration\n            };\n        }\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : 'Upload failed',\n            duration\n        };\n    }\n}\n/**\n * Upload multiple files to Filebase IPFS\n */ async function uploadMultipleToFilebase(files) {\n    return Promise.all(files.map(({ buffer, filename })=>uploadToFilebase(buffer, filename)));\n}\n/**\n * Get Filebase gateway URL for CID\n */ function getFilebaseGatewayUrl(cid) {\n    // Using Filebase dedicated gateway (from spike validation)\n    return `https://ipfs.filebase.io/ipfs/${cid}`;\n}\n/**\n * Get public IPFS gateway URLs for fallback\n */ function getPublicGatewayUrls(cid) {\n    return [\n        `https://ipfs.io/ipfs/${cid}`,\n        `https://dweb.link/ipfs/${cid}`,\n        `https://cloudflare-ipfs.com/ipfs/${cid}`,\n        getFilebaseGatewayUrl(cid)\n    ];\n}\n/**\n * Health check - verify Filebase API is accessible\n */ async function checkFilebaseHealth() {\n    try {\n        if (!RPC_KEY) return false;\n        const response = await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].post(`${RPC_ENDPOINT}/api/v0/version`, null, {\n            headers: {\n                'Authorization': `Bearer ${RPC_KEY}`\n            },\n            timeout: 5000\n        });\n        return response.status === 200;\n    } catch  {\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBSztJQUM3QixFQUFFLE9BQU07UUFDTixPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2Nocm9ub2RlL0RvY3VtZW50cy96ZXJvLW5vaXNlL3NyYy9saWIvZmlsZWJhc2VDbGllbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBGaWxlYmFzZSBJUEZTIENsaWVudFxuICogVXBsb2FkcyBmaWxlcyB0byBJUEZTIHZpYSBGaWxlYmFzZSBSUEMgQVBJXG4gKi9cblxuaW1wb3J0IEZvcm1EYXRhIGZyb20gJ2Zvcm0tZGF0YSdcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcydcblxuY29uc3QgUlBDX0VORFBPSU5UID0gcHJvY2Vzcy5lbnYuRklMRUJBU0VfSVBGU19SUENfRU5EUE9JTlQgfHwgJ2h0dHBzOi8vcnBjLmZpbGViYXNlLmlvJ1xuY29uc3QgUlBDX0tFWSA9IHByb2Nlc3MuZW52LkZJTEVCQVNFX0lQRlNfUlBDX0tFWVxuXG5pZiAoIVJQQ19LRVkpIHtcbiAgY29uc29sZS5lcnJvcign4pqg77iPICBGSUxFQkFTRV9JUEZTX1JQQ19LRVkgbm90IHNldCcpXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZWJhc2VVcGxvYWRSZXN1bHQge1xuICBzdWNjZXNzOiBib29sZWFuXG4gIGNpZD86IHN0cmluZ1xuICBuYW1lPzogc3RyaW5nXG4gIHNpemU/OiBudW1iZXJcbiAgZXJyb3I/OiBzdHJpbmdcbiAgZHVyYXRpb24/OiBudW1iZXJcbn1cblxuLyoqXG4gKiBVcGxvYWQgZmlsZSB0byBGaWxlYmFzZSBJUEZTIHZpYSBSUEMgQVBJXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGxvYWRUb0ZpbGViYXNlKFxuICBidWZmZXI6IEJ1ZmZlcixcbiAgZmlsZW5hbWU6IHN0cmluZ1xuKTogUHJvbWlzZTxGaWxlYmFzZVVwbG9hZFJlc3VsdD4ge1xuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpXG5cbiAgdHJ5IHtcbiAgICBpZiAoIVJQQ19LRVkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmlsZWJhc2UgQVBJIGtleSBub3QgY29uZmlndXJlZCcpXG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGZvcm0gZGF0YVxuICAgIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKVxuICAgIGZvcm0uYXBwZW5kKCdmaWxlJywgYnVmZmVyLCBmaWxlbmFtZSlcblxuICAgIC8vIFVwbG9hZCB0byBGaWxlYmFzZSBJUEZTIFJQQ1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChcbiAgICAgIGAke1JQQ19FTkRQT0lOVH0vYXBpL3YwL2FkZGAsXG4gICAgICBmb3JtLFxuICAgICAge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7UlBDX0tFWX1gLFxuICAgICAgICAgIC4uLmZvcm0uZ2V0SGVhZGVycygpLFxuICAgICAgICB9LFxuICAgICAgICBtYXhCb2R5TGVuZ3RoOiBJbmZpbml0eSxcbiAgICAgICAgdGltZW91dDogMzAwMDAsIC8vIDMwcyB0aW1lb3V0XG4gICAgICB9XG4gICAgKVxuXG4gICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgY29uc3QgY2lkID0gcmVzcG9uc2UuZGF0YS5IYXNoXG4gICAgY29uc3Qgc2l6ZSA9IHBhcnNlSW50KHJlc3BvbnNlLmRhdGEuU2l6ZSkgfHwgYnVmZmVyLmxlbmd0aFxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBjaWQsXG4gICAgICBuYW1lOiByZXNwb25zZS5kYXRhLk5hbWUgfHwgZmlsZW5hbWUsXG4gICAgICBzaXplLFxuICAgICAgZHVyYXRpb24sXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuXG4gICAgaWYgKGF4aW9zLmlzQXhpb3NFcnJvcihlcnJvcikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IucmVzcG9uc2U/LmRhdGE/LmVycm9yIHx8IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGR1cmF0aW9uLFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVcGxvYWQgZmFpbGVkJyxcbiAgICAgIGR1cmF0aW9uLFxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFVwbG9hZCBtdWx0aXBsZSBmaWxlcyB0byBGaWxlYmFzZSBJUEZTXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGxvYWRNdWx0aXBsZVRvRmlsZWJhc2UoXG4gIGZpbGVzOiBBcnJheTx7IGJ1ZmZlcjogQnVmZmVyOyBmaWxlbmFtZTogc3RyaW5nIH0+XG4pOiBQcm9taXNlPEZpbGViYXNlVXBsb2FkUmVzdWx0W10+IHtcbiAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgIGZpbGVzLm1hcCgoeyBidWZmZXIsIGZpbGVuYW1lIH0pID0+IHVwbG9hZFRvRmlsZWJhc2UoYnVmZmVyLCBmaWxlbmFtZSkpXG4gIClcbn1cblxuLyoqXG4gKiBHZXQgRmlsZWJhc2UgZ2F0ZXdheSBVUkwgZm9yIENJRFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZWJhc2VHYXRld2F5VXJsKGNpZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgLy8gVXNpbmcgRmlsZWJhc2UgZGVkaWNhdGVkIGdhdGV3YXkgKGZyb20gc3Bpa2UgdmFsaWRhdGlvbilcbiAgcmV0dXJuIGBodHRwczovL2lwZnMuZmlsZWJhc2UuaW8vaXBmcy8ke2NpZH1gXG59XG5cbi8qKlxuICogR2V0IHB1YmxpYyBJUEZTIGdhdGV3YXkgVVJMcyBmb3IgZmFsbGJhY2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFB1YmxpY0dhdGV3YXlVcmxzKGNpZDogc3RyaW5nKTogc3RyaW5nW10ge1xuICByZXR1cm4gW1xuICAgIGBodHRwczovL2lwZnMuaW8vaXBmcy8ke2NpZH1gLFxuICAgIGBodHRwczovL2R3ZWIubGluay9pcGZzLyR7Y2lkfWAsXG4gICAgYGh0dHBzOi8vY2xvdWRmbGFyZS1pcGZzLmNvbS9pcGZzLyR7Y2lkfWAsXG4gICAgZ2V0RmlsZWJhc2VHYXRld2F5VXJsKGNpZCksIC8vIEZpbGViYXNlIGFzIGZhbGxiYWNrXG4gIF1cbn1cblxuLyoqXG4gKiBIZWFsdGggY2hlY2sgLSB2ZXJpZnkgRmlsZWJhc2UgQVBJIGlzIGFjY2Vzc2libGVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRmlsZWJhc2VIZWFsdGgoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgaWYgKCFSUENfS0VZKSByZXR1cm4gZmFsc2VcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChcbiAgICAgIGAke1JQQ19FTkRQT0lOVH0vYXBpL3YwL3ZlcnNpb25gLFxuICAgICAgbnVsbCxcbiAgICAgIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke1JQQ19LRVl9YCxcbiAgICAgICAgfSxcbiAgICAgICAgdGltZW91dDogNTAwMCxcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzID09PSAyMDBcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJGb3JtRGF0YSIsImF4aW9zIiwiUlBDX0VORFBPSU5UIiwicHJvY2VzcyIsImVudiIsIkZJTEVCQVNFX0lQRlNfUlBDX0VORFBPSU5UIiwiUlBDX0tFWSIsIkZJTEVCQVNFX0lQRlNfUlBDX0tFWSIsImNvbnNvbGUiLCJlcnJvciIsInVwbG9hZFRvRmlsZWJhc2UiLCJidWZmZXIiLCJmaWxlbmFtZSIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJFcnJvciIsImZvcm0iLCJhcHBlbmQiLCJyZXNwb25zZSIsInBvc3QiLCJoZWFkZXJzIiwiZ2V0SGVhZGVycyIsIm1heEJvZHlMZW5ndGgiLCJJbmZpbml0eSIsInRpbWVvdXQiLCJkdXJhdGlvbiIsImNpZCIsImRhdGEiLCJIYXNoIiwic2l6ZSIsInBhcnNlSW50IiwiU2l6ZSIsImxlbmd0aCIsInN1Y2Nlc3MiLCJuYW1lIiwiTmFtZSIsImlzQXhpb3NFcnJvciIsIm1lc3NhZ2UiLCJ1cGxvYWRNdWx0aXBsZVRvRmlsZWJhc2UiLCJmaWxlcyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJnZXRGaWxlYmFzZUdhdGV3YXlVcmwiLCJnZXRQdWJsaWNHYXRld2F5VXJscyIsImNoZWNrRmlsZWJhc2VIZWFsdGgiLCJzdGF0dXMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/filebaseClient.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        'query',\n        'error',\n        'warn'\n    ] : 0\n});\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUNYRixnQkFBZ0JFLE1BQU0sSUFDdEIsSUFBSUgsd0RBQVlBLENBQUM7SUFDZkksS0FBS0MsS0FBc0MsR0FBRztRQUFDO1FBQVM7UUFBUztLQUFPLEdBQUcsQ0FBUztBQUN0RixHQUFFO0FBRUosSUFBSUEsSUFBcUMsRUFBRUosZ0JBQWdCRSxNQUFNLEdBQUdBIiwic291cmNlcyI6WyIvVXNlcnMvY2hyb25vZGUvRG9jdW1lbnRzL3plcm8tbm9pc2Uvc3JjL2xpYi9wcmlzbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPVxuICBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/XG4gIG5ldyBQcmlzbWFDbGllbnQoe1xuICAgIGxvZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBbJ3F1ZXJ5JywgJ2Vycm9yJywgJ3dhcm4nXSA6IFsnZXJyb3InXSxcbiAgfSlcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWFcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwibG9nIiwicHJvY2VzcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/serverValidation.ts":
/*!*************************************!*\
  !*** ./src/lib/serverValidation.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ALLOWED_MIME_TYPES: () => (/* binding */ ALLOWED_MIME_TYPES),\n/* harmony export */   MAX_FILE_SIZE: () => (/* binding */ MAX_FILE_SIZE),\n/* harmony export */   getFileExtension: () => (/* binding */ getFileExtension),\n/* harmony export */   sanitizeFilename: () => (/* binding */ sanitizeFilename),\n/* harmony export */   validateFileSize: () => (/* binding */ validateFileSize),\n/* harmony export */   validateMagicBytes: () => (/* binding */ validateMagicBytes),\n/* harmony export */   validateMimeType: () => (/* binding */ validateMimeType),\n/* harmony export */   validateUploadedFile: () => (/* binding */ validateUploadedFile)\n/* harmony export */ });\n/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! buffer */ \"buffer\");\n/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(buffer__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * Server-Side File Validation\n * Validates uploaded files on the server before IPFS upload\n */ \n// Allowed MIME types (must match client-side)\nconst ALLOWED_MIME_TYPES = [\n    'application/pdf',\n    'image/png',\n    'image/jpeg',\n    'image/jpg',\n    'image/gif',\n    'image/webp',\n    'video/mp4',\n    'text/plain',\n    'text/csv',\n    'application/vnd.ms-excel'\n];\n// Max file size (100MB)\nconst MAX_FILE_SIZE = 100 * 1024 * 1024;\n// Magic bytes signatures for server-side validation\nconst MAGIC_BYTES = {\n    'application/pdf': [\n        buffer__WEBPACK_IMPORTED_MODULE_0__.Buffer.from([\n            0x25,\n            0x50,\n            0x44,\n            0x46\n        ])\n    ],\n    'image/png': [\n        buffer__WEBPACK_IMPORTED_MODULE_0__.Buffer.from([\n            0x89,\n            0x50,\n            0x4E,\n            0x47,\n            0x0D,\n            0x0A,\n            0x1A,\n            0x0A\n        ])\n    ],\n    'image/jpeg': [\n        buffer__WEBPACK_IMPORTED_MODULE_0__.Buffer.from([\n            0xFF,\n            0xD8,\n            0xFF,\n            0xE0\n        ]),\n        buffer__WEBPACK_IMPORTED_MODULE_0__.Buffer.from([\n            0xFF,\n            0xD8,\n            0xFF,\n            0xE1\n        ]),\n        buffer__WEBPACK_IMPORTED_MODULE_0__.Buffer.from([\n            0xFF,\n            0xD8,\n            0xFF,\n            0xE2\n        ])\n    ],\n    'image/gif': [\n        buffer__WEBPACK_IMPORTED_MODULE_0__.Buffer.from([\n            0x47,\n            0x49,\n            0x46,\n            0x38,\n            0x37,\n            0x61\n        ]),\n        buffer__WEBPACK_IMPORTED_MODULE_0__.Buffer.from([\n            0x47,\n            0x49,\n            0x46,\n            0x38,\n            0x39,\n            0x61\n        ])\n    ],\n    'video/mp4': [\n        buffer__WEBPACK_IMPORTED_MODULE_0__.Buffer.from([\n            0x00,\n            0x00,\n            0x00,\n            0x18,\n            0x66,\n            0x74,\n            0x79,\n            0x70\n        ]),\n        buffer__WEBPACK_IMPORTED_MODULE_0__.Buffer.from([\n            0x00,\n            0x00,\n            0x00,\n            0x1C,\n            0x66,\n            0x74,\n            0x79,\n            0x70\n        ])\n    ]\n};\n/**\n * Validate file MIME type\n */ function validateMimeType(mimeType) {\n    if (!ALLOWED_MIME_TYPES.includes(mimeType)) {\n        return {\n            valid: false,\n            error: `File type \"${mimeType}\" is not allowed`,\n            errorCode: 'INVALID_TYPE'\n        };\n    }\n    return {\n        valid: true\n    };\n}\n/**\n * Validate file size\n */ function validateFileSize(size, filename) {\n    if (size > MAX_FILE_SIZE) {\n        return {\n            valid: false,\n            error: `File \"${filename}\" exceeds maximum size of ${MAX_FILE_SIZE / 1024 / 1024}MB`,\n            errorCode: 'FILE_TOO_LARGE'\n        };\n    }\n    if (size === 0) {\n        return {\n            valid: false,\n            error: `File \"${filename}\" is empty`,\n            errorCode: 'EMPTY_FILE'\n        };\n    }\n    return {\n        valid: true\n    };\n}\n/**\n * Validate magic bytes from Buffer\n */ function validateMagicBytes(buffer, mimeType, filename) {\n    // Skip validation for text files (no reliable magic bytes)\n    if (mimeType === 'text/plain' || mimeType === 'text/csv' || mimeType === 'application/vnd.ms-excel') {\n        return {\n            valid: true\n        };\n    }\n    const signatures = MAGIC_BYTES[mimeType];\n    if (!signatures) {\n        // No magic bytes defined, skip validation\n        return {\n            valid: true\n        };\n    }\n    // Check if buffer matches any signature\n    const matches = signatures.some((signature)=>{\n        if (buffer.length < signature.length) return false;\n        return buffer.subarray(0, signature.length).equals(signature);\n    });\n    if (!matches) {\n        return {\n            valid: false,\n            error: `File \"${filename}\" content doesn't match declared type \"${mimeType}\"`,\n            errorCode: 'MAGIC_BYTES_MISMATCH'\n        };\n    }\n    return {\n        valid: true\n    };\n}\n/**\n * Comprehensive server-side file validation\n */ function validateUploadedFile(buffer, mimeType, filename) {\n    // 1. Validate MIME type\n    const mimeResult = validateMimeType(mimeType);\n    if (!mimeResult.valid) return mimeResult;\n    // 2. Validate file size\n    const sizeResult = validateFileSize(buffer.length, filename);\n    if (!sizeResult.valid) return sizeResult;\n    // 3. Validate magic bytes\n    const magicResult = validateMagicBytes(buffer, mimeType, filename);\n    if (!magicResult.valid) return magicResult;\n    return {\n        valid: true\n    };\n}\n/**\n * Get file extension from filename\n */ function getFileExtension(filename) {\n    const parts = filename.split('.');\n    return parts.length > 1 ? parts.pop().toLowerCase() : '';\n}\n/**\n * Sanitize filename for storage\n */ function sanitizeFilename(filename) {\n    // Remove or replace unsafe characters\n    return filename.replace(/[^a-zA-Z0-9._-]/g, '_') // Replace unsafe chars with underscore\n    .replace(/_{2,}/g, '_') // Replace multiple underscores with single\n    .substring(0, 255) // Limit length\n    ;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3NlcnZlclZhbGlkYXRpb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBOzs7Q0FHQyxHQUU4QjtBQUUvQiw4Q0FBOEM7QUFDdkMsTUFBTUMscUJBQXFCO0lBQ2hDO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0QsQ0FBUztBQUVWLHdCQUF3QjtBQUNqQixNQUFNQyxnQkFBZ0IsTUFBTSxPQUFPLEtBQUk7QUFFOUMsb0RBQW9EO0FBQ3BELE1BQU1DLGNBQXdDO0lBQzVDLG1CQUFtQjtRQUFDSCwwQ0FBTUEsQ0FBQ0ksSUFBSSxDQUFDO1lBQUM7WUFBTTtZQUFNO1lBQU07U0FBSztLQUFFO0lBQzFELGFBQWE7UUFBQ0osMENBQU1BLENBQUNJLElBQUksQ0FBQztZQUFDO1lBQU07WUFBTTtZQUFNO1lBQU07WUFBTTtZQUFNO1lBQU07U0FBSztLQUFFO0lBQzVFLGNBQWM7UUFDWkosMENBQU1BLENBQUNJLElBQUksQ0FBQztZQUFDO1lBQU07WUFBTTtZQUFNO1NBQUs7UUFDcENKLDBDQUFNQSxDQUFDSSxJQUFJLENBQUM7WUFBQztZQUFNO1lBQU07WUFBTTtTQUFLO1FBQ3BDSiwwQ0FBTUEsQ0FBQ0ksSUFBSSxDQUFDO1lBQUM7WUFBTTtZQUFNO1lBQU07U0FBSztLQUNyQztJQUNELGFBQWE7UUFDWEosMENBQU1BLENBQUNJLElBQUksQ0FBQztZQUFDO1lBQU07WUFBTTtZQUFNO1lBQU07WUFBTTtTQUFLO1FBQ2hESiwwQ0FBTUEsQ0FBQ0ksSUFBSSxDQUFDO1lBQUM7WUFBTTtZQUFNO1lBQU07WUFBTTtZQUFNO1NBQUs7S0FDakQ7SUFDRCxhQUFhO1FBQ1hKLDBDQUFNQSxDQUFDSSxJQUFJLENBQUM7WUFBQztZQUFNO1lBQU07WUFBTTtZQUFNO1lBQU07WUFBTTtZQUFNO1NBQUs7UUFDNURKLDBDQUFNQSxDQUFDSSxJQUFJLENBQUM7WUFBQztZQUFNO1lBQU07WUFBTTtZQUFNO1lBQU07WUFBTTtZQUFNO1NBQUs7S0FDN0Q7QUFDSDtBQVFBOztDQUVDLEdBQ00sU0FBU0MsaUJBQWlCQyxRQUFnQjtJQUMvQyxJQUFJLENBQUNMLG1CQUFtQk0sUUFBUSxDQUFDRCxXQUFrQjtRQUNqRCxPQUFPO1lBQ0xFLE9BQU87WUFDUEMsT0FBTyxDQUFDLFdBQVcsRUFBRUgsU0FBUyxnQkFBZ0IsQ0FBQztZQUMvQ0ksV0FBVztRQUNiO0lBQ0Y7SUFDQSxPQUFPO1FBQUVGLE9BQU87SUFBSztBQUN2QjtBQUVBOztDQUVDLEdBQ00sU0FBU0csaUJBQWlCQyxJQUFZLEVBQUVDLFFBQWdCO0lBQzdELElBQUlELE9BQU9WLGVBQWU7UUFDeEIsT0FBTztZQUNMTSxPQUFPO1lBQ1BDLE9BQU8sQ0FBQyxNQUFNLEVBQUVJLFNBQVMsMEJBQTBCLEVBQUVYLGdCQUFnQixPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ3BGUSxXQUFXO1FBQ2I7SUFDRjtJQUNBLElBQUlFLFNBQVMsR0FBRztRQUNkLE9BQU87WUFDTEosT0FBTztZQUNQQyxPQUFPLENBQUMsTUFBTSxFQUFFSSxTQUFTLFVBQVUsQ0FBQztZQUNwQ0gsV0FBVztRQUNiO0lBQ0Y7SUFDQSxPQUFPO1FBQUVGLE9BQU87SUFBSztBQUN2QjtBQUVBOztDQUVDLEdBQ00sU0FBU00sbUJBQ2RDLE1BQWMsRUFDZFQsUUFBZ0IsRUFDaEJPLFFBQWdCO0lBRWhCLDJEQUEyRDtJQUMzRCxJQUNFUCxhQUFhLGdCQUNiQSxhQUFhLGNBQ2JBLGFBQWEsNEJBQ2I7UUFDQSxPQUFPO1lBQUVFLE9BQU87UUFBSztJQUN2QjtJQUVBLE1BQU1RLGFBQWFiLFdBQVcsQ0FBQ0csU0FBUztJQUN4QyxJQUFJLENBQUNVLFlBQVk7UUFDZiwwQ0FBMEM7UUFDMUMsT0FBTztZQUFFUixPQUFPO1FBQUs7SUFDdkI7SUFFQSx3Q0FBd0M7SUFDeEMsTUFBTVMsVUFBVUQsV0FBV0UsSUFBSSxDQUFDLENBQUNDO1FBQy9CLElBQUlKLE9BQU9LLE1BQU0sR0FBR0QsVUFBVUMsTUFBTSxFQUFFLE9BQU87UUFDN0MsT0FBT0wsT0FBT00sUUFBUSxDQUFDLEdBQUdGLFVBQVVDLE1BQU0sRUFBRUUsTUFBTSxDQUFDSDtJQUNyRDtJQUVBLElBQUksQ0FBQ0YsU0FBUztRQUNaLE9BQU87WUFDTFQsT0FBTztZQUNQQyxPQUFPLENBQUMsTUFBTSxFQUFFSSxTQUFTLHVDQUF1QyxFQUFFUCxTQUFTLENBQUMsQ0FBQztZQUM3RUksV0FBVztRQUNiO0lBQ0Y7SUFFQSxPQUFPO1FBQUVGLE9BQU87SUFBSztBQUN2QjtBQUVBOztDQUVDLEdBQ00sU0FBU2UscUJBQ2RSLE1BQWMsRUFDZFQsUUFBZ0IsRUFDaEJPLFFBQWdCO0lBRWhCLHdCQUF3QjtJQUN4QixNQUFNVyxhQUFhbkIsaUJBQWlCQztJQUNwQyxJQUFJLENBQUNrQixXQUFXaEIsS0FBSyxFQUFFLE9BQU9nQjtJQUU5Qix3QkFBd0I7SUFDeEIsTUFBTUMsYUFBYWQsaUJBQWlCSSxPQUFPSyxNQUFNLEVBQUVQO0lBQ25ELElBQUksQ0FBQ1ksV0FBV2pCLEtBQUssRUFBRSxPQUFPaUI7SUFFOUIsMEJBQTBCO0lBQzFCLE1BQU1DLGNBQWNaLG1CQUFtQkMsUUFBUVQsVUFBVU87SUFDekQsSUFBSSxDQUFDYSxZQUFZbEIsS0FBSyxFQUFFLE9BQU9rQjtJQUUvQixPQUFPO1FBQUVsQixPQUFPO0lBQUs7QUFDdkI7QUFFQTs7Q0FFQyxHQUNNLFNBQVNtQixpQkFBaUJkLFFBQWdCO0lBQy9DLE1BQU1lLFFBQVFmLFNBQVNnQixLQUFLLENBQUM7SUFDN0IsT0FBT0QsTUFBTVIsTUFBTSxHQUFHLElBQUlRLE1BQU1FLEdBQUcsR0FBSUMsV0FBVyxLQUFLO0FBQ3pEO0FBRUE7O0NBRUMsR0FDTSxTQUFTQyxpQkFBaUJuQixRQUFnQjtJQUMvQyxzQ0FBc0M7SUFDdEMsT0FBT0EsU0FDSm9CLE9BQU8sQ0FBQyxvQkFBb0IsS0FBSyx1Q0FBdUM7S0FDeEVBLE9BQU8sQ0FBQyxVQUFVLEtBQUssMkNBQTJDO0tBQ2xFQyxTQUFTLENBQUMsR0FBRyxLQUFLLGVBQWU7O0FBQ3RDIiwic291cmNlcyI6WyIvVXNlcnMvY2hyb25vZGUvRG9jdW1lbnRzL3plcm8tbm9pc2Uvc3JjL2xpYi9zZXJ2ZXJWYWxpZGF0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2VydmVyLVNpZGUgRmlsZSBWYWxpZGF0aW9uXG4gKiBWYWxpZGF0ZXMgdXBsb2FkZWQgZmlsZXMgb24gdGhlIHNlcnZlciBiZWZvcmUgSVBGUyB1cGxvYWRcbiAqL1xuXG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tICdidWZmZXInXG5cbi8vIEFsbG93ZWQgTUlNRSB0eXBlcyAobXVzdCBtYXRjaCBjbGllbnQtc2lkZSlcbmV4cG9ydCBjb25zdCBBTExPV0VEX01JTUVfVFlQRVMgPSBbXG4gICdhcHBsaWNhdGlvbi9wZGYnLFxuICAnaW1hZ2UvcG5nJyxcbiAgJ2ltYWdlL2pwZWcnLFxuICAnaW1hZ2UvanBnJyxcbiAgJ2ltYWdlL2dpZicsXG4gICdpbWFnZS93ZWJwJyxcbiAgJ3ZpZGVvL21wNCcsXG4gICd0ZXh0L3BsYWluJyxcbiAgJ3RleHQvY3N2JyxcbiAgJ2FwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCcsXG5dIGFzIGNvbnN0XG5cbi8vIE1heCBmaWxlIHNpemUgKDEwME1CKVxuZXhwb3J0IGNvbnN0IE1BWF9GSUxFX1NJWkUgPSAxMDAgKiAxMDI0ICogMTAyNFxuXG4vLyBNYWdpYyBieXRlcyBzaWduYXR1cmVzIGZvciBzZXJ2ZXItc2lkZSB2YWxpZGF0aW9uXG5jb25zdCBNQUdJQ19CWVRFUzogUmVjb3JkPHN0cmluZywgQnVmZmVyW10+ID0ge1xuICAnYXBwbGljYXRpb24vcGRmJzogW0J1ZmZlci5mcm9tKFsweDI1LCAweDUwLCAweDQ0LCAweDQ2XSldLCAvLyAlUERGXG4gICdpbWFnZS9wbmcnOiBbQnVmZmVyLmZyb20oWzB4ODksIDB4NTAsIDB4NEUsIDB4NDcsIDB4MEQsIDB4MEEsIDB4MUEsIDB4MEFdKV0sIC8vIFBOR1xuICAnaW1hZ2UvanBlZyc6IFtcbiAgICBCdWZmZXIuZnJvbShbMHhGRiwgMHhEOCwgMHhGRiwgMHhFMF0pLCAvLyBKUEVHIEpGSUZcbiAgICBCdWZmZXIuZnJvbShbMHhGRiwgMHhEOCwgMHhGRiwgMHhFMV0pLCAvLyBKUEVHIEV4aWZcbiAgICBCdWZmZXIuZnJvbShbMHhGRiwgMHhEOCwgMHhGRiwgMHhFMl0pLCAvLyBKUEVHXG4gIF0sXG4gICdpbWFnZS9naWYnOiBbXG4gICAgQnVmZmVyLmZyb20oWzB4NDcsIDB4NDksIDB4NDYsIDB4MzgsIDB4MzcsIDB4NjFdKSwgLy8gR0lGODdhXG4gICAgQnVmZmVyLmZyb20oWzB4NDcsIDB4NDksIDB4NDYsIDB4MzgsIDB4MzksIDB4NjFdKSwgLy8gR0lGODlhXG4gIF0sXG4gICd2aWRlby9tcDQnOiBbXG4gICAgQnVmZmVyLmZyb20oWzB4MDAsIDB4MDAsIDB4MDAsIDB4MTgsIDB4NjYsIDB4NzQsIDB4NzksIDB4NzBdKSwgLy8gZnR5cFxuICAgIEJ1ZmZlci5mcm9tKFsweDAwLCAweDAwLCAweDAwLCAweDFDLCAweDY2LCAweDc0LCAweDc5LCAweDcwXSksIC8vIGZ0eXAgYWx0XG4gIF0sXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VydmVyVmFsaWRhdGlvblJlc3VsdCB7XG4gIHZhbGlkOiBib29sZWFuXG4gIGVycm9yPzogc3RyaW5nXG4gIGVycm9yQ29kZT86ICdJTlZBTElEX1RZUEUnIHwgJ0ZJTEVfVE9PX0xBUkdFJyB8ICdFTVBUWV9GSUxFJyB8ICdNQUdJQ19CWVRFU19NSVNNQVRDSCcgfCAnVkFMSURBVElPTl9FUlJPUidcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBmaWxlIE1JTUUgdHlwZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVNaW1lVHlwZShtaW1lVHlwZTogc3RyaW5nKTogU2VydmVyVmFsaWRhdGlvblJlc3VsdCB7XG4gIGlmICghQUxMT1dFRF9NSU1FX1RZUEVTLmluY2x1ZGVzKG1pbWVUeXBlIGFzIGFueSkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6IGBGaWxlIHR5cGUgXCIke21pbWVUeXBlfVwiIGlzIG5vdCBhbGxvd2VkYCxcbiAgICAgIGVycm9yQ29kZTogJ0lOVkFMSURfVFlQRScsXG4gICAgfVxuICB9XG4gIHJldHVybiB7IHZhbGlkOiB0cnVlIH1cbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBmaWxlIHNpemVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRmlsZVNpemUoc2l6ZTogbnVtYmVyLCBmaWxlbmFtZTogc3RyaW5nKTogU2VydmVyVmFsaWRhdGlvblJlc3VsdCB7XG4gIGlmIChzaXplID4gTUFYX0ZJTEVfU0laRSkge1xuICAgIHJldHVybiB7XG4gICAgICB2YWxpZDogZmFsc2UsXG4gICAgICBlcnJvcjogYEZpbGUgXCIke2ZpbGVuYW1lfVwiIGV4Y2VlZHMgbWF4aW11bSBzaXplIG9mICR7TUFYX0ZJTEVfU0laRSAvIDEwMjQgLyAxMDI0fU1CYCxcbiAgICAgIGVycm9yQ29kZTogJ0ZJTEVfVE9PX0xBUkdFJyxcbiAgICB9XG4gIH1cbiAgaWYgKHNpemUgPT09IDApIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6IGBGaWxlIFwiJHtmaWxlbmFtZX1cIiBpcyBlbXB0eWAsXG4gICAgICBlcnJvckNvZGU6ICdFTVBUWV9GSUxFJyxcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUgfVxufVxuXG4vKipcbiAqIFZhbGlkYXRlIG1hZ2ljIGJ5dGVzIGZyb20gQnVmZmVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZU1hZ2ljQnl0ZXMoXG4gIGJ1ZmZlcjogQnVmZmVyLFxuICBtaW1lVHlwZTogc3RyaW5nLFxuICBmaWxlbmFtZTogc3RyaW5nXG4pOiBTZXJ2ZXJWYWxpZGF0aW9uUmVzdWx0IHtcbiAgLy8gU2tpcCB2YWxpZGF0aW9uIGZvciB0ZXh0IGZpbGVzIChubyByZWxpYWJsZSBtYWdpYyBieXRlcylcbiAgaWYgKFxuICAgIG1pbWVUeXBlID09PSAndGV4dC9wbGFpbicgfHxcbiAgICBtaW1lVHlwZSA9PT0gJ3RleHQvY3N2JyB8fFxuICAgIG1pbWVUeXBlID09PSAnYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsJ1xuICApIHtcbiAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSB9XG4gIH1cblxuICBjb25zdCBzaWduYXR1cmVzID0gTUFHSUNfQllURVNbbWltZVR5cGVdXG4gIGlmICghc2lnbmF0dXJlcykge1xuICAgIC8vIE5vIG1hZ2ljIGJ5dGVzIGRlZmluZWQsIHNraXAgdmFsaWRhdGlvblxuICAgIHJldHVybiB7IHZhbGlkOiB0cnVlIH1cbiAgfVxuXG4gIC8vIENoZWNrIGlmIGJ1ZmZlciBtYXRjaGVzIGFueSBzaWduYXR1cmVcbiAgY29uc3QgbWF0Y2hlcyA9IHNpZ25hdHVyZXMuc29tZSgoc2lnbmF0dXJlKSA9PiB7XG4gICAgaWYgKGJ1ZmZlci5sZW5ndGggPCBzaWduYXR1cmUubGVuZ3RoKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gYnVmZmVyLnN1YmFycmF5KDAsIHNpZ25hdHVyZS5sZW5ndGgpLmVxdWFscyhzaWduYXR1cmUpXG4gIH0pXG5cbiAgaWYgKCFtYXRjaGVzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgIGVycm9yOiBgRmlsZSBcIiR7ZmlsZW5hbWV9XCIgY29udGVudCBkb2Vzbid0IG1hdGNoIGRlY2xhcmVkIHR5cGUgXCIke21pbWVUeXBlfVwiYCxcbiAgICAgIGVycm9yQ29kZTogJ01BR0lDX0JZVEVTX01JU01BVENIJyxcbiAgICB9XG4gIH1cblxuICByZXR1cm4geyB2YWxpZDogdHJ1ZSB9XG59XG5cbi8qKlxuICogQ29tcHJlaGVuc2l2ZSBzZXJ2ZXItc2lkZSBmaWxlIHZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlVXBsb2FkZWRGaWxlKFxuICBidWZmZXI6IEJ1ZmZlcixcbiAgbWltZVR5cGU6IHN0cmluZyxcbiAgZmlsZW5hbWU6IHN0cmluZ1xuKTogU2VydmVyVmFsaWRhdGlvblJlc3VsdCB7XG4gIC8vIDEuIFZhbGlkYXRlIE1JTUUgdHlwZVxuICBjb25zdCBtaW1lUmVzdWx0ID0gdmFsaWRhdGVNaW1lVHlwZShtaW1lVHlwZSlcbiAgaWYgKCFtaW1lUmVzdWx0LnZhbGlkKSByZXR1cm4gbWltZVJlc3VsdFxuXG4gIC8vIDIuIFZhbGlkYXRlIGZpbGUgc2l6ZVxuICBjb25zdCBzaXplUmVzdWx0ID0gdmFsaWRhdGVGaWxlU2l6ZShidWZmZXIubGVuZ3RoLCBmaWxlbmFtZSlcbiAgaWYgKCFzaXplUmVzdWx0LnZhbGlkKSByZXR1cm4gc2l6ZVJlc3VsdFxuXG4gIC8vIDMuIFZhbGlkYXRlIG1hZ2ljIGJ5dGVzXG4gIGNvbnN0IG1hZ2ljUmVzdWx0ID0gdmFsaWRhdGVNYWdpY0J5dGVzKGJ1ZmZlciwgbWltZVR5cGUsIGZpbGVuYW1lKVxuICBpZiAoIW1hZ2ljUmVzdWx0LnZhbGlkKSByZXR1cm4gbWFnaWNSZXN1bHRcblxuICByZXR1cm4geyB2YWxpZDogdHJ1ZSB9XG59XG5cbi8qKlxuICogR2V0IGZpbGUgZXh0ZW5zaW9uIGZyb20gZmlsZW5hbWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVFeHRlbnNpb24oZmlsZW5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHBhcnRzID0gZmlsZW5hbWUuc3BsaXQoJy4nKVxuICByZXR1cm4gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnBvcCgpIS50b0xvd2VyQ2FzZSgpIDogJydcbn1cblxuLyoqXG4gKiBTYW5pdGl6ZSBmaWxlbmFtZSBmb3Igc3RvcmFnZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVGaWxlbmFtZShmaWxlbmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgLy8gUmVtb3ZlIG9yIHJlcGxhY2UgdW5zYWZlIGNoYXJhY3RlcnNcbiAgcmV0dXJuIGZpbGVuYW1lXG4gICAgLnJlcGxhY2UoL1teYS16QS1aMC05Ll8tXS9nLCAnXycpIC8vIFJlcGxhY2UgdW5zYWZlIGNoYXJzIHdpdGggdW5kZXJzY29yZVxuICAgIC5yZXBsYWNlKC9fezIsfS9nLCAnXycpIC8vIFJlcGxhY2UgbXVsdGlwbGUgdW5kZXJzY29yZXMgd2l0aCBzaW5nbGVcbiAgICAuc3Vic3RyaW5nKDAsIDI1NSkgLy8gTGltaXQgbGVuZ3RoXG59XG4iXSwibmFtZXMiOlsiQnVmZmVyIiwiQUxMT1dFRF9NSU1FX1RZUEVTIiwiTUFYX0ZJTEVfU0laRSIsIk1BR0lDX0JZVEVTIiwiZnJvbSIsInZhbGlkYXRlTWltZVR5cGUiLCJtaW1lVHlwZSIsImluY2x1ZGVzIiwidmFsaWQiLCJlcnJvciIsImVycm9yQ29kZSIsInZhbGlkYXRlRmlsZVNpemUiLCJzaXplIiwiZmlsZW5hbWUiLCJ2YWxpZGF0ZU1hZ2ljQnl0ZXMiLCJidWZmZXIiLCJzaWduYXR1cmVzIiwibWF0Y2hlcyIsInNvbWUiLCJzaWduYXR1cmUiLCJsZW5ndGgiLCJzdWJhcnJheSIsImVxdWFscyIsInZhbGlkYXRlVXBsb2FkZWRGaWxlIiwibWltZVJlc3VsdCIsInNpemVSZXN1bHQiLCJtYWdpY1Jlc3VsdCIsImdldEZpbGVFeHRlbnNpb24iLCJwYXJ0cyIsInNwbGl0IiwicG9wIiwidG9Mb3dlckNhc2UiLCJzYW5pdGl6ZUZpbGVuYW1lIiwicmVwbGFjZSIsInN1YnN0cmluZyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/serverValidation.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/textExtraction.ts":
/*!***********************************!*\
  !*** ./src/lib/textExtraction.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cleanTextForEmbedding: () => (/* binding */ cleanTextForEmbedding),\n/* harmony export */   extractTextFromFile: () => (/* binding */ extractTextFromFile),\n/* harmony export */   isTextExtractable: () => (/* binding */ isTextExtractable)\n/* harmony export */ });\nconst pdfParse = __webpack_require__(/*! pdf-parse */ \"(rsc)/./node_modules/pdf-parse/dist/pdf-parse/cjs/index.cjs\");\n/**\n * Extract text content from file buffer based on MIME type\n * Only extracts first 2000 chars for search preview\n */ async function extractTextFromFile(buffer, mimeType) {\n    try {\n        // Skip extraction for binary files (images, videos, etc.)\n        // Only index text-based files\n        // Plain text files (CSV, TXT, MD, JSON)\n        if (mimeType === 'text/plain' || mimeType === 'text/csv' || mimeType === 'text/markdown' || mimeType === 'application/json') {\n            // For text files, just grab first 2000 chars\n            return buffer.toString('utf-8').substring(0, 2000);\n        }\n        // PDF files - extract first page worth of text\n        if (mimeType === 'application/pdf') {\n            const data = await pdfParse(buffer, {\n                max: 1\n            }) // Just first page\n            ;\n            return data.text.substring(0, 2000);\n        }\n        // HTML files\n        if (mimeType === 'text/html') {\n            const html = buffer.toString('utf-8');\n            // Basic HTML tag stripping, first 2000 chars\n            return html.replace(/<[^>]*>/g, ' ').replace(/\\s+/g, ' ').trim().substring(0, 2000);\n        }\n        // For other file types (images, videos, etc.), don't extract\n        // Search will work on filename only\n        return null;\n    } catch (error) {\n        console.error('Text extraction error:', error);\n        return null;\n    }\n}\n/**\n * Check if file type supports text extraction\n */ function isTextExtractable(mimeType) {\n    const extractable = [\n        'application/pdf',\n        'text/plain',\n        'text/csv',\n        'text/markdown',\n        'text/html',\n        'application/json'\n    ];\n    return extractable.includes(mimeType);\n}\n/**\n * Clean and normalize extracted text for search indexing\n * Keep it minimal - just enough for search, not full content\n */ function cleanTextForEmbedding(text) {\n    return text.replace(/\\s+/g, ' ') // Normalize whitespace\n    .replace(/[^\\x20-\\x7E\\n]/g, '') // Remove non-printable characters\n    .trim().substring(0, 2000) // Limit to first 2000 chars (~500 words) - just a preview\n    ;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3RleHRFeHRyYWN0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQU1BLFdBQVdDLG1CQUFPQSxDQUFDLDhFQUFXO0FBRXBDOzs7Q0FHQyxHQUNNLGVBQWVDLG9CQUNwQkMsTUFBYyxFQUNkQyxRQUFnQjtJQUVoQixJQUFJO1FBQ0YsMERBQTBEO1FBQzFELDhCQUE4QjtRQUU5Qix3Q0FBd0M7UUFDeEMsSUFDRUEsYUFBYSxnQkFDYkEsYUFBYSxjQUNiQSxhQUFhLG1CQUNiQSxhQUFhLG9CQUNiO1lBQ0EsNkNBQTZDO1lBQzdDLE9BQU9ELE9BQU9FLFFBQVEsQ0FBQyxTQUFTQyxTQUFTLENBQUMsR0FBRztRQUMvQztRQUVBLCtDQUErQztRQUMvQyxJQUFJRixhQUFhLG1CQUFtQjtZQUNsQyxNQUFNRyxPQUFPLE1BQU1QLFNBQVNHLFFBQVE7Z0JBQUVLLEtBQUs7WUFBRSxHQUFHLGtCQUFrQjs7WUFDbEUsT0FBT0QsS0FBS0UsSUFBSSxDQUFDSCxTQUFTLENBQUMsR0FBRztRQUNoQztRQUVBLGFBQWE7UUFDYixJQUFJRixhQUFhLGFBQWE7WUFDNUIsTUFBTU0sT0FBT1AsT0FBT0UsUUFBUSxDQUFDO1lBQzdCLDZDQUE2QztZQUM3QyxPQUFPSyxLQUFLQyxPQUFPLENBQUMsWUFBWSxLQUFLQSxPQUFPLENBQUMsUUFBUSxLQUFLQyxJQUFJLEdBQUdOLFNBQVMsQ0FBQyxHQUFHO1FBQ2hGO1FBRUEsNkRBQTZEO1FBQzdELG9DQUFvQztRQUNwQyxPQUFPO0lBQ1QsRUFBRSxPQUFPTyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU87SUFDVDtBQUNGO0FBRUE7O0NBRUMsR0FDTSxTQUFTRSxrQkFBa0JYLFFBQWdCO0lBQ2hELE1BQU1ZLGNBQWM7UUFDbEI7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBQ0Q7SUFFRCxPQUFPQSxZQUFZQyxRQUFRLENBQUNiO0FBQzlCO0FBRUE7OztDQUdDLEdBQ00sU0FBU2Msc0JBQXNCVCxJQUFZO0lBQ2hELE9BQU9BLEtBQ0pFLE9BQU8sQ0FBQyxRQUFRLEtBQUssdUJBQXVCO0tBQzVDQSxPQUFPLENBQUMsbUJBQW1CLElBQUksa0NBQWtDO0tBQ2pFQyxJQUFJLEdBQ0pOLFNBQVMsQ0FBQyxHQUFHLE1BQU0sMERBQTBEOztBQUNsRiIsInNvdXJjZXMiOlsiL1VzZXJzL2Nocm9ub2RlL0RvY3VtZW50cy96ZXJvLW5vaXNlL3NyYy9saWIvdGV4dEV4dHJhY3Rpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcGRmUGFyc2UgPSByZXF1aXJlKCdwZGYtcGFyc2UnKVxuXG4vKipcbiAqIEV4dHJhY3QgdGV4dCBjb250ZW50IGZyb20gZmlsZSBidWZmZXIgYmFzZWQgb24gTUlNRSB0eXBlXG4gKiBPbmx5IGV4dHJhY3RzIGZpcnN0IDIwMDAgY2hhcnMgZm9yIHNlYXJjaCBwcmV2aWV3XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleHRyYWN0VGV4dEZyb21GaWxlKFxuICBidWZmZXI6IEJ1ZmZlcixcbiAgbWltZVR5cGU6IHN0cmluZ1xuKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgLy8gU2tpcCBleHRyYWN0aW9uIGZvciBiaW5hcnkgZmlsZXMgKGltYWdlcywgdmlkZW9zLCBldGMuKVxuICAgIC8vIE9ubHkgaW5kZXggdGV4dC1iYXNlZCBmaWxlc1xuICAgIFxuICAgIC8vIFBsYWluIHRleHQgZmlsZXMgKENTViwgVFhULCBNRCwgSlNPTilcbiAgICBpZiAoXG4gICAgICBtaW1lVHlwZSA9PT0gJ3RleHQvcGxhaW4nIHx8XG4gICAgICBtaW1lVHlwZSA9PT0gJ3RleHQvY3N2JyB8fFxuICAgICAgbWltZVR5cGUgPT09ICd0ZXh0L21hcmtkb3duJyB8fFxuICAgICAgbWltZVR5cGUgPT09ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICkge1xuICAgICAgLy8gRm9yIHRleHQgZmlsZXMsIGp1c3QgZ3JhYiBmaXJzdCAyMDAwIGNoYXJzXG4gICAgICByZXR1cm4gYnVmZmVyLnRvU3RyaW5nKCd1dGYtOCcpLnN1YnN0cmluZygwLCAyMDAwKVxuICAgIH1cbiAgICBcbiAgICAvLyBQREYgZmlsZXMgLSBleHRyYWN0IGZpcnN0IHBhZ2Ugd29ydGggb2YgdGV4dFxuICAgIGlmIChtaW1lVHlwZSA9PT0gJ2FwcGxpY2F0aW9uL3BkZicpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBwZGZQYXJzZShidWZmZXIsIHsgbWF4OiAxIH0pIC8vIEp1c3QgZmlyc3QgcGFnZVxuICAgICAgcmV0dXJuIGRhdGEudGV4dC5zdWJzdHJpbmcoMCwgMjAwMClcbiAgICB9XG4gICAgXG4gICAgLy8gSFRNTCBmaWxlc1xuICAgIGlmIChtaW1lVHlwZSA9PT0gJ3RleHQvaHRtbCcpIHtcbiAgICAgIGNvbnN0IGh0bWwgPSBidWZmZXIudG9TdHJpbmcoJ3V0Zi04JylcbiAgICAgIC8vIEJhc2ljIEhUTUwgdGFnIHN0cmlwcGluZywgZmlyc3QgMjAwMCBjaGFyc1xuICAgICAgcmV0dXJuIGh0bWwucmVwbGFjZSgvPFtePl0qPi9nLCAnICcpLnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCkuc3Vic3RyaW5nKDAsIDIwMDApXG4gICAgfVxuICAgIFxuICAgIC8vIEZvciBvdGhlciBmaWxlIHR5cGVzIChpbWFnZXMsIHZpZGVvcywgZXRjLiksIGRvbid0IGV4dHJhY3RcbiAgICAvLyBTZWFyY2ggd2lsbCB3b3JrIG9uIGZpbGVuYW1lIG9ubHlcbiAgICByZXR1cm4gbnVsbFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1RleHQgZXh0cmFjdGlvbiBlcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgZmlsZSB0eXBlIHN1cHBvcnRzIHRleHQgZXh0cmFjdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUZXh0RXh0cmFjdGFibGUobWltZVR5cGU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBleHRyYWN0YWJsZSA9IFtcbiAgICAnYXBwbGljYXRpb24vcGRmJyxcbiAgICAndGV4dC9wbGFpbicsXG4gICAgJ3RleHQvY3N2JyxcbiAgICAndGV4dC9tYXJrZG93bicsXG4gICAgJ3RleHQvaHRtbCcsXG4gICAgJ2FwcGxpY2F0aW9uL2pzb24nLFxuICBdXG4gIFxuICByZXR1cm4gZXh0cmFjdGFibGUuaW5jbHVkZXMobWltZVR5cGUpXG59XG5cbi8qKlxuICogQ2xlYW4gYW5kIG5vcm1hbGl6ZSBleHRyYWN0ZWQgdGV4dCBmb3Igc2VhcmNoIGluZGV4aW5nXG4gKiBLZWVwIGl0IG1pbmltYWwgLSBqdXN0IGVub3VnaCBmb3Igc2VhcmNoLCBub3QgZnVsbCBjb250ZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhblRleHRGb3JFbWJlZGRpbmcodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHRleHRcbiAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpIC8vIE5vcm1hbGl6ZSB3aGl0ZXNwYWNlXG4gICAgLnJlcGxhY2UoL1teXFx4MjAtXFx4N0VcXG5dL2csICcnKSAvLyBSZW1vdmUgbm9uLXByaW50YWJsZSBjaGFyYWN0ZXJzXG4gICAgLnRyaW0oKVxuICAgIC5zdWJzdHJpbmcoMCwgMjAwMCkgLy8gTGltaXQgdG8gZmlyc3QgMjAwMCBjaGFycyAofjUwMCB3b3JkcykgLSBqdXN0IGEgcHJldmlld1xufVxuIl0sIm5hbWVzIjpbInBkZlBhcnNlIiwicmVxdWlyZSIsImV4dHJhY3RUZXh0RnJvbUZpbGUiLCJidWZmZXIiLCJtaW1lVHlwZSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiZGF0YSIsIm1heCIsInRleHQiLCJodG1sIiwicmVwbGFjZSIsInRyaW0iLCJlcnJvciIsImNvbnNvbGUiLCJpc1RleHRFeHRyYWN0YWJsZSIsImV4dHJhY3RhYmxlIiwiaW5jbHVkZXMiLCJjbGVhblRleHRGb3JFbWJlZGRpbmciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/textExtraction.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/urlScraper.ts":
/*!*******************************!*\
  !*** ./src/lib/urlScraper.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isValidUrl: () => (/* binding */ isValidUrl),\n/* harmony export */   scrapeUrl: () => (/* binding */ scrapeUrl),\n/* harmony export */   scrapeUrls: () => (/* binding */ scrapeUrls)\n/* harmony export */ });\n/* harmony import */ var open_graph_scraper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! open-graph-scraper */ \"(rsc)/./node_modules/open-graph-scraper/dist/esm/index.js\");\n/* harmony import */ var open_graph_scraper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(open_graph_scraper__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var oembed_parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! oembed-parser */ \"(rsc)/./node_modules/oembed-parser/src/main.js\");\n\n// @ts-ignore - no proper types for oembed-parser\n\n/**\n * Scrape metadata from a URL using OpenGraph, oEmbed, and fallback methods\n */ async function scrapeUrl(url) {\n    // Normalize URL\n    const normalizedUrl = normalizeUrl(url);\n    // Detect link type\n    const linkType = detectLinkType(normalizedUrl);\n    try {\n        // Try oEmbed first for video platforms (YouTube, Vimeo, etc.)\n        if (linkType === 'video') {\n            try {\n                const oembedData = await (0,oembed_parser__WEBPACK_IMPORTED_MODULE_1__.extract)(normalizedUrl);\n                return {\n                    url: normalizedUrl,\n                    title: oembedData.title,\n                    description: oembedData.description,\n                    imageUrl: oembedData.thumbnail_url,\n                    siteName: oembedData.provider_name,\n                    linkType: 'video'\n                };\n            } catch (err) {\n                console.warn('oEmbed extraction failed, falling back to OpenGraph:', err);\n            }\n        }\n        // Fallback to OpenGraph scraping\n        const { result } = await open_graph_scraper__WEBPACK_IMPORTED_MODULE_0___default()({\n            url: normalizedUrl\n        });\n        return {\n            url: normalizedUrl,\n            title: result.ogTitle || result.twitterTitle,\n            description: result.ogDescription || result.twitterDescription,\n            imageUrl: result.ogImage?.[0]?.url || result.twitterImage?.[0]?.url,\n            siteName: result.ogSiteName,\n            linkType\n        };\n    } catch (error) {\n        console.error('URL scraping failed:', error);\n        // Return minimal metadata if scraping fails\n        return {\n            url: normalizedUrl,\n            title: extractTitleFromUrl(normalizedUrl),\n            linkType\n        };\n    }\n}\n/**\n * Scrape multiple URLs in parallel\n */ async function scrapeUrls(urls) {\n    const results = await Promise.allSettled(urls.map((url)=>scrapeUrl(url)));\n    return results.filter((result)=>result.status === 'fulfilled').map((result)=>result.value);\n}\n/**\n * Normalize URL (add protocol if missing, trim whitespace)\n */ function normalizeUrl(url) {\n    let normalized = url.trim();\n    // Add https:// if no protocol\n    if (!normalized.match(/^https?:\\/\\//i)) {\n        normalized = `https://${normalized}`;\n    }\n    return normalized;\n}\n/**\n * Detect link type based on URL patterns\n */ function detectLinkType(url) {\n    const urlLower = url.toLowerCase();\n    // Video platforms\n    if (urlLower.includes('youtube.com') || urlLower.includes('youtu.be') || urlLower.includes('vimeo.com') || urlLower.includes('dailymotion.com') || urlLower.includes('twitch.tv')) {\n        return 'video';\n    }\n    // Social media\n    if (urlLower.includes('twitter.com') || urlLower.includes('x.com') || urlLower.includes('facebook.com') || urlLower.includes('instagram.com') || urlLower.includes('linkedin.com') || urlLower.includes('reddit.com')) {\n        return 'social';\n    }\n    // News/blog domains (common patterns)\n    if (urlLower.includes('medium.com') || urlLower.includes('substack.com') || urlLower.includes('blog.') || urlLower.includes('/article/') || urlLower.includes('/post/')) {\n        return 'article';\n    }\n    return 'generic';\n}\n/**\n * Extract a basic title from URL if scraping fails\n */ function extractTitleFromUrl(url) {\n    try {\n        const urlObj = new URL(url);\n        const pathname = urlObj.pathname;\n        // Get last path segment\n        const segments = pathname.split('/').filter(Boolean);\n        const lastSegment = segments[segments.length - 1] || urlObj.hostname;\n        // Clean up (remove file extension, replace dashes/underscores with spaces)\n        return lastSegment.replace(/\\.[^.]+$/, '') // Remove extension\n        .replace(/[-_]/g, ' ').replace(/\\b\\w/g, (c)=>c.toUpperCase()) // Title case\n        ;\n    } catch  {\n        return url;\n    }\n}\n/**\n * Validate URL format\n */ function isValidUrl(url) {\n    try {\n        const normalized = normalizeUrl(url);\n        new URL(normalized);\n        return true;\n    } catch  {\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LG1CQUNsQkYsU0FBU0UsUUFBUSxDQUFDLFlBQ2xCRixTQUFTRSxRQUFRLENBQUMsZ0JBQ2xCRixTQUFTRSxRQUFRLENBQUMsV0FDbEI7UUFDQSxPQUFPO0lBQ1Q7SUFFQSxPQUFPO0FBQ1Q7QUFFQTs7Q0FFQyxHQUNELFNBQVNmLG9CQUFvQnhCLEdBQVc7SUFDdEMsSUFBSTtRQUNGLE1BQU13QyxTQUFTLElBQUlDLElBQUl6QztRQUN2QixNQUFNMEMsV0FBV0YsT0FBT0UsUUFBUTtRQUVoQyx3QkFBd0I7UUFDeEIsTUFBTUMsV0FBV0QsU0FBU0UsS0FBSyxDQUFDLEtBQUtiLE1BQU0sQ0FBQ2M7UUFDNUMsTUFBTUMsY0FBY0gsUUFBUSxDQUFDQSxTQUFTSSxNQUFNLEdBQUcsRUFBRSxJQUFJUCxPQUFPUSxRQUFRO1FBRXBFLDJFQUEyRTtRQUMzRSxPQUFPRixZQUNKRyxPQUFPLENBQUMsWUFBWSxJQUFJLG1CQUFtQjtTQUMzQ0EsT0FBTyxDQUFDLFNBQVMsS0FDakJBLE9BQU8sQ0FBQyxTQUFTLENBQUNDLElBQU1BLEVBQUVDLFdBQVcsSUFBSSxhQUFhOztJQUMzRCxFQUFFLE9BQU07UUFDTixPQUFPbkQ7SUFDVDtBQUNGO0FBRUE7O0NBRUMsR0FDTSxTQUFTb0QsV0FBV3BELEdBQVc7SUFDcEMsSUFBSTtRQUNGLE1BQU1rQyxhQUFhaEMsYUFBYUY7UUFDaEMsSUFBSXlDLElBQUlQO1FBQ1IsT0FBTztJQUNULEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvY2hyb25vZGUvRG9jdW1lbnRzL3plcm8tbm9pc2Uvc3JjL2xpYi91cmxTY3JhcGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBvZ3MgZnJvbSAnb3Blbi1ncmFwaC1zY3JhcGVyJ1xuLy8gQHRzLWlnbm9yZSAtIG5vIHByb3BlciB0eXBlcyBmb3Igb2VtYmVkLXBhcnNlclxuaW1wb3J0IHsgZXh0cmFjdCB9IGZyb20gJ29lbWJlZC1wYXJzZXInXG5cbmV4cG9ydCBpbnRlcmZhY2UgVXJsTWV0YWRhdGEge1xuICB1cmw6IHN0cmluZ1xuICB0aXRsZT86IHN0cmluZ1xuICBkZXNjcmlwdGlvbj86IHN0cmluZ1xuICBpbWFnZVVybD86IHN0cmluZ1xuICBzaXRlTmFtZT86IHN0cmluZ1xuICBsaW5rVHlwZTogJ2FydGljbGUnIHwgJ3ZpZGVvJyB8ICdzb2NpYWwnIHwgJ2dlbmVyaWMnXG59XG5cbi8qKlxuICogU2NyYXBlIG1ldGFkYXRhIGZyb20gYSBVUkwgdXNpbmcgT3BlbkdyYXBoLCBvRW1iZWQsIGFuZCBmYWxsYmFjayBtZXRob2RzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzY3JhcGVVcmwodXJsOiBzdHJpbmcpOiBQcm9taXNlPFVybE1ldGFkYXRhPiB7XG4gIC8vIE5vcm1hbGl6ZSBVUkxcbiAgY29uc3Qgbm9ybWFsaXplZFVybCA9IG5vcm1hbGl6ZVVybCh1cmwpXG4gIFxuICAvLyBEZXRlY3QgbGluayB0eXBlXG4gIGNvbnN0IGxpbmtUeXBlID0gZGV0ZWN0TGlua1R5cGUobm9ybWFsaXplZFVybClcbiAgXG4gIHRyeSB7XG4gICAgLy8gVHJ5IG9FbWJlZCBmaXJzdCBmb3IgdmlkZW8gcGxhdGZvcm1zIChZb3VUdWJlLCBWaW1lbywgZXRjLilcbiAgICBpZiAobGlua1R5cGUgPT09ICd2aWRlbycpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG9lbWJlZERhdGEgPSBhd2FpdCBleHRyYWN0KG5vcm1hbGl6ZWRVcmwpXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdXJsOiBub3JtYWxpemVkVXJsLFxuICAgICAgICAgIHRpdGxlOiBvZW1iZWREYXRhLnRpdGxlLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBvZW1iZWREYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIGltYWdlVXJsOiBvZW1iZWREYXRhLnRodW1ibmFpbF91cmwsXG4gICAgICAgICAgc2l0ZU5hbWU6IG9lbWJlZERhdGEucHJvdmlkZXJfbmFtZSxcbiAgICAgICAgICBsaW5rVHlwZTogJ3ZpZGVvJyxcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybignb0VtYmVkIGV4dHJhY3Rpb24gZmFpbGVkLCBmYWxsaW5nIGJhY2sgdG8gT3BlbkdyYXBoOicsIGVycilcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gRmFsbGJhY2sgdG8gT3BlbkdyYXBoIHNjcmFwaW5nXG4gICAgY29uc3QgeyByZXN1bHQgfSA9IGF3YWl0IG9ncyh7IHVybDogbm9ybWFsaXplZFVybCB9KVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB1cmw6IG5vcm1hbGl6ZWRVcmwsXG4gICAgICB0aXRsZTogcmVzdWx0Lm9nVGl0bGUgfHwgcmVzdWx0LnR3aXR0ZXJUaXRsZSxcbiAgICAgIGRlc2NyaXB0aW9uOiByZXN1bHQub2dEZXNjcmlwdGlvbiB8fCByZXN1bHQudHdpdHRlckRlc2NyaXB0aW9uLFxuICAgICAgaW1hZ2VVcmw6IHJlc3VsdC5vZ0ltYWdlPy5bMF0/LnVybCB8fCByZXN1bHQudHdpdHRlckltYWdlPy5bMF0/LnVybCxcbiAgICAgIHNpdGVOYW1lOiByZXN1bHQub2dTaXRlTmFtZSxcbiAgICAgIGxpbmtUeXBlLFxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdVUkwgc2NyYXBpbmcgZmFpbGVkOicsIGVycm9yKVxuICAgIFxuICAgIC8vIFJldHVybiBtaW5pbWFsIG1ldGFkYXRhIGlmIHNjcmFwaW5nIGZhaWxzXG4gICAgcmV0dXJuIHtcbiAgICAgIHVybDogbm9ybWFsaXplZFVybCxcbiAgICAgIHRpdGxlOiBleHRyYWN0VGl0bGVGcm9tVXJsKG5vcm1hbGl6ZWRVcmwpLFxuICAgICAgbGlua1R5cGUsXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU2NyYXBlIG11bHRpcGxlIFVSTHMgaW4gcGFyYWxsZWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNjcmFwZVVybHModXJsczogc3RyaW5nW10pOiBQcm9taXNlPFVybE1ldGFkYXRhW10+IHtcbiAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChcbiAgICB1cmxzLm1hcCgodXJsKSA9PiBzY3JhcGVVcmwodXJsKSlcbiAgKVxuICBcbiAgcmV0dXJuIHJlc3VsdHNcbiAgICAuZmlsdGVyKChyZXN1bHQpOiByZXN1bHQgaXMgUHJvbWlzZUZ1bGZpbGxlZFJlc3VsdDxVcmxNZXRhZGF0YT4gPT4gcmVzdWx0LnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcpXG4gICAgLm1hcCgocmVzdWx0KSA9PiByZXN1bHQudmFsdWUpXG59XG5cbi8qKlxuICogTm9ybWFsaXplIFVSTCAoYWRkIHByb3RvY29sIGlmIG1pc3NpbmcsIHRyaW0gd2hpdGVzcGFjZSlcbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplVXJsKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgbGV0IG5vcm1hbGl6ZWQgPSB1cmwudHJpbSgpXG4gIFxuICAvLyBBZGQgaHR0cHM6Ly8gaWYgbm8gcHJvdG9jb2xcbiAgaWYgKCFub3JtYWxpemVkLm1hdGNoKC9eaHR0cHM/OlxcL1xcLy9pKSkge1xuICAgIG5vcm1hbGl6ZWQgPSBgaHR0cHM6Ly8ke25vcm1hbGl6ZWR9YFxuICB9XG4gIFxuICByZXR1cm4gbm9ybWFsaXplZFxufVxuXG4vKipcbiAqIERldGVjdCBsaW5rIHR5cGUgYmFzZWQgb24gVVJMIHBhdHRlcm5zXG4gKi9cbmZ1bmN0aW9uIGRldGVjdExpbmtUeXBlKHVybDogc3RyaW5nKTogJ2FydGljbGUnIHwgJ3ZpZGVvJyB8ICdzb2NpYWwnIHwgJ2dlbmVyaWMnIHtcbiAgY29uc3QgdXJsTG93ZXIgPSB1cmwudG9Mb3dlckNhc2UoKVxuICBcbiAgLy8gVmlkZW8gcGxhdGZvcm1zXG4gIGlmIChcbiAgICB1cmxMb3dlci5pbmNsdWRlcygneW91dHViZS5jb20nKSB8fFxuICAgIHVybExvd2VyLmluY2x1ZGVzKCd5b3V0dS5iZScpIHx8XG4gICAgdXJsTG93ZXIuaW5jbHVkZXMoJ3ZpbWVvLmNvbScpIHx8XG4gICAgdXJsTG93ZXIuaW5jbHVkZXMoJ2RhaWx5bW90aW9uLmNvbScpIHx8XG4gICAgdXJsTG93ZXIuaW5jbHVkZXMoJ3R3aXRjaC50dicpXG4gICkge1xuICAgIHJldHVybiAndmlkZW8nXG4gIH1cbiAgXG4gIC8vIFNvY2lhbCBtZWRpYVxuICBpZiAoXG4gICAgdXJsTG93ZXIuaW5jbHVkZXMoJ3R3aXR0ZXIuY29tJykgfHxcbiAgICB1cmxMb3dlci5pbmNsdWRlcygneC5jb20nKSB8fFxuICAgIHVybExvd2VyLmluY2x1ZGVzKCdmYWNlYm9vay5jb20nKSB8fFxuICAgIHVybExvd2VyLmluY2x1ZGVzKCdpbnN0YWdyYW0uY29tJykgfHxcbiAgICB1cmxMb3dlci5pbmNsdWRlcygnbGlua2VkaW4uY29tJykgfHxcbiAgICB1cmxMb3dlci5pbmNsdWRlcygncmVkZGl0LmNvbScpXG4gICkge1xuICAgIHJldHVybiAnc29jaWFsJ1xuICB9XG4gIFxuICAvLyBOZXdzL2Jsb2cgZG9tYWlucyAoY29tbW9uIHBhdHRlcm5zKVxuICBpZiAoXG4gICAgdXJsTG93ZXIuaW5jbHVkZXMoJ21lZGl1bS5jb20nKSB8fFxuICAgIHVybExvd2VyLmluY2x1ZGVzKCdzdWJzdGFjay5jb20nKSB8fFxuICAgIHVybExvd2VyLmluY2x1ZGVzKCdibG9nLicpIHx8XG4gICAgdXJsTG93ZXIuaW5jbHVkZXMoJy9hcnRpY2xlLycpIHx8XG4gICAgdXJsTG93ZXIuaW5jbHVkZXMoJy9wb3N0LycpXG4gICkge1xuICAgIHJldHVybiAnYXJ0aWNsZSdcbiAgfVxuICBcbiAgcmV0dXJuICdnZW5lcmljJ1xufVxuXG4vKipcbiAqIEV4dHJhY3QgYSBiYXNpYyB0aXRsZSBmcm9tIFVSTCBpZiBzY3JhcGluZyBmYWlsc1xuICovXG5mdW5jdGlvbiBleHRyYWN0VGl0bGVGcm9tVXJsKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1cmxPYmogPSBuZXcgVVJMKHVybClcbiAgICBjb25zdCBwYXRobmFtZSA9IHVybE9iai5wYXRobmFtZVxuICAgIFxuICAgIC8vIEdldCBsYXN0IHBhdGggc2VnbWVudFxuICAgIGNvbnN0IHNlZ21lbnRzID0gcGF0aG5hbWUuc3BsaXQoJy8nKS5maWx0ZXIoQm9vbGVhbilcbiAgICBjb25zdCBsYXN0U2VnbWVudCA9IHNlZ21lbnRzW3NlZ21lbnRzLmxlbmd0aCAtIDFdIHx8IHVybE9iai5ob3N0bmFtZVxuICAgIFxuICAgIC8vIENsZWFuIHVwIChyZW1vdmUgZmlsZSBleHRlbnNpb24sIHJlcGxhY2UgZGFzaGVzL3VuZGVyc2NvcmVzIHdpdGggc3BhY2VzKVxuICAgIHJldHVybiBsYXN0U2VnbWVudFxuICAgICAgLnJlcGxhY2UoL1xcLlteLl0rJC8sICcnKSAvLyBSZW1vdmUgZXh0ZW5zaW9uXG4gICAgICAucmVwbGFjZSgvWy1fXS9nLCAnICcpXG4gICAgICAucmVwbGFjZSgvXFxiXFx3L2csIChjKSA9PiBjLnRvVXBwZXJDYXNlKCkpIC8vIFRpdGxlIGNhc2VcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIHVybFxuICB9XG59XG5cbi8qKlxuICogVmFsaWRhdGUgVVJMIGZvcm1hdFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZFVybCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuICB0cnkge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVVcmwodXJsKVxuICAgIG5ldyBVUkwobm9ybWFsaXplZClcbiAgICByZXR1cm4gdHJ1ZVxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuIl0sIm5hbWVzIjpbIm9ncyIsImV4dHJhY3QiLCJzY3JhcGVVcmwiLCJ1cmwiLCJub3JtYWxpemVkVXJsIiwibm9ybWFsaXplVXJsIiwibGlua1R5cGUiLCJkZXRlY3RMaW5rVHlwZSIsIm9lbWJlZERhdGEiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiaW1hZ2VVcmwiLCJ0aHVtYm5haWxfdXJsIiwic2l0ZU5hbWUiLCJwcm92aWRlcl9uYW1lIiwiZXJyIiwiY29uc29sZSIsIndhcm4iLCJyZXN1bHQiLCJvZ1RpdGxlIiwidHdpdHRlclRpdGxlIiwib2dEZXNjcmlwdGlvbiIsInR3aXR0ZXJEZXNjcmlwdGlvbiIsIm9nSW1hZ2UiLCJ0d2l0dGVySW1hZ2UiLCJvZ1NpdGVOYW1lIiwiZXJyb3IiLCJleHRyYWN0VGl0bGVGcm9tVXJsIiwic2NyYXBlVXJscyIsInVybHMiLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFsbFNldHRsZWQiLCJtYXAiLCJmaWx0ZXIiLCJzdGF0dXMiLCJ2YWx1ZSIsIm5vcm1hbGl6ZWQiLCJ0cmltIiwibWF0Y2giLCJ1cmxMb3dlciIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJ1cmxPYmoiLCJVUkwiLCJwYXRobmFtZSIsInNlZ21lbnRzIiwic3BsaXQiLCJCb29sZWFuIiwibGFzdFNlZ21lbnQiLCJsZW5ndGgiLCJob3N0bmFtZSIsInJlcGxhY2UiLCJjIiwidG9VcHBlckNhc2UiLCJpc1ZhbGlkVXJsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/urlScraper.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "node:assert":
/*!******************************!*\
  !*** external "node:assert" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:assert");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:buffer");

/***/ }),

/***/ "node:console":
/*!*******************************!*\
  !*** external "node:console" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:console");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "node:diagnostics_channel":
/*!*******************************************!*\
  !*** external "node:diagnostics_channel" ***!
  \*******************************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:diagnostics_channel");

/***/ }),

/***/ "node:dns":
/*!***************************!*\
  !*** external "node:dns" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:dns");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:events");

/***/ }),

/***/ "node:fs/promises":
/*!***********************************!*\
  !*** external "node:fs/promises" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs/promises");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:http");

/***/ }),

/***/ "node:http2":
/*!*****************************!*\
  !*** external "node:http2" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:http2");

/***/ }),

/***/ "node:net":
/*!***************************!*\
  !*** external "node:net" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:net");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ "node:perf_hooks":
/*!**********************************!*\
  !*** external "node:perf_hooks" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:perf_hooks");

/***/ }),

/***/ "node:querystring":
/*!***********************************!*\
  !*** external "node:querystring" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:querystring");

/***/ }),

/***/ "node:sqlite":
/*!******************************!*\
  !*** external "node:sqlite" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:sqlite");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:timers":
/*!******************************!*\
  !*** external "node:timers" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:timers");

/***/ }),

/***/ "node:tls":
/*!***************************!*\
  !*** external "node:tls" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:tls");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ "node:util/types":
/*!**********************************!*\
  !*** external "node:util/types" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util/types");

/***/ }),

/***/ "node:worker_threads":
/*!**************************************!*\
  !*** external "node:worker_threads" ***!
  \**************************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:worker_threads");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:zlib");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mime-db","vendor-chunks/axios","vendor-chunks/follow-redirects","vendor-chunks/debug","vendor-chunks/form-data","vendor-chunks/get-intrinsic","vendor-chunks/asynckit","vendor-chunks/combined-stream","vendor-chunks/mime-types","vendor-chunks/proxy-from-env","vendor-chunks/ms","vendor-chunks/supports-color","vendor-chunks/has-symbols","vendor-chunks/delayed-stream","vendor-chunks/function-bind","vendor-chunks/es-set-tostringtag","vendor-chunks/get-proto","vendor-chunks/call-bind-apply-helpers","vendor-chunks/dunder-proto","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/has-flag","vendor-chunks/gopd","vendor-chunks/es-define-property","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/es-object-atoms","vendor-chunks/open-graph-scraper","vendor-chunks/undici","vendor-chunks/iconv-lite","vendor-chunks/parse5","vendor-chunks/cheerio","vendor-chunks/css-select","vendor-chunks/chardet","vendor-chunks/entities","vendor-chunks/domutils","vendor-chunks/htmlparser2","vendor-chunks/oembed-parser","vendor-chunks/whatwg-url","vendor-chunks/whatwg-mimetype","vendor-chunks/css-what","vendor-chunks/whatwg-encoding","vendor-chunks/nth-check","vendor-chunks/cheerio-select","vendor-chunks/encoding-sniffer","vendor-chunks/tr46","vendor-chunks/domhandler","vendor-chunks/dom-serializer","vendor-chunks/node-fetch","vendor-chunks/pdf-parse","vendor-chunks/parse5-parser-stream","vendor-chunks/parse5-htmlparser2-tree-adapter","vendor-chunks/webidl-conversions","vendor-chunks/safer-buffer","vendor-chunks/domelementtype","vendor-chunks/cross-fetch","vendor-chunks/boolbase"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fchronode%2FDocuments%2Fzero-noise%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fchronode%2FDocuments%2Fzero-noise&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();