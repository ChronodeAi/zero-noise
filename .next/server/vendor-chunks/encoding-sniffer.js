"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/encoding-sniffer";
exports.ids = ["vendor-chunks/encoding-sniffer"];
exports.modules = {

/***/ "(rsc)/./node_modules/encoding-sniffer/dist/commonjs/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/encoding-sniffer/dist/commonjs/index.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.getEncoding = exports.DecodeStream = void 0;\nexports.decodeBuffer = decodeBuffer;\nconst node_stream_1 = __webpack_require__(/*! node:stream */ \"node:stream\");\nconst iconv_lite_1 = __importDefault(__webpack_require__(/*! iconv-lite */ \"(rsc)/./node_modules/iconv-lite/lib/index.js\"));\nconst sniffer_js_1 = __webpack_require__(/*! ./sniffer.js */ \"(rsc)/./node_modules/encoding-sniffer/dist/commonjs/sniffer.js\");\n/**\n * Sniff the encoding of a buffer, then decode it.\n *\n * @param buffer Buffer to be decoded\n * @param options Options for the sniffer\n * @returns The decoded buffer\n */\nfunction decodeBuffer(buffer, options = {}) {\n    return iconv_lite_1.default.decode(buffer, (0, sniffer_js_1.getEncoding)(buffer, options));\n}\n/**\n * Decodes a stream of buffers into a stream of strings.\n *\n * Reads the first 1024 bytes and passes them to the sniffer. Once an encoding\n * has been determined, it passes all data to iconv-lite's stream and outputs\n * the results.\n */\nclass DecodeStream extends node_stream_1.Transform {\n    constructor(options) {\n        var _a;\n        super({ decodeStrings: false, encoding: \"utf-8\" });\n        this.buffers = [];\n        /** The iconv decode stream. If it is set, we have read more than `options.maxBytes` bytes. */\n        this.iconv = null;\n        this.readBytes = 0;\n        this.sniffer = new sniffer_js_1.Sniffer(options);\n        this.maxBytes = (_a = options === null || options === void 0 ? void 0 : options.maxBytes) !== null && _a !== void 0 ? _a : 1024;\n    }\n    _transform(chunk, _encoding, callback) {\n        if (this.readBytes < this.maxBytes) {\n            this.sniffer.write(chunk);\n            this.readBytes += chunk.length;\n            if (this.readBytes < this.maxBytes) {\n                this.buffers.push(chunk);\n                callback();\n                return;\n            }\n        }\n        this.getIconvStream().write(chunk, callback);\n    }\n    getIconvStream() {\n        if (this.iconv) {\n            return this.iconv;\n        }\n        const stream = iconv_lite_1.default.decodeStream(this.sniffer.encoding);\n        stream.on(\"data\", (chunk) => this.push(chunk, \"utf-8\"));\n        stream.on(\"end\", () => this.push(null));\n        this.iconv = stream;\n        for (const buffer of this.buffers) {\n            stream.write(buffer);\n        }\n        this.buffers.length = 0;\n        return stream;\n    }\n    _flush(callback) {\n        this.getIconvStream().end(callback);\n    }\n}\nexports.DecodeStream = DecodeStream;\nvar sniffer_js_2 = __webpack_require__(/*! ./sniffer.js */ \"(rsc)/./node_modules/encoding-sniffer/dist/commonjs/sniffer.js\");\nObject.defineProperty(exports, \"getEncoding\", ({ enumerable: true, get: function () { return sniffer_js_2.getEncoding; } }));\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZW5jb2Rpbmctc25pZmZlci9kaXN0L2NvbW1vbmpzL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsbUJBQW1CLEdBQUcsb0JBQW9CO0FBQzFDLG9CQUFvQjtBQUNwQixzQkFBc0IsbUJBQU8sQ0FBQyxnQ0FBYTtBQUMzQyxxQ0FBcUMsbUJBQU8sQ0FBQyxnRUFBWTtBQUN6RCxxQkFBcUIsbUJBQU8sQ0FBQyxvRkFBYztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IseUNBQXlDO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCLG1CQUFtQixtQkFBTyxDQUFDLG9GQUFjO0FBQ3pDLCtDQUE4QyxFQUFFLHFDQUFxQyxvQ0FBb0MsRUFBQztBQUMxSCIsInNvdXJjZXMiOlsiL1VzZXJzL2Nocm9ub2RlL0RvY3VtZW50cy96ZXJvLW5vaXNlL25vZGVfbW9kdWxlcy9lbmNvZGluZy1zbmlmZmVyL2Rpc3QvY29tbW9uanMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmdldEVuY29kaW5nID0gZXhwb3J0cy5EZWNvZGVTdHJlYW0gPSB2b2lkIDA7XG5leHBvcnRzLmRlY29kZUJ1ZmZlciA9IGRlY29kZUJ1ZmZlcjtcbmNvbnN0IG5vZGVfc3RyZWFtXzEgPSByZXF1aXJlKFwibm9kZTpzdHJlYW1cIik7XG5jb25zdCBpY29udl9saXRlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImljb252LWxpdGVcIikpO1xuY29uc3Qgc25pZmZlcl9qc18xID0gcmVxdWlyZShcIi4vc25pZmZlci5qc1wiKTtcbi8qKlxuICogU25pZmYgdGhlIGVuY29kaW5nIG9mIGEgYnVmZmVyLCB0aGVuIGRlY29kZSBpdC5cbiAqXG4gKiBAcGFyYW0gYnVmZmVyIEJ1ZmZlciB0byBiZSBkZWNvZGVkXG4gKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIGZvciB0aGUgc25pZmZlclxuICogQHJldHVybnMgVGhlIGRlY29kZWQgYnVmZmVyXG4gKi9cbmZ1bmN0aW9uIGRlY29kZUJ1ZmZlcihidWZmZXIsIG9wdGlvbnMgPSB7fSkge1xuICAgIHJldHVybiBpY29udl9saXRlXzEuZGVmYXVsdC5kZWNvZGUoYnVmZmVyLCAoMCwgc25pZmZlcl9qc18xLmdldEVuY29kaW5nKShidWZmZXIsIG9wdGlvbnMpKTtcbn1cbi8qKlxuICogRGVjb2RlcyBhIHN0cmVhbSBvZiBidWZmZXJzIGludG8gYSBzdHJlYW0gb2Ygc3RyaW5ncy5cbiAqXG4gKiBSZWFkcyB0aGUgZmlyc3QgMTAyNCBieXRlcyBhbmQgcGFzc2VzIHRoZW0gdG8gdGhlIHNuaWZmZXIuIE9uY2UgYW4gZW5jb2RpbmdcbiAqIGhhcyBiZWVuIGRldGVybWluZWQsIGl0IHBhc3NlcyBhbGwgZGF0YSB0byBpY29udi1saXRlJ3Mgc3RyZWFtIGFuZCBvdXRwdXRzXG4gKiB0aGUgcmVzdWx0cy5cbiAqL1xuY2xhc3MgRGVjb2RlU3RyZWFtIGV4dGVuZHMgbm9kZV9zdHJlYW1fMS5UcmFuc2Zvcm0ge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBzdXBlcih7IGRlY29kZVN0cmluZ3M6IGZhbHNlLCBlbmNvZGluZzogXCJ1dGYtOFwiIH0pO1xuICAgICAgICB0aGlzLmJ1ZmZlcnMgPSBbXTtcbiAgICAgICAgLyoqIFRoZSBpY29udiBkZWNvZGUgc3RyZWFtLiBJZiBpdCBpcyBzZXQsIHdlIGhhdmUgcmVhZCBtb3JlIHRoYW4gYG9wdGlvbnMubWF4Qnl0ZXNgIGJ5dGVzLiAqL1xuICAgICAgICB0aGlzLmljb252ID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZWFkQnl0ZXMgPSAwO1xuICAgICAgICB0aGlzLnNuaWZmZXIgPSBuZXcgc25pZmZlcl9qc18xLlNuaWZmZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMubWF4Qnl0ZXMgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubWF4Qnl0ZXMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDEwMjQ7XG4gICAgfVxuICAgIF90cmFuc2Zvcm0oY2h1bmssIF9lbmNvZGluZywgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMucmVhZEJ5dGVzIDwgdGhpcy5tYXhCeXRlcykge1xuICAgICAgICAgICAgdGhpcy5zbmlmZmVyLndyaXRlKGNodW5rKTtcbiAgICAgICAgICAgIHRoaXMucmVhZEJ5dGVzICs9IGNodW5rLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRCeXRlcyA8IHRoaXMubWF4Qnl0ZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcnMucHVzaChjaHVuayk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5nZXRJY29udlN0cmVhbSgpLndyaXRlKGNodW5rLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGdldEljb252U3RyZWFtKCkge1xuICAgICAgICBpZiAodGhpcy5pY29udikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaWNvbnY7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RyZWFtID0gaWNvbnZfbGl0ZV8xLmRlZmF1bHQuZGVjb2RlU3RyZWFtKHRoaXMuc25pZmZlci5lbmNvZGluZyk7XG4gICAgICAgIHN0cmVhbS5vbihcImRhdGFcIiwgKGNodW5rKSA9PiB0aGlzLnB1c2goY2h1bmssIFwidXRmLThcIikpO1xuICAgICAgICBzdHJlYW0ub24oXCJlbmRcIiwgKCkgPT4gdGhpcy5wdXNoKG51bGwpKTtcbiAgICAgICAgdGhpcy5pY29udiA9IHN0cmVhbTtcbiAgICAgICAgZm9yIChjb25zdCBidWZmZXIgb2YgdGhpcy5idWZmZXJzKSB7XG4gICAgICAgICAgICBzdHJlYW0ud3JpdGUoYnVmZmVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJ1ZmZlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgcmV0dXJuIHN0cmVhbTtcbiAgICB9XG4gICAgX2ZsdXNoKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuZ2V0SWNvbnZTdHJlYW0oKS5lbmQoY2FsbGJhY2spO1xuICAgIH1cbn1cbmV4cG9ydHMuRGVjb2RlU3RyZWFtID0gRGVjb2RlU3RyZWFtO1xudmFyIHNuaWZmZXJfanNfMiA9IHJlcXVpcmUoXCIuL3NuaWZmZXIuanNcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJnZXRFbmNvZGluZ1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc25pZmZlcl9qc18yLmdldEVuY29kaW5nOyB9IH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/encoding-sniffer/dist/commonjs/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/encoding-sniffer/dist/commonjs/sniffer.js":
/*!****************************************************************!*\
  !*** ./node_modules/encoding-sniffer/dist/commonjs/sniffer.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Sniffer = exports.STRINGS = exports.ResultType = void 0;\nexports.getEncoding = getEncoding;\nconst whatwg_encoding_1 = __webpack_require__(/*! whatwg-encoding */ \"(rsc)/./node_modules/whatwg-encoding/lib/whatwg-encoding.js\");\n// https://html.spec.whatwg.org/multipage/syntax.html#prescan-a-byte-stream-to-determine-its-encoding\nvar State;\n(function (State) {\n    // Before anything starts; can be any of BOM, UTF-16 XML declarations or meta tags\n    State[State[\"Begin\"] = 0] = \"Begin\";\n    // Inside of a BOM\n    State[State[\"BOM16BE\"] = 1] = \"BOM16BE\";\n    State[State[\"BOM16LE\"] = 2] = \"BOM16LE\";\n    State[State[\"BOM8\"] = 3] = \"BOM8\";\n    // XML prefix\n    State[State[\"UTF16LE_XML_PREFIX\"] = 4] = \"UTF16LE_XML_PREFIX\";\n    State[State[\"BeginLT\"] = 5] = \"BeginLT\";\n    State[State[\"UTF16BE_XML_PREFIX\"] = 6] = \"UTF16BE_XML_PREFIX\";\n    // Waiting for opening `<`\n    State[State[\"BeforeTag\"] = 7] = \"BeforeTag\";\n    // After the opening `<`\n    State[State[\"BeforeTagName\"] = 8] = \"BeforeTagName\";\n    // After `</`\n    State[State[\"BeforeCloseTagName\"] = 9] = \"BeforeCloseTagName\";\n    // Beginning of a comment\n    State[State[\"CommentStart\"] = 10] = \"CommentStart\";\n    // End of a comment\n    State[State[\"CommentEnd\"] = 11] = \"CommentEnd\";\n    // A tag name that could be `meta`\n    State[State[\"TagNameMeta\"] = 12] = \"TagNameMeta\";\n    // A tag name that is not `meta`\n    State[State[\"TagNameOther\"] = 13] = \"TagNameOther\";\n    // XML declaration\n    State[State[\"XMLDeclaration\"] = 14] = \"XMLDeclaration\";\n    State[State[\"XMLDeclarationBeforeEncoding\"] = 15] = \"XMLDeclarationBeforeEncoding\";\n    State[State[\"XMLDeclarationAfterEncoding\"] = 16] = \"XMLDeclarationAfterEncoding\";\n    State[State[\"XMLDeclarationBeforeValue\"] = 17] = \"XMLDeclarationBeforeValue\";\n    State[State[\"XMLDeclarationValue\"] = 18] = \"XMLDeclarationValue\";\n    // Anything that looks like a tag, but doesn't fit in the above categories\n    State[State[\"WeirdTag\"] = 19] = \"WeirdTag\";\n    State[State[\"BeforeAttribute\"] = 20] = \"BeforeAttribute\";\n    /*\n     * Attributes in meta tag — we compare them to our set here, and back out\n     * We care about four attributes: http-equiv, content-type, content, charset\n     */\n    State[State[\"MetaAttribHttpEquiv\"] = 21] = \"MetaAttribHttpEquiv\";\n    // The value has to be `content-type`\n    State[State[\"MetaAttribHttpEquivValue\"] = 22] = \"MetaAttribHttpEquivValue\";\n    State[State[\"MetaAttribC\"] = 23] = \"MetaAttribC\";\n    State[State[\"MetaAttribContent\"] = 24] = \"MetaAttribContent\";\n    State[State[\"MetaAttribCharset\"] = 25] = \"MetaAttribCharset\";\n    // Waiting for whitespace\n    State[State[\"MetaAttribAfterName\"] = 26] = \"MetaAttribAfterName\";\n    State[State[\"MetaContentValueQuotedBeforeEncoding\"] = 27] = \"MetaContentValueQuotedBeforeEncoding\";\n    State[State[\"MetaContentValueQuotedAfterEncoding\"] = 28] = \"MetaContentValueQuotedAfterEncoding\";\n    State[State[\"MetaContentValueQuotedBeforeValue\"] = 29] = \"MetaContentValueQuotedBeforeValue\";\n    State[State[\"MetaContentValueQuotedValueQuoted\"] = 30] = \"MetaContentValueQuotedValueQuoted\";\n    State[State[\"MetaContentValueQuotedValueUnquoted\"] = 31] = \"MetaContentValueQuotedValueUnquoted\";\n    State[State[\"MetaContentValueUnquotedBeforeEncoding\"] = 32] = \"MetaContentValueUnquotedBeforeEncoding\";\n    State[State[\"MetaContentValueUnquotedBeforeValue\"] = 33] = \"MetaContentValueUnquotedBeforeValue\";\n    State[State[\"MetaContentValueUnquotedValueQuoted\"] = 34] = \"MetaContentValueUnquotedValueQuoted\";\n    State[State[\"MetaContentValueUnquotedValueUnquoted\"] = 35] = \"MetaContentValueUnquotedValueUnquoted\";\n    State[State[\"AnyAttribName\"] = 36] = \"AnyAttribName\";\n    // After the name of an attribute, before the equals sign\n    State[State[\"AfterAttributeName\"] = 37] = \"AfterAttributeName\";\n    // After `=`\n    State[State[\"BeforeAttributeValue\"] = 38] = \"BeforeAttributeValue\";\n    State[State[\"AttributeValueQuoted\"] = 39] = \"AttributeValueQuoted\";\n    State[State[\"AttributeValueUnquoted\"] = 40] = \"AttributeValueUnquoted\";\n})(State || (State = {}));\nvar ResultType;\n(function (ResultType) {\n    // Byte order mark\n    ResultType[ResultType[\"BOM\"] = 0] = \"BOM\";\n    // User- or transport layer-defined\n    ResultType[ResultType[\"PASSED\"] = 1] = \"PASSED\";\n    // XML prefixes\n    ResultType[ResultType[\"XML_PREFIX\"] = 2] = \"XML_PREFIX\";\n    // Meta tag\n    ResultType[ResultType[\"META_TAG\"] = 3] = \"META_TAG\";\n    // XML encoding\n    ResultType[ResultType[\"XML_ENCODING\"] = 4] = \"XML_ENCODING\";\n    // Default\n    ResultType[ResultType[\"DEFAULT\"] = 5] = \"DEFAULT\";\n})(ResultType || (exports.ResultType = ResultType = {}));\nvar AttribType;\n(function (AttribType) {\n    AttribType[AttribType[\"None\"] = 0] = \"None\";\n    AttribType[AttribType[\"HttpEquiv\"] = 1] = \"HttpEquiv\";\n    AttribType[AttribType[\"Content\"] = 2] = \"Content\";\n    AttribType[AttribType[\"Charset\"] = 3] = \"Charset\";\n})(AttribType || (AttribType = {}));\nvar Chars;\n(function (Chars) {\n    Chars[Chars[\"NIL\"] = 0] = \"NIL\";\n    Chars[Chars[\"TAB\"] = 9] = \"TAB\";\n    Chars[Chars[\"LF\"] = 10] = \"LF\";\n    Chars[Chars[\"CR\"] = 13] = \"CR\";\n    Chars[Chars[\"SPACE\"] = 32] = \"SPACE\";\n    Chars[Chars[\"EXCLAMATION\"] = 33] = \"EXCLAMATION\";\n    Chars[Chars[\"DQUOTE\"] = 34] = \"DQUOTE\";\n    Chars[Chars[\"SQUOTE\"] = 39] = \"SQUOTE\";\n    Chars[Chars[\"DASH\"] = 45] = \"DASH\";\n    Chars[Chars[\"SLASH\"] = 47] = \"SLASH\";\n    Chars[Chars[\"SEMICOLON\"] = 59] = \"SEMICOLON\";\n    Chars[Chars[\"LT\"] = 60] = \"LT\";\n    Chars[Chars[\"EQUALS\"] = 61] = \"EQUALS\";\n    Chars[Chars[\"GT\"] = 62] = \"GT\";\n    Chars[Chars[\"QUESTION\"] = 63] = \"QUESTION\";\n    Chars[Chars[\"UpperA\"] = 65] = \"UpperA\";\n    Chars[Chars[\"UpperZ\"] = 90] = \"UpperZ\";\n    Chars[Chars[\"LowerA\"] = 97] = \"LowerA\";\n    Chars[Chars[\"LowerZ\"] = 122] = \"LowerZ\";\n})(Chars || (Chars = {}));\nconst SPACE_CHARACTERS = new Set([Chars.SPACE, Chars.LF, Chars.CR, Chars.TAB]);\nconst END_OF_UNQUOTED_ATTRIBUTE_VALUE = new Set([\n    Chars.SPACE,\n    Chars.LF,\n    Chars.CR,\n    Chars.TAB,\n    Chars.GT,\n]);\nfunction toUint8Array(str) {\n    const arr = new Uint8Array(str.length);\n    for (let i = 0; i < str.length; i++) {\n        arr[i] = str.charCodeAt(i);\n    }\n    return arr;\n}\nexports.STRINGS = {\n    UTF8_BOM: new Uint8Array([0xef, 0xbb, 0xbf]),\n    UTF16LE_BOM: new Uint8Array([0xff, 0xfe]),\n    UTF16BE_BOM: new Uint8Array([0xfe, 0xff]),\n    UTF16LE_XML_PREFIX: new Uint8Array([0x3c, 0x0, 0x3f, 0x0, 0x78, 0x0]),\n    UTF16BE_XML_PREFIX: new Uint8Array([0x0, 0x3c, 0x0, 0x3f, 0x0, 0x78]),\n    XML_DECLARATION: toUint8Array(\"<?xml\"),\n    ENCODING: toUint8Array(\"encoding\"),\n    META: toUint8Array(\"meta\"),\n    HTTP_EQUIV: toUint8Array(\"http-equiv\"),\n    CONTENT: toUint8Array(\"content\"),\n    CONTENT_TYPE: toUint8Array(\"content-type\"),\n    CHARSET: toUint8Array(\"charset\"),\n    COMMENT_START: toUint8Array(\"<!--\"),\n    COMMENT_END: toUint8Array(\"-->\"),\n};\nfunction isAsciiAlpha(c) {\n    return ((c >= Chars.UpperA && c <= Chars.UpperZ) ||\n        (c >= Chars.LowerA && c <= Chars.LowerZ));\n}\nfunction isQuote(c) {\n    return c === Chars.DQUOTE || c === Chars.SQUOTE;\n}\nclass Sniffer {\n    setResult(label, type) {\n        if (this.resultType === ResultType.DEFAULT || this.resultType > type) {\n            const encoding = (0, whatwg_encoding_1.labelToName)(label);\n            if (encoding) {\n                this.encoding =\n                    // Check if we are in a meta tag and the encoding is `x-user-defined`\n                    type === ResultType.META_TAG &&\n                        encoding === \"x-user-defined\"\n                        ? \"windows-1252\"\n                        : // Check if we are in a meta tag or xml declaration, and the encoding is UTF-16\n                            (type === ResultType.META_TAG ||\n                                type === ResultType.XML_ENCODING) &&\n                                (encoding === \"UTF-16LE\" || encoding === \"UTF-16BE\")\n                                ? \"UTF-8\"\n                                : encoding;\n                this.resultType = type;\n            }\n        }\n    }\n    constructor({ maxBytes = 1024, userEncoding, transportLayerEncodingLabel, defaultEncoding, } = {}) {\n        /** The offset of the previous buffers. */\n        this.offset = 0;\n        this.state = State.Begin;\n        this.sectionIndex = 0;\n        this.attribType = AttribType.None;\n        /**\n         * Indicates if the `http-equiv` is `content-type`.\n         *\n         * Initially `null`, a boolean when a value is found.\n         */\n        this.gotPragma = null;\n        this.needsPragma = null;\n        this.inMetaTag = false;\n        this.encoding = \"windows-1252\";\n        this.resultType = ResultType.DEFAULT;\n        this.quoteCharacter = 0;\n        this.attributeValue = [];\n        this.maxBytes = maxBytes;\n        if (userEncoding) {\n            this.setResult(userEncoding, ResultType.PASSED);\n        }\n        if (transportLayerEncodingLabel) {\n            this.setResult(transportLayerEncodingLabel, ResultType.PASSED);\n        }\n        if (defaultEncoding) {\n            this.setResult(defaultEncoding, ResultType.DEFAULT);\n        }\n    }\n    stateBegin(c) {\n        switch (c) {\n            case exports.STRINGS.UTF16BE_BOM[0]: {\n                this.state = State.BOM16BE;\n                break;\n            }\n            case exports.STRINGS.UTF16LE_BOM[0]: {\n                this.state = State.BOM16LE;\n                break;\n            }\n            case exports.STRINGS.UTF8_BOM[0]: {\n                this.sectionIndex = 1;\n                this.state = State.BOM8;\n                break;\n            }\n            case Chars.NIL: {\n                this.state = State.UTF16BE_XML_PREFIX;\n                this.sectionIndex = 1;\n                break;\n            }\n            case Chars.LT: {\n                this.state = State.BeginLT;\n                break;\n            }\n            default: {\n                this.state = State.BeforeTag;\n            }\n        }\n    }\n    stateBeginLT(c) {\n        if (c === Chars.NIL) {\n            this.state = State.UTF16LE_XML_PREFIX;\n            this.sectionIndex = 2;\n        }\n        else if (c === Chars.QUESTION) {\n            this.state = State.XMLDeclaration;\n            this.sectionIndex = 2;\n        }\n        else {\n            this.state = State.BeforeTagName;\n            this.stateBeforeTagName(c);\n        }\n    }\n    stateUTF16BE_XML_PREFIX(c) {\n        // Advance position in the section\n        if (this.advanceSection(exports.STRINGS.UTF16BE_XML_PREFIX, c)) {\n            if (this.sectionIndex === exports.STRINGS.UTF16BE_XML_PREFIX.length) {\n                // We have the whole prefix\n                this.setResult(\"utf-16be\", ResultType.XML_PREFIX);\n            }\n        }\n        else {\n            this.state = State.BeforeTag;\n            this.stateBeforeTag(c);\n        }\n    }\n    stateUTF16LE_XML_PREFIX(c) {\n        // Advance position in the section\n        if (this.advanceSection(exports.STRINGS.UTF16LE_XML_PREFIX, c)) {\n            if (this.sectionIndex === exports.STRINGS.UTF16LE_XML_PREFIX.length) {\n                // We have the whole prefix\n                this.setResult(\"utf-16le\", ResultType.XML_PREFIX);\n            }\n        }\n        else {\n            this.state = State.BeforeTag;\n            this.stateBeforeTag(c);\n        }\n    }\n    stateBOM16LE(c) {\n        if (c === exports.STRINGS.UTF16LE_BOM[1]) {\n            this.setResult(\"utf-16le\", ResultType.BOM);\n        }\n        else {\n            this.state = State.BeforeTag;\n            this.stateBeforeTag(c);\n        }\n    }\n    stateBOM16BE(c) {\n        if (c === exports.STRINGS.UTF16BE_BOM[1]) {\n            this.setResult(\"utf-16be\", ResultType.BOM);\n        }\n        else {\n            this.state = State.BeforeTag;\n            this.stateBeforeTag(c);\n        }\n    }\n    stateBOM8(c) {\n        if (this.advanceSection(exports.STRINGS.UTF8_BOM, c) &&\n            this.sectionIndex === exports.STRINGS.UTF8_BOM.length) {\n            this.setResult(\"utf-8\", ResultType.BOM);\n        }\n    }\n    stateBeforeTag(c) {\n        if (c === Chars.LT) {\n            this.state = State.BeforeTagName;\n            this.inMetaTag = false;\n        }\n    }\n    /**\n     * We have seen a `<`, and now have to figure out what to do.\n     *\n     * Options:\n     *  - `<meta`\n     *  - Any other tag\n     *  - A closing tag\n     *  - `<!--`\n     *  - An XML declaration\n     *\n     */\n    stateBeforeTagName(c) {\n        if (isAsciiAlpha(c)) {\n            if ((c | 0x20) === exports.STRINGS.META[0]) {\n                this.sectionIndex = 1;\n                this.state = State.TagNameMeta;\n            }\n            else {\n                this.state = State.TagNameOther;\n            }\n        }\n        else\n            switch (c) {\n                case Chars.SLASH: {\n                    this.state = State.BeforeCloseTagName;\n                    break;\n                }\n                case Chars.EXCLAMATION: {\n                    this.state = State.CommentStart;\n                    this.sectionIndex = 2;\n                    break;\n                }\n                case Chars.QUESTION: {\n                    this.state = State.WeirdTag;\n                    break;\n                }\n                default: {\n                    this.state = State.BeforeTag;\n                    this.stateBeforeTag(c);\n                }\n            }\n    }\n    stateBeforeCloseTagName(c) {\n        this.state = isAsciiAlpha(c)\n            ? // Switch to `TagNameOther`; the HTML spec allows attributes here as well.\n                State.TagNameOther\n            : State.WeirdTag;\n    }\n    stateCommentStart(c) {\n        if (this.advanceSection(exports.STRINGS.COMMENT_START, c)) {\n            if (this.sectionIndex === exports.STRINGS.COMMENT_START.length) {\n                this.state = State.CommentEnd;\n                // The -- of the comment start can be part of the end.\n                this.sectionIndex = 2;\n            }\n        }\n        else {\n            this.state = State.WeirdTag;\n            this.stateWeirdTag(c);\n        }\n    }\n    stateCommentEnd(c) {\n        if (this.advanceSection(exports.STRINGS.COMMENT_END, c)) {\n            if (this.sectionIndex === exports.STRINGS.COMMENT_END.length) {\n                this.state = State.BeforeTag;\n            }\n        }\n        else if (c === Chars.DASH) {\n            /*\n             * If we are here, we know we expected a `>` above.\n             * Set this to 2, to support many dashes before the closing `>`.\n             */\n            this.sectionIndex = 2;\n        }\n    }\n    /**\n     * Any section starting with `<!`, `<?`, `</`, without being a closing tag or comment.\n     */\n    stateWeirdTag(c) {\n        if (c === Chars.GT) {\n            this.state = State.BeforeTag;\n        }\n    }\n    /**\n     * Advances the section, ignoring upper/lower case.\n     *\n     * Make sure the section has left-over characters before calling.\n     *\n     * @returns `false` if we did not match the section.\n     */\n    advanceSectionIC(section, c) {\n        return this.advanceSection(section, c | 0x20);\n    }\n    /**\n     * Advances the section.\n     *\n     * Make sure the section has left-over characters before calling.\n     *\n     * @returns `false` if we did not match the section.\n     */\n    advanceSection(section, c) {\n        if (section[this.sectionIndex] === c) {\n            this.sectionIndex++;\n            return true;\n        }\n        this.sectionIndex = 0;\n        return false;\n    }\n    stateTagNameMeta(c) {\n        if (this.sectionIndex < exports.STRINGS.META.length) {\n            if (this.advanceSectionIC(exports.STRINGS.META, c)) {\n                return;\n            }\n        }\n        else if (SPACE_CHARACTERS.has(c)) {\n            this.inMetaTag = true;\n            this.gotPragma = null;\n            this.needsPragma = null;\n            this.state = State.BeforeAttribute;\n            return;\n        }\n        this.state = State.TagNameOther;\n        // Reconsume in case there is a `>`.\n        this.stateTagNameOther(c);\n    }\n    stateTagNameOther(c) {\n        if (SPACE_CHARACTERS.has(c)) {\n            this.state = State.BeforeAttribute;\n        }\n        else if (c === Chars.GT) {\n            this.state = State.BeforeTag;\n        }\n    }\n    stateBeforeAttribute(c) {\n        if (SPACE_CHARACTERS.has(c))\n            return;\n        if (this.inMetaTag) {\n            const lower = c | 0x20;\n            if (lower === exports.STRINGS.HTTP_EQUIV[0]) {\n                this.sectionIndex = 1;\n                this.state = State.MetaAttribHttpEquiv;\n                return;\n            }\n            else if (lower === exports.STRINGS.CHARSET[0]) {\n                this.sectionIndex = 1;\n                this.state = State.MetaAttribC;\n                return;\n            }\n        }\n        this.state =\n            c === Chars.SLASH || c === Chars.GT\n                ? State.BeforeTag\n                : State.AnyAttribName;\n    }\n    handleMetaAttrib(c, section, type) {\n        if (this.advanceSectionIC(section, c)) {\n            if (this.sectionIndex === section.length) {\n                this.attribType = type;\n                this.state = State.MetaAttribAfterName;\n            }\n        }\n        else {\n            this.state = State.AnyAttribName;\n            this.stateAnyAttribName(c);\n        }\n    }\n    stateMetaAttribHttpEquiv(c) {\n        this.handleMetaAttrib(c, exports.STRINGS.HTTP_EQUIV, AttribType.HttpEquiv);\n    }\n    stateMetaAttribC(c) {\n        const lower = c | 0x20;\n        if (lower === exports.STRINGS.CHARSET[1]) {\n            this.sectionIndex = 2;\n            this.state = State.MetaAttribCharset;\n        }\n        else if (lower === exports.STRINGS.CONTENT[1]) {\n            this.sectionIndex = 2;\n            this.state = State.MetaAttribContent;\n        }\n        else {\n            this.state = State.AnyAttribName;\n            this.stateAnyAttribName(c);\n        }\n    }\n    stateMetaAttribCharset(c) {\n        this.handleMetaAttrib(c, exports.STRINGS.CHARSET, AttribType.Charset);\n    }\n    stateMetaAttribContent(c) {\n        this.handleMetaAttrib(c, exports.STRINGS.CONTENT, AttribType.Content);\n    }\n    stateMetaAttribAfterName(c) {\n        if (SPACE_CHARACTERS.has(c) || c === Chars.EQUALS) {\n            this.state = State.AfterAttributeName;\n            this.stateAfterAttributeName(c);\n        }\n        else {\n            this.state = State.AnyAttribName;\n            this.stateAnyAttribName(c);\n        }\n    }\n    stateAnyAttribName(c) {\n        if (SPACE_CHARACTERS.has(c)) {\n            this.attribType = AttribType.None;\n            this.state = State.AfterAttributeName;\n        }\n        else if (c === Chars.SLASH || c === Chars.GT) {\n            this.state = State.BeforeTag;\n        }\n        else if (c === Chars.EQUALS) {\n            this.state = State.BeforeAttributeValue;\n        }\n    }\n    stateAfterAttributeName(c) {\n        if (SPACE_CHARACTERS.has(c))\n            return;\n        if (c === Chars.EQUALS) {\n            this.state = State.BeforeAttributeValue;\n        }\n        else {\n            this.state = State.BeforeAttribute;\n            this.stateBeforeAttribute(c);\n        }\n    }\n    stateBeforeAttributeValue(c) {\n        if (SPACE_CHARACTERS.has(c))\n            return;\n        this.attributeValue.length = 0;\n        this.sectionIndex = 0;\n        if (isQuote(c)) {\n            this.quoteCharacter = c;\n            this.state =\n                this.attribType === AttribType.Content\n                    ? State.MetaContentValueQuotedBeforeEncoding\n                    : this.attribType === AttribType.HttpEquiv\n                        ? State.MetaAttribHttpEquivValue\n                        : State.AttributeValueQuoted;\n        }\n        else if (this.attribType === AttribType.Content) {\n            this.state = State.MetaContentValueUnquotedBeforeEncoding;\n            this.stateMetaContentValueUnquotedBeforeEncoding(c);\n        }\n        else if (this.attribType === AttribType.HttpEquiv) {\n            // We use `quoteCharacter = 0` to signify that the value is unquoted.\n            this.quoteCharacter = 0;\n            this.sectionIndex = 0;\n            this.state = State.MetaAttribHttpEquivValue;\n            this.stateMetaAttribHttpEquivValue(c);\n        }\n        else {\n            this.state = State.AttributeValueUnquoted;\n            this.stateAttributeValueUnquoted(c);\n        }\n    }\n    // The value has to be `content-type`\n    stateMetaAttribHttpEquivValue(c) {\n        if (this.sectionIndex === exports.STRINGS.CONTENT_TYPE.length) {\n            if (this.quoteCharacter === 0\n                ? END_OF_UNQUOTED_ATTRIBUTE_VALUE.has(c)\n                : c === this.quoteCharacter) {\n                if (this.needsPragma !== null) {\n                    this.setResult(this.needsPragma, ResultType.META_TAG);\n                }\n                else if (this.gotPragma === null) {\n                    this.gotPragma = true;\n                }\n                this.state = State.BeforeAttribute;\n                return;\n            }\n        }\n        else if (this.advanceSectionIC(exports.STRINGS.CONTENT_TYPE, c)) {\n            return;\n        }\n        this.gotPragma = false;\n        if (this.quoteCharacter === 0) {\n            this.state = State.AttributeValueUnquoted;\n            this.stateAttributeValueUnquoted(c);\n        }\n        else {\n            this.state = State.AttributeValueQuoted;\n            this.stateAttributeValueQuoted(c);\n        }\n    }\n    handleMetaContentValue() {\n        if (this.attributeValue.length === 0)\n            return;\n        const encoding = String.fromCharCode(...this.attributeValue);\n        if (this.gotPragma) {\n            this.setResult(encoding, ResultType.META_TAG);\n        }\n        else if (this.needsPragma === null) {\n            // Don't override a previous result.\n            this.needsPragma = encoding;\n        }\n        this.attributeValue.length = 0;\n    }\n    handleAttributeValue() {\n        if (this.attribType === AttribType.Charset) {\n            this.setResult(String.fromCharCode(...this.attributeValue), ResultType.META_TAG);\n        }\n    }\n    stateAttributeValueUnquoted(c) {\n        if (SPACE_CHARACTERS.has(c)) {\n            this.handleAttributeValue();\n            this.state = State.BeforeAttribute;\n        }\n        else if (c === Chars.SLASH || c === Chars.GT) {\n            this.handleAttributeValue();\n            this.state = State.BeforeTag;\n        }\n        else if (this.attribType === AttribType.Charset) {\n            this.attributeValue.push(c | (c >= 0x41 && c <= 0x5a ? 0x20 : 0));\n        }\n    }\n    findMetaContentEncoding(c) {\n        if (this.advanceSectionIC(exports.STRINGS.CHARSET, c)) {\n            if (this.sectionIndex === exports.STRINGS.CHARSET.length) {\n                return true;\n            }\n        }\n        else {\n            // If we encountered another `c`, assume we started over.\n            this.sectionIndex = Number(c === exports.STRINGS.CHARSET[0]);\n        }\n        return false;\n    }\n    stateMetaContentValueUnquotedBeforeEncoding(c) {\n        if (END_OF_UNQUOTED_ATTRIBUTE_VALUE.has(c)) {\n            this.stateAttributeValueUnquoted(c);\n        }\n        else if (this.sectionIndex === exports.STRINGS.CHARSET.length) {\n            if (c === Chars.EQUALS) {\n                this.state = State.MetaContentValueUnquotedBeforeValue;\n            }\n        }\n        else {\n            this.findMetaContentEncoding(c);\n        }\n    }\n    stateMetaContentValueUnquotedBeforeValue(c) {\n        if (isQuote(c)) {\n            this.quoteCharacter = c;\n            this.state = State.MetaContentValueUnquotedValueQuoted;\n        }\n        else if (END_OF_UNQUOTED_ATTRIBUTE_VALUE.has(c)) {\n            // Can't have spaces here, as it would no longer be part of the attribute value.\n            this.stateAttributeValueUnquoted(c);\n        }\n        else {\n            this.state = State.MetaContentValueUnquotedValueUnquoted;\n            this.stateMetaContentValueUnquotedValueUnquoted(c);\n        }\n    }\n    stateMetaContentValueUnquotedValueQuoted(c) {\n        if (END_OF_UNQUOTED_ATTRIBUTE_VALUE.has(c)) {\n            // Quotes weren't matched, so we're done.\n            this.stateAttributeValueUnquoted(c);\n        }\n        else if (c === this.quoteCharacter) {\n            this.handleMetaContentValue();\n            this.state = State.AttributeValueUnquoted;\n        }\n        else {\n            this.attributeValue.push(c | (c >= 0x41 && c <= 0x5a ? 0x20 : 0));\n        }\n    }\n    stateMetaContentValueUnquotedValueUnquoted(c) {\n        if (END_OF_UNQUOTED_ATTRIBUTE_VALUE.has(c) || c === Chars.SEMICOLON) {\n            this.handleMetaContentValue();\n            this.state = State.AttributeValueUnquoted;\n            this.stateAttributeValueUnquoted(c);\n        }\n        else {\n            this.attributeValue.push(c | (c >= 0x41 && c <= 0x5a ? 0x20 : 0));\n        }\n    }\n    stateMetaContentValueQuotedValueUnquoted(c) {\n        if (isQuote(c) || SPACE_CHARACTERS.has(c) || c === Chars.SEMICOLON) {\n            this.handleMetaContentValue();\n            // We are done with the value, but might not be at the end of the attribute\n            this.state = State.AttributeValueQuoted;\n            this.stateAttributeValueQuoted(c);\n        }\n        else {\n            this.attributeValue.push(c | (c >= 0x41 && c <= 0x5a ? 0x20 : 0));\n        }\n    }\n    stateMetaContentValueQuotedValueQuoted(c) {\n        if (isQuote(c)) {\n            // We have reached the end of our value.\n            if (c !== this.quoteCharacter) {\n                // Only handle the value if inner quotes were matched.\n                this.handleMetaContentValue();\n            }\n            this.state = State.AttributeValueQuoted;\n            this.stateAttributeValueQuoted(c);\n        }\n        else {\n            this.attributeValue.push(c | (c >= 0x41 && c <= 0x5a ? 0x20 : 0));\n        }\n    }\n    stateMetaContentValueQuotedBeforeEncoding(c) {\n        if (c === this.quoteCharacter) {\n            this.stateAttributeValueQuoted(c);\n        }\n        else if (this.findMetaContentEncoding(c)) {\n            this.state = State.MetaContentValueQuotedAfterEncoding;\n        }\n    }\n    stateMetaContentValueQuotedAfterEncoding(c) {\n        if (c === Chars.EQUALS) {\n            this.state = State.MetaContentValueQuotedBeforeValue;\n        }\n        else if (!SPACE_CHARACTERS.has(c)) {\n            // Look for the next encoding\n            this.state = State.MetaContentValueQuotedBeforeEncoding;\n            this.stateMetaContentValueQuotedBeforeEncoding(c);\n        }\n    }\n    stateMetaContentValueQuotedBeforeValue(c) {\n        if (c === this.quoteCharacter) {\n            this.stateAttributeValueQuoted(c);\n        }\n        else if (isQuote(c)) {\n            this.state = State.MetaContentValueQuotedValueQuoted;\n        }\n        else if (!SPACE_CHARACTERS.has(c)) {\n            this.state = State.MetaContentValueQuotedValueUnquoted;\n            this.stateMetaContentValueQuotedValueUnquoted(c);\n        }\n    }\n    stateAttributeValueQuoted(c) {\n        if (c === this.quoteCharacter) {\n            this.handleAttributeValue();\n            this.state = State.BeforeAttribute;\n        }\n        else if (this.attribType === AttribType.Charset) {\n            this.attributeValue.push(c | (c >= 0x41 && c <= 0x5a ? 0x20 : 0));\n        }\n    }\n    // Read STRINGS.XML_DECLARATION\n    stateXMLDeclaration(c) {\n        if (this.advanceSection(exports.STRINGS.XML_DECLARATION, c)) {\n            if (this.sectionIndex === exports.STRINGS.XML_DECLARATION.length) {\n                this.sectionIndex = 0;\n                this.state = State.XMLDeclarationBeforeEncoding;\n            }\n        }\n        else {\n            this.state = State.WeirdTag;\n        }\n    }\n    stateXMLDeclarationBeforeEncoding(c) {\n        if (this.advanceSection(exports.STRINGS.ENCODING, c)) {\n            if (this.sectionIndex === exports.STRINGS.ENCODING.length) {\n                this.state = State.XMLDeclarationAfterEncoding;\n            }\n        }\n        else if (c === Chars.GT) {\n            this.state = State.BeforeTag;\n        }\n        else {\n            // If we encountered another `c`, assume we started over.\n            this.sectionIndex = Number(c === exports.STRINGS.ENCODING[0]);\n        }\n    }\n    stateXMLDeclarationAfterEncoding(c) {\n        if (c === Chars.EQUALS) {\n            this.state = State.XMLDeclarationBeforeValue;\n        }\n        else if (c > Chars.SPACE) {\n            this.state = State.WeirdTag;\n            this.stateWeirdTag(c);\n        }\n    }\n    stateXMLDeclarationBeforeValue(c) {\n        if (isQuote(c)) {\n            this.attributeValue.length = 0;\n            this.state = State.XMLDeclarationValue;\n        }\n        else if (c > Chars.SPACE) {\n            this.state = State.WeirdTag;\n            this.stateWeirdTag(c);\n        }\n    }\n    stateXMLDeclarationValue(c) {\n        if (isQuote(c)) {\n            this.setResult(String.fromCharCode(...this.attributeValue), ResultType.XML_ENCODING);\n            this.state = State.WeirdTag;\n        }\n        else if (c === Chars.GT) {\n            this.state = State.BeforeTag;\n        }\n        else if (c <= Chars.SPACE) {\n            this.state = State.WeirdTag;\n        }\n        else {\n            this.attributeValue.push(c | (c >= 0x41 && c <= 0x5a ? 0x20 : 0));\n        }\n    }\n    write(buffer) {\n        let index = 0;\n        for (; index < buffer.length && this.offset + index < this.maxBytes; index++) {\n            const c = buffer[index];\n            switch (this.state) {\n                case State.Begin: {\n                    this.stateBegin(c);\n                    break;\n                }\n                case State.BOM16BE: {\n                    this.stateBOM16BE(c);\n                    break;\n                }\n                case State.BOM16LE: {\n                    this.stateBOM16LE(c);\n                    break;\n                }\n                case State.BOM8: {\n                    this.stateBOM8(c);\n                    break;\n                }\n                case State.UTF16LE_XML_PREFIX: {\n                    this.stateUTF16LE_XML_PREFIX(c);\n                    break;\n                }\n                case State.BeginLT: {\n                    this.stateBeginLT(c);\n                    break;\n                }\n                case State.UTF16BE_XML_PREFIX: {\n                    this.stateUTF16BE_XML_PREFIX(c);\n                    break;\n                }\n                case State.BeforeTag: {\n                    // Optimization: Skip all characters until we find a `<`\n                    const idx = buffer.indexOf(Chars.LT, index);\n                    if (idx === -1) {\n                        // We are done with this buffer. Stay in the state and try on the next one.\n                        index = buffer.length;\n                    }\n                    else {\n                        index = idx;\n                        this.stateBeforeTag(Chars.LT);\n                    }\n                    break;\n                }\n                case State.BeforeTagName: {\n                    this.stateBeforeTagName(c);\n                    break;\n                }\n                case State.BeforeCloseTagName: {\n                    this.stateBeforeCloseTagName(c);\n                    break;\n                }\n                case State.CommentStart: {\n                    this.stateCommentStart(c);\n                    break;\n                }\n                case State.CommentEnd: {\n                    this.stateCommentEnd(c);\n                    break;\n                }\n                case State.TagNameMeta: {\n                    this.stateTagNameMeta(c);\n                    break;\n                }\n                case State.TagNameOther: {\n                    this.stateTagNameOther(c);\n                    break;\n                }\n                case State.XMLDeclaration: {\n                    this.stateXMLDeclaration(c);\n                    break;\n                }\n                case State.XMLDeclarationBeforeEncoding: {\n                    this.stateXMLDeclarationBeforeEncoding(c);\n                    break;\n                }\n                case State.XMLDeclarationAfterEncoding: {\n                    this.stateXMLDeclarationAfterEncoding(c);\n                    break;\n                }\n                case State.XMLDeclarationBeforeValue: {\n                    this.stateXMLDeclarationBeforeValue(c);\n                    break;\n                }\n                case State.XMLDeclarationValue: {\n                    this.stateXMLDeclarationValue(c);\n                    break;\n                }\n                case State.WeirdTag: {\n                    this.stateWeirdTag(c);\n                    break;\n                }\n                case State.BeforeAttribute: {\n                    this.stateBeforeAttribute(c);\n                    break;\n                }\n                case State.MetaAttribHttpEquiv: {\n                    this.stateMetaAttribHttpEquiv(c);\n                    break;\n                }\n                case State.MetaAttribHttpEquivValue: {\n                    this.stateMetaAttribHttpEquivValue(c);\n                    break;\n                }\n                case State.MetaAttribC: {\n                    this.stateMetaAttribC(c);\n                    break;\n                }\n                case State.MetaAttribContent: {\n                    this.stateMetaAttribContent(c);\n                    break;\n                }\n                case State.MetaAttribCharset: {\n                    this.stateMetaAttribCharset(c);\n                    break;\n                }\n                case State.MetaAttribAfterName: {\n                    this.stateMetaAttribAfterName(c);\n                    break;\n                }\n                case State.MetaContentValueQuotedBeforeEncoding: {\n                    this.stateMetaContentValueQuotedBeforeEncoding(c);\n                    break;\n                }\n                case State.MetaContentValueQuotedAfterEncoding: {\n                    this.stateMetaContentValueQuotedAfterEncoding(c);\n                    break;\n                }\n                case State.MetaContentValueQuotedBeforeValue: {\n                    this.stateMetaContentValueQuotedBeforeValue(c);\n                    break;\n                }\n                case State.MetaContentValueQuotedValueQuoted: {\n                    this.stateMetaContentValueQuotedValueQuoted(c);\n                    break;\n                }\n                case State.MetaContentValueQuotedValueUnquoted: {\n                    this.stateMetaContentValueQuotedValueUnquoted(c);\n                    break;\n                }\n                case State.MetaContentValueUnquotedBeforeEncoding: {\n                    this.stateMetaContentValueUnquotedBeforeEncoding(c);\n                    break;\n                }\n                case State.MetaContentValueUnquotedBeforeValue: {\n                    this.stateMetaContentValueUnquotedBeforeValue(c);\n                    break;\n                }\n                case State.MetaContentValueUnquotedValueQuoted: {\n                    this.stateMetaContentValueUnquotedValueQuoted(c);\n                    break;\n                }\n                case State.MetaContentValueUnquotedValueUnquoted: {\n                    this.stateMetaContentValueUnquotedValueUnquoted(c);\n                    break;\n                }\n                case State.AnyAttribName: {\n                    this.stateAnyAttribName(c);\n                    break;\n                }\n                case State.AfterAttributeName: {\n                    this.stateAfterAttributeName(c);\n                    break;\n                }\n                case State.BeforeAttributeValue: {\n                    this.stateBeforeAttributeValue(c);\n                    break;\n                }\n                case State.AttributeValueQuoted: {\n                    this.stateAttributeValueQuoted(c);\n                    break;\n                }\n                case State.AttributeValueUnquoted: {\n                    this.stateAttributeValueUnquoted(c);\n                    break;\n                }\n            }\n        }\n        this.offset += index;\n    }\n}\nexports.Sniffer = Sniffer;\n/** Get the encoding for the passed buffer. */\nfunction getEncoding(buffer, options) {\n    const sniffer = new Sniffer(options);\n    sniffer.write(buffer);\n    return sniffer.encoding;\n}\n//# sourceMappingURL=sniffer.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvZW5jb2Rpbmctc25pZmZlci9kaXN0L2NvbW1vbmpzL3NuaWZmZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsZUFBZSxHQUFHLGVBQWUsR0FBRyxrQkFBa0I7QUFDdEQsbUJBQW1CO0FBQ25CLDBCQUEwQixtQkFBTyxDQUFDLG9GQUFpQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxzQkFBc0I7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsaUJBQWlCLGtCQUFrQixrQkFBa0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQ0FBZ0M7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxzQkFBc0I7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0JBQWdCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwrRUFBK0UsSUFBSTtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw4REFBOEQ7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvY2hyb25vZGUvRG9jdW1lbnRzL3plcm8tbm9pc2Uvbm9kZV9tb2R1bGVzL2VuY29kaW5nLXNuaWZmZXIvZGlzdC9jb21tb25qcy9zbmlmZmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5TbmlmZmVyID0gZXhwb3J0cy5TVFJJTkdTID0gZXhwb3J0cy5SZXN1bHRUeXBlID0gdm9pZCAwO1xuZXhwb3J0cy5nZXRFbmNvZGluZyA9IGdldEVuY29kaW5nO1xuY29uc3Qgd2hhdHdnX2VuY29kaW5nXzEgPSByZXF1aXJlKFwid2hhdHdnLWVuY29kaW5nXCIpO1xuLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjcHJlc2Nhbi1hLWJ5dGUtc3RyZWFtLXRvLWRldGVybWluZS1pdHMtZW5jb2RpbmdcbnZhciBTdGF0ZTtcbihmdW5jdGlvbiAoU3RhdGUpIHtcbiAgICAvLyBCZWZvcmUgYW55dGhpbmcgc3RhcnRzOyBjYW4gYmUgYW55IG9mIEJPTSwgVVRGLTE2IFhNTCBkZWNsYXJhdGlvbnMgb3IgbWV0YSB0YWdzXG4gICAgU3RhdGVbU3RhdGVbXCJCZWdpblwiXSA9IDBdID0gXCJCZWdpblwiO1xuICAgIC8vIEluc2lkZSBvZiBhIEJPTVxuICAgIFN0YXRlW1N0YXRlW1wiQk9NMTZCRVwiXSA9IDFdID0gXCJCT00xNkJFXCI7XG4gICAgU3RhdGVbU3RhdGVbXCJCT00xNkxFXCJdID0gMl0gPSBcIkJPTTE2TEVcIjtcbiAgICBTdGF0ZVtTdGF0ZVtcIkJPTThcIl0gPSAzXSA9IFwiQk9NOFwiO1xuICAgIC8vIFhNTCBwcmVmaXhcbiAgICBTdGF0ZVtTdGF0ZVtcIlVURjE2TEVfWE1MX1BSRUZJWFwiXSA9IDRdID0gXCJVVEYxNkxFX1hNTF9QUkVGSVhcIjtcbiAgICBTdGF0ZVtTdGF0ZVtcIkJlZ2luTFRcIl0gPSA1XSA9IFwiQmVnaW5MVFwiO1xuICAgIFN0YXRlW1N0YXRlW1wiVVRGMTZCRV9YTUxfUFJFRklYXCJdID0gNl0gPSBcIlVURjE2QkVfWE1MX1BSRUZJWFwiO1xuICAgIC8vIFdhaXRpbmcgZm9yIG9wZW5pbmcgYDxgXG4gICAgU3RhdGVbU3RhdGVbXCJCZWZvcmVUYWdcIl0gPSA3XSA9IFwiQmVmb3JlVGFnXCI7XG4gICAgLy8gQWZ0ZXIgdGhlIG9wZW5pbmcgYDxgXG4gICAgU3RhdGVbU3RhdGVbXCJCZWZvcmVUYWdOYW1lXCJdID0gOF0gPSBcIkJlZm9yZVRhZ05hbWVcIjtcbiAgICAvLyBBZnRlciBgPC9gXG4gICAgU3RhdGVbU3RhdGVbXCJCZWZvcmVDbG9zZVRhZ05hbWVcIl0gPSA5XSA9IFwiQmVmb3JlQ2xvc2VUYWdOYW1lXCI7XG4gICAgLy8gQmVnaW5uaW5nIG9mIGEgY29tbWVudFxuICAgIFN0YXRlW1N0YXRlW1wiQ29tbWVudFN0YXJ0XCJdID0gMTBdID0gXCJDb21tZW50U3RhcnRcIjtcbiAgICAvLyBFbmQgb2YgYSBjb21tZW50XG4gICAgU3RhdGVbU3RhdGVbXCJDb21tZW50RW5kXCJdID0gMTFdID0gXCJDb21tZW50RW5kXCI7XG4gICAgLy8gQSB0YWcgbmFtZSB0aGF0IGNvdWxkIGJlIGBtZXRhYFxuICAgIFN0YXRlW1N0YXRlW1wiVGFnTmFtZU1ldGFcIl0gPSAxMl0gPSBcIlRhZ05hbWVNZXRhXCI7XG4gICAgLy8gQSB0YWcgbmFtZSB0aGF0IGlzIG5vdCBgbWV0YWBcbiAgICBTdGF0ZVtTdGF0ZVtcIlRhZ05hbWVPdGhlclwiXSA9IDEzXSA9IFwiVGFnTmFtZU90aGVyXCI7XG4gICAgLy8gWE1MIGRlY2xhcmF0aW9uXG4gICAgU3RhdGVbU3RhdGVbXCJYTUxEZWNsYXJhdGlvblwiXSA9IDE0XSA9IFwiWE1MRGVjbGFyYXRpb25cIjtcbiAgICBTdGF0ZVtTdGF0ZVtcIlhNTERlY2xhcmF0aW9uQmVmb3JlRW5jb2RpbmdcIl0gPSAxNV0gPSBcIlhNTERlY2xhcmF0aW9uQmVmb3JlRW5jb2RpbmdcIjtcbiAgICBTdGF0ZVtTdGF0ZVtcIlhNTERlY2xhcmF0aW9uQWZ0ZXJFbmNvZGluZ1wiXSA9IDE2XSA9IFwiWE1MRGVjbGFyYXRpb25BZnRlckVuY29kaW5nXCI7XG4gICAgU3RhdGVbU3RhdGVbXCJYTUxEZWNsYXJhdGlvbkJlZm9yZVZhbHVlXCJdID0gMTddID0gXCJYTUxEZWNsYXJhdGlvbkJlZm9yZVZhbHVlXCI7XG4gICAgU3RhdGVbU3RhdGVbXCJYTUxEZWNsYXJhdGlvblZhbHVlXCJdID0gMThdID0gXCJYTUxEZWNsYXJhdGlvblZhbHVlXCI7XG4gICAgLy8gQW55dGhpbmcgdGhhdCBsb29rcyBsaWtlIGEgdGFnLCBidXQgZG9lc24ndCBmaXQgaW4gdGhlIGFib3ZlIGNhdGVnb3JpZXNcbiAgICBTdGF0ZVtTdGF0ZVtcIldlaXJkVGFnXCJdID0gMTldID0gXCJXZWlyZFRhZ1wiO1xuICAgIFN0YXRlW1N0YXRlW1wiQmVmb3JlQXR0cmlidXRlXCJdID0gMjBdID0gXCJCZWZvcmVBdHRyaWJ1dGVcIjtcbiAgICAvKlxuICAgICAqIEF0dHJpYnV0ZXMgaW4gbWV0YSB0YWcg4oCUIHdlIGNvbXBhcmUgdGhlbSB0byBvdXIgc2V0IGhlcmUsIGFuZCBiYWNrIG91dFxuICAgICAqIFdlIGNhcmUgYWJvdXQgZm91ciBhdHRyaWJ1dGVzOiBodHRwLWVxdWl2LCBjb250ZW50LXR5cGUsIGNvbnRlbnQsIGNoYXJzZXRcbiAgICAgKi9cbiAgICBTdGF0ZVtTdGF0ZVtcIk1ldGFBdHRyaWJIdHRwRXF1aXZcIl0gPSAyMV0gPSBcIk1ldGFBdHRyaWJIdHRwRXF1aXZcIjtcbiAgICAvLyBUaGUgdmFsdWUgaGFzIHRvIGJlIGBjb250ZW50LXR5cGVgXG4gICAgU3RhdGVbU3RhdGVbXCJNZXRhQXR0cmliSHR0cEVxdWl2VmFsdWVcIl0gPSAyMl0gPSBcIk1ldGFBdHRyaWJIdHRwRXF1aXZWYWx1ZVwiO1xuICAgIFN0YXRlW1N0YXRlW1wiTWV0YUF0dHJpYkNcIl0gPSAyM10gPSBcIk1ldGFBdHRyaWJDXCI7XG4gICAgU3RhdGVbU3RhdGVbXCJNZXRhQXR0cmliQ29udGVudFwiXSA9IDI0XSA9IFwiTWV0YUF0dHJpYkNvbnRlbnRcIjtcbiAgICBTdGF0ZVtTdGF0ZVtcIk1ldGFBdHRyaWJDaGFyc2V0XCJdID0gMjVdID0gXCJNZXRhQXR0cmliQ2hhcnNldFwiO1xuICAgIC8vIFdhaXRpbmcgZm9yIHdoaXRlc3BhY2VcbiAgICBTdGF0ZVtTdGF0ZVtcIk1ldGFBdHRyaWJBZnRlck5hbWVcIl0gPSAyNl0gPSBcIk1ldGFBdHRyaWJBZnRlck5hbWVcIjtcbiAgICBTdGF0ZVtTdGF0ZVtcIk1ldGFDb250ZW50VmFsdWVRdW90ZWRCZWZvcmVFbmNvZGluZ1wiXSA9IDI3XSA9IFwiTWV0YUNvbnRlbnRWYWx1ZVF1b3RlZEJlZm9yZUVuY29kaW5nXCI7XG4gICAgU3RhdGVbU3RhdGVbXCJNZXRhQ29udGVudFZhbHVlUXVvdGVkQWZ0ZXJFbmNvZGluZ1wiXSA9IDI4XSA9IFwiTWV0YUNvbnRlbnRWYWx1ZVF1b3RlZEFmdGVyRW5jb2RpbmdcIjtcbiAgICBTdGF0ZVtTdGF0ZVtcIk1ldGFDb250ZW50VmFsdWVRdW90ZWRCZWZvcmVWYWx1ZVwiXSA9IDI5XSA9IFwiTWV0YUNvbnRlbnRWYWx1ZVF1b3RlZEJlZm9yZVZhbHVlXCI7XG4gICAgU3RhdGVbU3RhdGVbXCJNZXRhQ29udGVudFZhbHVlUXVvdGVkVmFsdWVRdW90ZWRcIl0gPSAzMF0gPSBcIk1ldGFDb250ZW50VmFsdWVRdW90ZWRWYWx1ZVF1b3RlZFwiO1xuICAgIFN0YXRlW1N0YXRlW1wiTWV0YUNvbnRlbnRWYWx1ZVF1b3RlZFZhbHVlVW5xdW90ZWRcIl0gPSAzMV0gPSBcIk1ldGFDb250ZW50VmFsdWVRdW90ZWRWYWx1ZVVucXVvdGVkXCI7XG4gICAgU3RhdGVbU3RhdGVbXCJNZXRhQ29udGVudFZhbHVlVW5xdW90ZWRCZWZvcmVFbmNvZGluZ1wiXSA9IDMyXSA9IFwiTWV0YUNvbnRlbnRWYWx1ZVVucXVvdGVkQmVmb3JlRW5jb2RpbmdcIjtcbiAgICBTdGF0ZVtTdGF0ZVtcIk1ldGFDb250ZW50VmFsdWVVbnF1b3RlZEJlZm9yZVZhbHVlXCJdID0gMzNdID0gXCJNZXRhQ29udGVudFZhbHVlVW5xdW90ZWRCZWZvcmVWYWx1ZVwiO1xuICAgIFN0YXRlW1N0YXRlW1wiTWV0YUNvbnRlbnRWYWx1ZVVucXVvdGVkVmFsdWVRdW90ZWRcIl0gPSAzNF0gPSBcIk1ldGFDb250ZW50VmFsdWVVbnF1b3RlZFZhbHVlUXVvdGVkXCI7XG4gICAgU3RhdGVbU3RhdGVbXCJNZXRhQ29udGVudFZhbHVlVW5xdW90ZWRWYWx1ZVVucXVvdGVkXCJdID0gMzVdID0gXCJNZXRhQ29udGVudFZhbHVlVW5xdW90ZWRWYWx1ZVVucXVvdGVkXCI7XG4gICAgU3RhdGVbU3RhdGVbXCJBbnlBdHRyaWJOYW1lXCJdID0gMzZdID0gXCJBbnlBdHRyaWJOYW1lXCI7XG4gICAgLy8gQWZ0ZXIgdGhlIG5hbWUgb2YgYW4gYXR0cmlidXRlLCBiZWZvcmUgdGhlIGVxdWFscyBzaWduXG4gICAgU3RhdGVbU3RhdGVbXCJBZnRlckF0dHJpYnV0ZU5hbWVcIl0gPSAzN10gPSBcIkFmdGVyQXR0cmlidXRlTmFtZVwiO1xuICAgIC8vIEFmdGVyIGA9YFxuICAgIFN0YXRlW1N0YXRlW1wiQmVmb3JlQXR0cmlidXRlVmFsdWVcIl0gPSAzOF0gPSBcIkJlZm9yZUF0dHJpYnV0ZVZhbHVlXCI7XG4gICAgU3RhdGVbU3RhdGVbXCJBdHRyaWJ1dGVWYWx1ZVF1b3RlZFwiXSA9IDM5XSA9IFwiQXR0cmlidXRlVmFsdWVRdW90ZWRcIjtcbiAgICBTdGF0ZVtTdGF0ZVtcIkF0dHJpYnV0ZVZhbHVlVW5xdW90ZWRcIl0gPSA0MF0gPSBcIkF0dHJpYnV0ZVZhbHVlVW5xdW90ZWRcIjtcbn0pKFN0YXRlIHx8IChTdGF0ZSA9IHt9KSk7XG52YXIgUmVzdWx0VHlwZTtcbihmdW5jdGlvbiAoUmVzdWx0VHlwZSkge1xuICAgIC8vIEJ5dGUgb3JkZXIgbWFya1xuICAgIFJlc3VsdFR5cGVbUmVzdWx0VHlwZVtcIkJPTVwiXSA9IDBdID0gXCJCT01cIjtcbiAgICAvLyBVc2VyLSBvciB0cmFuc3BvcnQgbGF5ZXItZGVmaW5lZFxuICAgIFJlc3VsdFR5cGVbUmVzdWx0VHlwZVtcIlBBU1NFRFwiXSA9IDFdID0gXCJQQVNTRURcIjtcbiAgICAvLyBYTUwgcHJlZml4ZXNcbiAgICBSZXN1bHRUeXBlW1Jlc3VsdFR5cGVbXCJYTUxfUFJFRklYXCJdID0gMl0gPSBcIlhNTF9QUkVGSVhcIjtcbiAgICAvLyBNZXRhIHRhZ1xuICAgIFJlc3VsdFR5cGVbUmVzdWx0VHlwZVtcIk1FVEFfVEFHXCJdID0gM10gPSBcIk1FVEFfVEFHXCI7XG4gICAgLy8gWE1MIGVuY29kaW5nXG4gICAgUmVzdWx0VHlwZVtSZXN1bHRUeXBlW1wiWE1MX0VOQ09ESU5HXCJdID0gNF0gPSBcIlhNTF9FTkNPRElOR1wiO1xuICAgIC8vIERlZmF1bHRcbiAgICBSZXN1bHRUeXBlW1Jlc3VsdFR5cGVbXCJERUZBVUxUXCJdID0gNV0gPSBcIkRFRkFVTFRcIjtcbn0pKFJlc3VsdFR5cGUgfHwgKGV4cG9ydHMuUmVzdWx0VHlwZSA9IFJlc3VsdFR5cGUgPSB7fSkpO1xudmFyIEF0dHJpYlR5cGU7XG4oZnVuY3Rpb24gKEF0dHJpYlR5cGUpIHtcbiAgICBBdHRyaWJUeXBlW0F0dHJpYlR5cGVbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcbiAgICBBdHRyaWJUeXBlW0F0dHJpYlR5cGVbXCJIdHRwRXF1aXZcIl0gPSAxXSA9IFwiSHR0cEVxdWl2XCI7XG4gICAgQXR0cmliVHlwZVtBdHRyaWJUeXBlW1wiQ29udGVudFwiXSA9IDJdID0gXCJDb250ZW50XCI7XG4gICAgQXR0cmliVHlwZVtBdHRyaWJUeXBlW1wiQ2hhcnNldFwiXSA9IDNdID0gXCJDaGFyc2V0XCI7XG59KShBdHRyaWJUeXBlIHx8IChBdHRyaWJUeXBlID0ge30pKTtcbnZhciBDaGFycztcbihmdW5jdGlvbiAoQ2hhcnMpIHtcbiAgICBDaGFyc1tDaGFyc1tcIk5JTFwiXSA9IDBdID0gXCJOSUxcIjtcbiAgICBDaGFyc1tDaGFyc1tcIlRBQlwiXSA9IDldID0gXCJUQUJcIjtcbiAgICBDaGFyc1tDaGFyc1tcIkxGXCJdID0gMTBdID0gXCJMRlwiO1xuICAgIENoYXJzW0NoYXJzW1wiQ1JcIl0gPSAxM10gPSBcIkNSXCI7XG4gICAgQ2hhcnNbQ2hhcnNbXCJTUEFDRVwiXSA9IDMyXSA9IFwiU1BBQ0VcIjtcbiAgICBDaGFyc1tDaGFyc1tcIkVYQ0xBTUFUSU9OXCJdID0gMzNdID0gXCJFWENMQU1BVElPTlwiO1xuICAgIENoYXJzW0NoYXJzW1wiRFFVT1RFXCJdID0gMzRdID0gXCJEUVVPVEVcIjtcbiAgICBDaGFyc1tDaGFyc1tcIlNRVU9URVwiXSA9IDM5XSA9IFwiU1FVT1RFXCI7XG4gICAgQ2hhcnNbQ2hhcnNbXCJEQVNIXCJdID0gNDVdID0gXCJEQVNIXCI7XG4gICAgQ2hhcnNbQ2hhcnNbXCJTTEFTSFwiXSA9IDQ3XSA9IFwiU0xBU0hcIjtcbiAgICBDaGFyc1tDaGFyc1tcIlNFTUlDT0xPTlwiXSA9IDU5XSA9IFwiU0VNSUNPTE9OXCI7XG4gICAgQ2hhcnNbQ2hhcnNbXCJMVFwiXSA9IDYwXSA9IFwiTFRcIjtcbiAgICBDaGFyc1tDaGFyc1tcIkVRVUFMU1wiXSA9IDYxXSA9IFwiRVFVQUxTXCI7XG4gICAgQ2hhcnNbQ2hhcnNbXCJHVFwiXSA9IDYyXSA9IFwiR1RcIjtcbiAgICBDaGFyc1tDaGFyc1tcIlFVRVNUSU9OXCJdID0gNjNdID0gXCJRVUVTVElPTlwiO1xuICAgIENoYXJzW0NoYXJzW1wiVXBwZXJBXCJdID0gNjVdID0gXCJVcHBlckFcIjtcbiAgICBDaGFyc1tDaGFyc1tcIlVwcGVyWlwiXSA9IDkwXSA9IFwiVXBwZXJaXCI7XG4gICAgQ2hhcnNbQ2hhcnNbXCJMb3dlckFcIl0gPSA5N10gPSBcIkxvd2VyQVwiO1xuICAgIENoYXJzW0NoYXJzW1wiTG93ZXJaXCJdID0gMTIyXSA9IFwiTG93ZXJaXCI7XG59KShDaGFycyB8fCAoQ2hhcnMgPSB7fSkpO1xuY29uc3QgU1BBQ0VfQ0hBUkFDVEVSUyA9IG5ldyBTZXQoW0NoYXJzLlNQQUNFLCBDaGFycy5MRiwgQ2hhcnMuQ1IsIENoYXJzLlRBQl0pO1xuY29uc3QgRU5EX09GX1VOUVVPVEVEX0FUVFJJQlVURV9WQUxVRSA9IG5ldyBTZXQoW1xuICAgIENoYXJzLlNQQUNFLFxuICAgIENoYXJzLkxGLFxuICAgIENoYXJzLkNSLFxuICAgIENoYXJzLlRBQixcbiAgICBDaGFycy5HVCxcbl0pO1xuZnVuY3Rpb24gdG9VaW50OEFycmF5KHN0cikge1xuICAgIGNvbnN0IGFyciA9IG5ldyBVaW50OEFycmF5KHN0ci5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFycltpXSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgICByZXR1cm4gYXJyO1xufVxuZXhwb3J0cy5TVFJJTkdTID0ge1xuICAgIFVURjhfQk9NOiBuZXcgVWludDhBcnJheShbMHhlZiwgMHhiYiwgMHhiZl0pLFxuICAgIFVURjE2TEVfQk9NOiBuZXcgVWludDhBcnJheShbMHhmZiwgMHhmZV0pLFxuICAgIFVURjE2QkVfQk9NOiBuZXcgVWludDhBcnJheShbMHhmZSwgMHhmZl0pLFxuICAgIFVURjE2TEVfWE1MX1BSRUZJWDogbmV3IFVpbnQ4QXJyYXkoWzB4M2MsIDB4MCwgMHgzZiwgMHgwLCAweDc4LCAweDBdKSxcbiAgICBVVEYxNkJFX1hNTF9QUkVGSVg6IG5ldyBVaW50OEFycmF5KFsweDAsIDB4M2MsIDB4MCwgMHgzZiwgMHgwLCAweDc4XSksXG4gICAgWE1MX0RFQ0xBUkFUSU9OOiB0b1VpbnQ4QXJyYXkoXCI8P3htbFwiKSxcbiAgICBFTkNPRElORzogdG9VaW50OEFycmF5KFwiZW5jb2RpbmdcIiksXG4gICAgTUVUQTogdG9VaW50OEFycmF5KFwibWV0YVwiKSxcbiAgICBIVFRQX0VRVUlWOiB0b1VpbnQ4QXJyYXkoXCJodHRwLWVxdWl2XCIpLFxuICAgIENPTlRFTlQ6IHRvVWludDhBcnJheShcImNvbnRlbnRcIiksXG4gICAgQ09OVEVOVF9UWVBFOiB0b1VpbnQ4QXJyYXkoXCJjb250ZW50LXR5cGVcIiksXG4gICAgQ0hBUlNFVDogdG9VaW50OEFycmF5KFwiY2hhcnNldFwiKSxcbiAgICBDT01NRU5UX1NUQVJUOiB0b1VpbnQ4QXJyYXkoXCI8IS0tXCIpLFxuICAgIENPTU1FTlRfRU5EOiB0b1VpbnQ4QXJyYXkoXCItLT5cIiksXG59O1xuZnVuY3Rpb24gaXNBc2NpaUFscGhhKGMpIHtcbiAgICByZXR1cm4gKChjID49IENoYXJzLlVwcGVyQSAmJiBjIDw9IENoYXJzLlVwcGVyWikgfHxcbiAgICAgICAgKGMgPj0gQ2hhcnMuTG93ZXJBICYmIGMgPD0gQ2hhcnMuTG93ZXJaKSk7XG59XG5mdW5jdGlvbiBpc1F1b3RlKGMpIHtcbiAgICByZXR1cm4gYyA9PT0gQ2hhcnMuRFFVT1RFIHx8IGMgPT09IENoYXJzLlNRVU9URTtcbn1cbmNsYXNzIFNuaWZmZXIge1xuICAgIHNldFJlc3VsdChsYWJlbCwgdHlwZSkge1xuICAgICAgICBpZiAodGhpcy5yZXN1bHRUeXBlID09PSBSZXN1bHRUeXBlLkRFRkFVTFQgfHwgdGhpcy5yZXN1bHRUeXBlID4gdHlwZSkge1xuICAgICAgICAgICAgY29uc3QgZW5jb2RpbmcgPSAoMCwgd2hhdHdnX2VuY29kaW5nXzEubGFiZWxUb05hbWUpKGxhYmVsKTtcbiAgICAgICAgICAgIGlmIChlbmNvZGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5jb2RpbmcgPVxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBhcmUgaW4gYSBtZXRhIHRhZyBhbmQgdGhlIGVuY29kaW5nIGlzIGB4LXVzZXItZGVmaW5lZGBcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9PT0gUmVzdWx0VHlwZS5NRVRBX1RBRyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2RpbmcgPT09IFwieC11c2VyLWRlZmluZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcIndpbmRvd3MtMTI1MlwiXG4gICAgICAgICAgICAgICAgICAgICAgICA6IC8vIENoZWNrIGlmIHdlIGFyZSBpbiBhIG1ldGEgdGFnIG9yIHhtbCBkZWNsYXJhdGlvbiwgYW5kIHRoZSBlbmNvZGluZyBpcyBVVEYtMTZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodHlwZSA9PT0gUmVzdWx0VHlwZS5NRVRBX1RBRyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID09PSBSZXN1bHRUeXBlLlhNTF9FTkNPRElORykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGVuY29kaW5nID09PSBcIlVURi0xNkxFXCIgfHwgZW5jb2RpbmcgPT09IFwiVVRGLTE2QkVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlVURi04XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBlbmNvZGluZztcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSB0eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHsgbWF4Qnl0ZXMgPSAxMDI0LCB1c2VyRW5jb2RpbmcsIHRyYW5zcG9ydExheWVyRW5jb2RpbmdMYWJlbCwgZGVmYXVsdEVuY29kaW5nLCB9ID0ge30pIHtcbiAgICAgICAgLyoqIFRoZSBvZmZzZXQgb2YgdGhlIHByZXZpb3VzIGJ1ZmZlcnMuICovXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkJlZ2luO1xuICAgICAgICB0aGlzLnNlY3Rpb25JbmRleCA9IDA7XG4gICAgICAgIHRoaXMuYXR0cmliVHlwZSA9IEF0dHJpYlR5cGUuTm9uZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluZGljYXRlcyBpZiB0aGUgYGh0dHAtZXF1aXZgIGlzIGBjb250ZW50LXR5cGVgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBJbml0aWFsbHkgYG51bGxgLCBhIGJvb2xlYW4gd2hlbiBhIHZhbHVlIGlzIGZvdW5kLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5nb3RQcmFnbWEgPSBudWxsO1xuICAgICAgICB0aGlzLm5lZWRzUHJhZ21hID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbk1ldGFUYWcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lbmNvZGluZyA9IFwid2luZG93cy0xMjUyXCI7XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IFJlc3VsdFR5cGUuREVGQVVMVDtcbiAgICAgICAgdGhpcy5xdW90ZUNoYXJhY3RlciA9IDA7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlVmFsdWUgPSBbXTtcbiAgICAgICAgdGhpcy5tYXhCeXRlcyA9IG1heEJ5dGVzO1xuICAgICAgICBpZiAodXNlckVuY29kaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnNldFJlc3VsdCh1c2VyRW5jb2RpbmcsIFJlc3VsdFR5cGUuUEFTU0VEKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhbnNwb3J0TGF5ZXJFbmNvZGluZ0xhYmVsKSB7XG4gICAgICAgICAgICB0aGlzLnNldFJlc3VsdCh0cmFuc3BvcnRMYXllckVuY29kaW5nTGFiZWwsIFJlc3VsdFR5cGUuUEFTU0VEKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmYXVsdEVuY29kaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnNldFJlc3VsdChkZWZhdWx0RW5jb2RpbmcsIFJlc3VsdFR5cGUuREVGQVVMVCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGVCZWdpbihjKSB7XG4gICAgICAgIHN3aXRjaCAoYykge1xuICAgICAgICAgICAgY2FzZSBleHBvcnRzLlNUUklOR1MuVVRGMTZCRV9CT01bMF06IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQk9NMTZCRTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgZXhwb3J0cy5TVFJJTkdTLlVURjE2TEVfQk9NWzBdOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkJPTTE2TEU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIGV4cG9ydHMuU1RSSU5HUy5VVEY4X0JPTVswXToge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbkluZGV4ID0gMTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQk9NODtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgQ2hhcnMuTklMOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLlVURjE2QkVfWE1MX1BSRUZJWDtcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25JbmRleCA9IDE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIENoYXJzLkxUOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkJlZ2luTFQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkJlZm9yZVRhZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0ZUJlZ2luTFQoYykge1xuICAgICAgICBpZiAoYyA9PT0gQ2hhcnMuTklMKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuVVRGMTZMRV9YTUxfUFJFRklYO1xuICAgICAgICAgICAgdGhpcy5zZWN0aW9uSW5kZXggPSAyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGMgPT09IENoYXJzLlFVRVNUSU9OKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuWE1MRGVjbGFyYXRpb247XG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25JbmRleCA9IDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQmVmb3JlVGFnTmFtZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVCZWZvcmVUYWdOYW1lKGMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlVVRGMTZCRV9YTUxfUFJFRklYKGMpIHtcbiAgICAgICAgLy8gQWR2YW5jZSBwb3NpdGlvbiBpbiB0aGUgc2VjdGlvblxuICAgICAgICBpZiAodGhpcy5hZHZhbmNlU2VjdGlvbihleHBvcnRzLlNUUklOR1MuVVRGMTZCRV9YTUxfUFJFRklYLCBjKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VjdGlvbkluZGV4ID09PSBleHBvcnRzLlNUUklOR1MuVVRGMTZCRV9YTUxfUFJFRklYLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgdGhlIHdob2xlIHByZWZpeFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UmVzdWx0KFwidXRmLTE2YmVcIiwgUmVzdWx0VHlwZS5YTUxfUFJFRklYKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5CZWZvcmVUYWc7XG4gICAgICAgICAgICB0aGlzLnN0YXRlQmVmb3JlVGFnKGMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlVVRGMTZMRV9YTUxfUFJFRklYKGMpIHtcbiAgICAgICAgLy8gQWR2YW5jZSBwb3NpdGlvbiBpbiB0aGUgc2VjdGlvblxuICAgICAgICBpZiAodGhpcy5hZHZhbmNlU2VjdGlvbihleHBvcnRzLlNUUklOR1MuVVRGMTZMRV9YTUxfUFJFRklYLCBjKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VjdGlvbkluZGV4ID09PSBleHBvcnRzLlNUUklOR1MuVVRGMTZMRV9YTUxfUFJFRklYLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgdGhlIHdob2xlIHByZWZpeFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UmVzdWx0KFwidXRmLTE2bGVcIiwgUmVzdWx0VHlwZS5YTUxfUFJFRklYKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5CZWZvcmVUYWc7XG4gICAgICAgICAgICB0aGlzLnN0YXRlQmVmb3JlVGFnKGMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlQk9NMTZMRShjKSB7XG4gICAgICAgIGlmIChjID09PSBleHBvcnRzLlNUUklOR1MuVVRGMTZMRV9CT01bMV0pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UmVzdWx0KFwidXRmLTE2bGVcIiwgUmVzdWx0VHlwZS5CT00pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkJlZm9yZVRhZztcbiAgICAgICAgICAgIHRoaXMuc3RhdGVCZWZvcmVUYWcoYyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGVCT00xNkJFKGMpIHtcbiAgICAgICAgaWYgKGMgPT09IGV4cG9ydHMuU1RSSU5HUy5VVEYxNkJFX0JPTVsxXSkge1xuICAgICAgICAgICAgdGhpcy5zZXRSZXN1bHQoXCJ1dGYtMTZiZVwiLCBSZXN1bHRUeXBlLkJPTSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQmVmb3JlVGFnO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZUJlZm9yZVRhZyhjKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0ZUJPTTgoYykge1xuICAgICAgICBpZiAodGhpcy5hZHZhbmNlU2VjdGlvbihleHBvcnRzLlNUUklOR1MuVVRGOF9CT00sIGMpICYmXG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25JbmRleCA9PT0gZXhwb3J0cy5TVFJJTkdTLlVURjhfQk9NLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5zZXRSZXN1bHQoXCJ1dGYtOFwiLCBSZXN1bHRUeXBlLkJPTSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGVCZWZvcmVUYWcoYykge1xuICAgICAgICBpZiAoYyA9PT0gQ2hhcnMuTFQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5CZWZvcmVUYWdOYW1lO1xuICAgICAgICAgICAgdGhpcy5pbk1ldGFUYWcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBXZSBoYXZlIHNlZW4gYSBgPGAsIGFuZCBub3cgaGF2ZSB0byBmaWd1cmUgb3V0IHdoYXQgdG8gZG8uXG4gICAgICpcbiAgICAgKiBPcHRpb25zOlxuICAgICAqICAtIGA8bWV0YWBcbiAgICAgKiAgLSBBbnkgb3RoZXIgdGFnXG4gICAgICogIC0gQSBjbG9zaW5nIHRhZ1xuICAgICAqICAtIGA8IS0tYFxuICAgICAqICAtIEFuIFhNTCBkZWNsYXJhdGlvblxuICAgICAqXG4gICAgICovXG4gICAgc3RhdGVCZWZvcmVUYWdOYW1lKGMpIHtcbiAgICAgICAgaWYgKGlzQXNjaWlBbHBoYShjKSkge1xuICAgICAgICAgICAgaWYgKChjIHwgMHgyMCkgPT09IGV4cG9ydHMuU1RSSU5HUy5NRVRBWzBdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uSW5kZXggPSAxO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5UYWdOYW1lTWV0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5UYWdOYW1lT3RoZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgc3dpdGNoIChjKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBDaGFycy5TTEFTSDoge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQmVmb3JlQ2xvc2VUYWdOYW1lO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBDaGFycy5FWENMQU1BVElPTjoge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQ29tbWVudFN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25JbmRleCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIENoYXJzLlFVRVNUSU9OOiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5XZWlyZFRhZztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkJlZm9yZVRhZztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZUJlZm9yZVRhZyhjKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlQmVmb3JlQ2xvc2VUYWdOYW1lKGMpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IGlzQXNjaWlBbHBoYShjKVxuICAgICAgICAgICAgPyAvLyBTd2l0Y2ggdG8gYFRhZ05hbWVPdGhlcmA7IHRoZSBIVE1MIHNwZWMgYWxsb3dzIGF0dHJpYnV0ZXMgaGVyZSBhcyB3ZWxsLlxuICAgICAgICAgICAgICAgIFN0YXRlLlRhZ05hbWVPdGhlclxuICAgICAgICAgICAgOiBTdGF0ZS5XZWlyZFRhZztcbiAgICB9XG4gICAgc3RhdGVDb21tZW50U3RhcnQoYykge1xuICAgICAgICBpZiAodGhpcy5hZHZhbmNlU2VjdGlvbihleHBvcnRzLlNUUklOR1MuQ09NTUVOVF9TVEFSVCwgYykpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlY3Rpb25JbmRleCA9PT0gZXhwb3J0cy5TVFJJTkdTLkNPTU1FTlRfU1RBUlQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkNvbW1lbnRFbmQ7XG4gICAgICAgICAgICAgICAgLy8gVGhlIC0tIG9mIHRoZSBjb21tZW50IHN0YXJ0IGNhbiBiZSBwYXJ0IG9mIHRoZSBlbmQuXG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uSW5kZXggPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLldlaXJkVGFnO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZVdlaXJkVGFnKGMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlQ29tbWVudEVuZChjKSB7XG4gICAgICAgIGlmICh0aGlzLmFkdmFuY2VTZWN0aW9uKGV4cG9ydHMuU1RSSU5HUy5DT01NRU5UX0VORCwgYykpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlY3Rpb25JbmRleCA9PT0gZXhwb3J0cy5TVFJJTkdTLkNPTU1FTlRfRU5ELmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5CZWZvcmVUYWc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYyA9PT0gQ2hhcnMuREFTSCkge1xuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIElmIHdlIGFyZSBoZXJlLCB3ZSBrbm93IHdlIGV4cGVjdGVkIGEgYD5gIGFib3ZlLlxuICAgICAgICAgICAgICogU2V0IHRoaXMgdG8gMiwgdG8gc3VwcG9ydCBtYW55IGRhc2hlcyBiZWZvcmUgdGhlIGNsb3NpbmcgYD5gLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25JbmRleCA9IDI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQW55IHNlY3Rpb24gc3RhcnRpbmcgd2l0aCBgPCFgLCBgPD9gLCBgPC9gLCB3aXRob3V0IGJlaW5nIGEgY2xvc2luZyB0YWcgb3IgY29tbWVudC5cbiAgICAgKi9cbiAgICBzdGF0ZVdlaXJkVGFnKGMpIHtcbiAgICAgICAgaWYgKGMgPT09IENoYXJzLkdUKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQmVmb3JlVGFnO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkdmFuY2VzIHRoZSBzZWN0aW9uLCBpZ25vcmluZyB1cHBlci9sb3dlciBjYXNlLlxuICAgICAqXG4gICAgICogTWFrZSBzdXJlIHRoZSBzZWN0aW9uIGhhcyBsZWZ0LW92ZXIgY2hhcmFjdGVycyBiZWZvcmUgY2FsbGluZy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGBmYWxzZWAgaWYgd2UgZGlkIG5vdCBtYXRjaCB0aGUgc2VjdGlvbi5cbiAgICAgKi9cbiAgICBhZHZhbmNlU2VjdGlvbklDKHNlY3Rpb24sIGMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWR2YW5jZVNlY3Rpb24oc2VjdGlvbiwgYyB8IDB4MjApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZHZhbmNlcyB0aGUgc2VjdGlvbi5cbiAgICAgKlxuICAgICAqIE1ha2Ugc3VyZSB0aGUgc2VjdGlvbiBoYXMgbGVmdC1vdmVyIGNoYXJhY3RlcnMgYmVmb3JlIGNhbGxpbmcuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBgZmFsc2VgIGlmIHdlIGRpZCBub3QgbWF0Y2ggdGhlIHNlY3Rpb24uXG4gICAgICovXG4gICAgYWR2YW5jZVNlY3Rpb24oc2VjdGlvbiwgYykge1xuICAgICAgICBpZiAoc2VjdGlvblt0aGlzLnNlY3Rpb25JbmRleF0gPT09IGMpIHtcbiAgICAgICAgICAgIHRoaXMuc2VjdGlvbkluZGV4Kys7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlY3Rpb25JbmRleCA9IDA7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgc3RhdGVUYWdOYW1lTWV0YShjKSB7XG4gICAgICAgIGlmICh0aGlzLnNlY3Rpb25JbmRleCA8IGV4cG9ydHMuU1RSSU5HUy5NRVRBLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWR2YW5jZVNlY3Rpb25JQyhleHBvcnRzLlNUUklOR1MuTUVUQSwgYykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoU1BBQ0VfQ0hBUkFDVEVSUy5oYXMoYykpIHtcbiAgICAgICAgICAgIHRoaXMuaW5NZXRhVGFnID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZ290UHJhZ21hID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMubmVlZHNQcmFnbWEgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkJlZm9yZUF0dHJpYnV0ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuVGFnTmFtZU90aGVyO1xuICAgICAgICAvLyBSZWNvbnN1bWUgaW4gY2FzZSB0aGVyZSBpcyBhIGA+YC5cbiAgICAgICAgdGhpcy5zdGF0ZVRhZ05hbWVPdGhlcihjKTtcbiAgICB9XG4gICAgc3RhdGVUYWdOYW1lT3RoZXIoYykge1xuICAgICAgICBpZiAoU1BBQ0VfQ0hBUkFDVEVSUy5oYXMoYykpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5CZWZvcmVBdHRyaWJ1dGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYyA9PT0gQ2hhcnMuR1QpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5CZWZvcmVUYWc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGVCZWZvcmVBdHRyaWJ1dGUoYykge1xuICAgICAgICBpZiAoU1BBQ0VfQ0hBUkFDVEVSUy5oYXMoYykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLmluTWV0YVRhZykge1xuICAgICAgICAgICAgY29uc3QgbG93ZXIgPSBjIHwgMHgyMDtcbiAgICAgICAgICAgIGlmIChsb3dlciA9PT0gZXhwb3J0cy5TVFJJTkdTLkhUVFBfRVFVSVZbMF0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25JbmRleCA9IDE7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLk1ldGFBdHRyaWJIdHRwRXF1aXY7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobG93ZXIgPT09IGV4cG9ydHMuU1RSSU5HUy5DSEFSU0VUWzBdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uSW5kZXggPSAxO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5NZXRhQXR0cmliQztcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZSA9XG4gICAgICAgICAgICBjID09PSBDaGFycy5TTEFTSCB8fCBjID09PSBDaGFycy5HVFxuICAgICAgICAgICAgICAgID8gU3RhdGUuQmVmb3JlVGFnXG4gICAgICAgICAgICAgICAgOiBTdGF0ZS5BbnlBdHRyaWJOYW1lO1xuICAgIH1cbiAgICBoYW5kbGVNZXRhQXR0cmliKGMsIHNlY3Rpb24sIHR5cGUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWR2YW5jZVNlY3Rpb25JQyhzZWN0aW9uLCBjKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VjdGlvbkluZGV4ID09PSBzZWN0aW9uLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXR0cmliVHlwZSA9IHR5cGU7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLk1ldGFBdHRyaWJBZnRlck5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQW55QXR0cmliTmFtZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVBbnlBdHRyaWJOYW1lKGMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlTWV0YUF0dHJpYkh0dHBFcXVpdihjKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlTWV0YUF0dHJpYihjLCBleHBvcnRzLlNUUklOR1MuSFRUUF9FUVVJViwgQXR0cmliVHlwZS5IdHRwRXF1aXYpO1xuICAgIH1cbiAgICBzdGF0ZU1ldGFBdHRyaWJDKGMpIHtcbiAgICAgICAgY29uc3QgbG93ZXIgPSBjIHwgMHgyMDtcbiAgICAgICAgaWYgKGxvd2VyID09PSBleHBvcnRzLlNUUklOR1MuQ0hBUlNFVFsxXSkge1xuICAgICAgICAgICAgdGhpcy5zZWN0aW9uSW5kZXggPSAyO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLk1ldGFBdHRyaWJDaGFyc2V0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxvd2VyID09PSBleHBvcnRzLlNUUklOR1MuQ09OVEVOVFsxXSkge1xuICAgICAgICAgICAgdGhpcy5zZWN0aW9uSW5kZXggPSAyO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLk1ldGFBdHRyaWJDb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkFueUF0dHJpYk5hbWU7XG4gICAgICAgICAgICB0aGlzLnN0YXRlQW55QXR0cmliTmFtZShjKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0ZU1ldGFBdHRyaWJDaGFyc2V0KGMpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVNZXRhQXR0cmliKGMsIGV4cG9ydHMuU1RSSU5HUy5DSEFSU0VULCBBdHRyaWJUeXBlLkNoYXJzZXQpO1xuICAgIH1cbiAgICBzdGF0ZU1ldGFBdHRyaWJDb250ZW50KGMpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVNZXRhQXR0cmliKGMsIGV4cG9ydHMuU1RSSU5HUy5DT05URU5ULCBBdHRyaWJUeXBlLkNvbnRlbnQpO1xuICAgIH1cbiAgICBzdGF0ZU1ldGFBdHRyaWJBZnRlck5hbWUoYykge1xuICAgICAgICBpZiAoU1BBQ0VfQ0hBUkFDVEVSUy5oYXMoYykgfHwgYyA9PT0gQ2hhcnMuRVFVQUxTKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQWZ0ZXJBdHRyaWJ1dGVOYW1lO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZUFmdGVyQXR0cmlidXRlTmFtZShjKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5BbnlBdHRyaWJOYW1lO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZUFueUF0dHJpYk5hbWUoYyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGVBbnlBdHRyaWJOYW1lKGMpIHtcbiAgICAgICAgaWYgKFNQQUNFX0NIQVJBQ1RFUlMuaGFzKGMpKSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYlR5cGUgPSBBdHRyaWJUeXBlLk5vbmU7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQWZ0ZXJBdHRyaWJ1dGVOYW1lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGMgPT09IENoYXJzLlNMQVNIIHx8IGMgPT09IENoYXJzLkdUKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQmVmb3JlVGFnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGMgPT09IENoYXJzLkVRVUFMUykge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkJlZm9yZUF0dHJpYnV0ZVZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlQWZ0ZXJBdHRyaWJ1dGVOYW1lKGMpIHtcbiAgICAgICAgaWYgKFNQQUNFX0NIQVJBQ1RFUlMuaGFzKGMpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoYyA9PT0gQ2hhcnMuRVFVQUxTKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQmVmb3JlQXR0cmlidXRlVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQmVmb3JlQXR0cmlidXRlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZUJlZm9yZUF0dHJpYnV0ZShjKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0ZUJlZm9yZUF0dHJpYnV0ZVZhbHVlKGMpIHtcbiAgICAgICAgaWYgKFNQQUNFX0NIQVJBQ1RFUlMuaGFzKGMpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZVZhbHVlLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuc2VjdGlvbkluZGV4ID0gMDtcbiAgICAgICAgaWYgKGlzUXVvdGUoYykpIHtcbiAgICAgICAgICAgIHRoaXMucXVvdGVDaGFyYWN0ZXIgPSBjO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9XG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJUeXBlID09PSBBdHRyaWJUeXBlLkNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgPyBTdGF0ZS5NZXRhQ29udGVudFZhbHVlUXVvdGVkQmVmb3JlRW5jb2RpbmdcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmF0dHJpYlR5cGUgPT09IEF0dHJpYlR5cGUuSHR0cEVxdWl2XG4gICAgICAgICAgICAgICAgICAgICAgICA/IFN0YXRlLk1ldGFBdHRyaWJIdHRwRXF1aXZWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBTdGF0ZS5BdHRyaWJ1dGVWYWx1ZVF1b3RlZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmF0dHJpYlR5cGUgPT09IEF0dHJpYlR5cGUuQ29udGVudCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLk1ldGFDb250ZW50VmFsdWVVbnF1b3RlZEJlZm9yZUVuY29kaW5nO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZU1ldGFDb250ZW50VmFsdWVVbnF1b3RlZEJlZm9yZUVuY29kaW5nKGMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYXR0cmliVHlwZSA9PT0gQXR0cmliVHlwZS5IdHRwRXF1aXYpIHtcbiAgICAgICAgICAgIC8vIFdlIHVzZSBgcXVvdGVDaGFyYWN0ZXIgPSAwYCB0byBzaWduaWZ5IHRoYXQgdGhlIHZhbHVlIGlzIHVucXVvdGVkLlxuICAgICAgICAgICAgdGhpcy5xdW90ZUNoYXJhY3RlciA9IDA7XG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25JbmRleCA9IDA7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuTWV0YUF0dHJpYkh0dHBFcXVpdlZhbHVlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZU1ldGFBdHRyaWJIdHRwRXF1aXZWYWx1ZShjKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5BdHRyaWJ1dGVWYWx1ZVVucXVvdGVkO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZUF0dHJpYnV0ZVZhbHVlVW5xdW90ZWQoYyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVGhlIHZhbHVlIGhhcyB0byBiZSBgY29udGVudC10eXBlYFxuICAgIHN0YXRlTWV0YUF0dHJpYkh0dHBFcXVpdlZhbHVlKGMpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VjdGlvbkluZGV4ID09PSBleHBvcnRzLlNUUklOR1MuQ09OVEVOVF9UWVBFLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucXVvdGVDaGFyYWN0ZXIgPT09IDBcbiAgICAgICAgICAgICAgICA/IEVORF9PRl9VTlFVT1RFRF9BVFRSSUJVVEVfVkFMVUUuaGFzKGMpXG4gICAgICAgICAgICAgICAgOiBjID09PSB0aGlzLnF1b3RlQ2hhcmFjdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubmVlZHNQcmFnbWEgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRSZXN1bHQodGhpcy5uZWVkc1ByYWdtYSwgUmVzdWx0VHlwZS5NRVRBX1RBRyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZ290UHJhZ21hID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ290UHJhZ21hID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkJlZm9yZUF0dHJpYnV0ZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5hZHZhbmNlU2VjdGlvbklDKGV4cG9ydHMuU1RSSU5HUy5DT05URU5UX1RZUEUsIGMpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5nb3RQcmFnbWEgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMucXVvdGVDaGFyYWN0ZXIgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5BdHRyaWJ1dGVWYWx1ZVVucXVvdGVkO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZUF0dHJpYnV0ZVZhbHVlVW5xdW90ZWQoYyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQXR0cmlidXRlVmFsdWVRdW90ZWQ7XG4gICAgICAgICAgICB0aGlzLnN0YXRlQXR0cmlidXRlVmFsdWVRdW90ZWQoYyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlTWV0YUNvbnRlbnRWYWx1ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlVmFsdWUubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBlbmNvZGluZyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoLi4udGhpcy5hdHRyaWJ1dGVWYWx1ZSk7XG4gICAgICAgIGlmICh0aGlzLmdvdFByYWdtYSkge1xuICAgICAgICAgICAgdGhpcy5zZXRSZXN1bHQoZW5jb2RpbmcsIFJlc3VsdFR5cGUuTUVUQV9UQUcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMubmVlZHNQcmFnbWEgPT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIERvbid0IG92ZXJyaWRlIGEgcHJldmlvdXMgcmVzdWx0LlxuICAgICAgICAgICAgdGhpcy5uZWVkc1ByYWdtYSA9IGVuY29kaW5nO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXR0cmlidXRlVmFsdWUubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgaGFuZGxlQXR0cmlidXRlVmFsdWUoKSB7XG4gICAgICAgIGlmICh0aGlzLmF0dHJpYlR5cGUgPT09IEF0dHJpYlR5cGUuQ2hhcnNldCkge1xuICAgICAgICAgICAgdGhpcy5zZXRSZXN1bHQoU3RyaW5nLmZyb21DaGFyQ29kZSguLi50aGlzLmF0dHJpYnV0ZVZhbHVlKSwgUmVzdWx0VHlwZS5NRVRBX1RBRyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGVBdHRyaWJ1dGVWYWx1ZVVucXVvdGVkKGMpIHtcbiAgICAgICAgaWYgKFNQQUNFX0NIQVJBQ1RFUlMuaGFzKGMpKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUF0dHJpYnV0ZVZhbHVlKCk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQmVmb3JlQXR0cmlidXRlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGMgPT09IENoYXJzLlNMQVNIIHx8IGMgPT09IENoYXJzLkdUKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUF0dHJpYnV0ZVZhbHVlKCk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQmVmb3JlVGFnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYXR0cmliVHlwZSA9PT0gQXR0cmliVHlwZS5DaGFyc2V0KSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZVZhbHVlLnB1c2goYyB8IChjID49IDB4NDEgJiYgYyA8PSAweDVhID8gMHgyMCA6IDApKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmaW5kTWV0YUNvbnRlbnRFbmNvZGluZyhjKSB7XG4gICAgICAgIGlmICh0aGlzLmFkdmFuY2VTZWN0aW9uSUMoZXhwb3J0cy5TVFJJTkdTLkNIQVJTRVQsIGMpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWN0aW9uSW5kZXggPT09IGV4cG9ydHMuU1RSSU5HUy5DSEFSU0VULmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgd2UgZW5jb3VudGVyZWQgYW5vdGhlciBgY2AsIGFzc3VtZSB3ZSBzdGFydGVkIG92ZXIuXG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25JbmRleCA9IE51bWJlcihjID09PSBleHBvcnRzLlNUUklOR1MuQ0hBUlNFVFswXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBzdGF0ZU1ldGFDb250ZW50VmFsdWVVbnF1b3RlZEJlZm9yZUVuY29kaW5nKGMpIHtcbiAgICAgICAgaWYgKEVORF9PRl9VTlFVT1RFRF9BVFRSSUJVVEVfVkFMVUUuaGFzKGMpKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlQXR0cmlidXRlVmFsdWVVbnF1b3RlZChjKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnNlY3Rpb25JbmRleCA9PT0gZXhwb3J0cy5TVFJJTkdTLkNIQVJTRVQubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoYyA9PT0gQ2hhcnMuRVFVQUxTKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLk1ldGFDb250ZW50VmFsdWVVbnF1b3RlZEJlZm9yZVZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5maW5kTWV0YUNvbnRlbnRFbmNvZGluZyhjKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0ZU1ldGFDb250ZW50VmFsdWVVbnF1b3RlZEJlZm9yZVZhbHVlKGMpIHtcbiAgICAgICAgaWYgKGlzUXVvdGUoYykpIHtcbiAgICAgICAgICAgIHRoaXMucXVvdGVDaGFyYWN0ZXIgPSBjO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLk1ldGFDb250ZW50VmFsdWVVbnF1b3RlZFZhbHVlUXVvdGVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEVORF9PRl9VTlFVT1RFRF9BVFRSSUJVVEVfVkFMVUUuaGFzKGMpKSB7XG4gICAgICAgICAgICAvLyBDYW4ndCBoYXZlIHNwYWNlcyBoZXJlLCBhcyBpdCB3b3VsZCBubyBsb25nZXIgYmUgcGFydCBvZiB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICAgICAgICAgICAgdGhpcy5zdGF0ZUF0dHJpYnV0ZVZhbHVlVW5xdW90ZWQoYyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuTWV0YUNvbnRlbnRWYWx1ZVVucXVvdGVkVmFsdWVVbnF1b3RlZDtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVNZXRhQ29udGVudFZhbHVlVW5xdW90ZWRWYWx1ZVVucXVvdGVkKGMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlTWV0YUNvbnRlbnRWYWx1ZVVucXVvdGVkVmFsdWVRdW90ZWQoYykge1xuICAgICAgICBpZiAoRU5EX09GX1VOUVVPVEVEX0FUVFJJQlVURV9WQUxVRS5oYXMoYykpIHtcbiAgICAgICAgICAgIC8vIFF1b3RlcyB3ZXJlbid0IG1hdGNoZWQsIHNvIHdlJ3JlIGRvbmUuXG4gICAgICAgICAgICB0aGlzLnN0YXRlQXR0cmlidXRlVmFsdWVVbnF1b3RlZChjKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjID09PSB0aGlzLnF1b3RlQ2hhcmFjdGVyKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZU1ldGFDb250ZW50VmFsdWUoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5BdHRyaWJ1dGVWYWx1ZVVucXVvdGVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVWYWx1ZS5wdXNoKGMgfCAoYyA+PSAweDQxICYmIGMgPD0gMHg1YSA/IDB4MjAgOiAwKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGVNZXRhQ29udGVudFZhbHVlVW5xdW90ZWRWYWx1ZVVucXVvdGVkKGMpIHtcbiAgICAgICAgaWYgKEVORF9PRl9VTlFVT1RFRF9BVFRSSUJVVEVfVkFMVUUuaGFzKGMpIHx8IGMgPT09IENoYXJzLlNFTUlDT0xPTikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVNZXRhQ29udGVudFZhbHVlKCk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQXR0cmlidXRlVmFsdWVVbnF1b3RlZDtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVBdHRyaWJ1dGVWYWx1ZVVucXVvdGVkKGMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVWYWx1ZS5wdXNoKGMgfCAoYyA+PSAweDQxICYmIGMgPD0gMHg1YSA/IDB4MjAgOiAwKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGVNZXRhQ29udGVudFZhbHVlUXVvdGVkVmFsdWVVbnF1b3RlZChjKSB7XG4gICAgICAgIGlmIChpc1F1b3RlKGMpIHx8IFNQQUNFX0NIQVJBQ1RFUlMuaGFzKGMpIHx8IGMgPT09IENoYXJzLlNFTUlDT0xPTikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVNZXRhQ29udGVudFZhbHVlKCk7XG4gICAgICAgICAgICAvLyBXZSBhcmUgZG9uZSB3aXRoIHRoZSB2YWx1ZSwgYnV0IG1pZ2h0IG5vdCBiZSBhdCB0aGUgZW5kIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5BdHRyaWJ1dGVWYWx1ZVF1b3RlZDtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVBdHRyaWJ1dGVWYWx1ZVF1b3RlZChjKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlVmFsdWUucHVzaChjIHwgKGMgPj0gMHg0MSAmJiBjIDw9IDB4NWEgPyAweDIwIDogMCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlTWV0YUNvbnRlbnRWYWx1ZVF1b3RlZFZhbHVlUXVvdGVkKGMpIHtcbiAgICAgICAgaWYgKGlzUXVvdGUoYykpIHtcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgcmVhY2hlZCB0aGUgZW5kIG9mIG91ciB2YWx1ZS5cbiAgICAgICAgICAgIGlmIChjICE9PSB0aGlzLnF1b3RlQ2hhcmFjdGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gT25seSBoYW5kbGUgdGhlIHZhbHVlIGlmIGlubmVyIHF1b3RlcyB3ZXJlIG1hdGNoZWQuXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVNZXRhQ29udGVudFZhbHVlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQXR0cmlidXRlVmFsdWVRdW90ZWQ7XG4gICAgICAgICAgICB0aGlzLnN0YXRlQXR0cmlidXRlVmFsdWVRdW90ZWQoYyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZVZhbHVlLnB1c2goYyB8IChjID49IDB4NDEgJiYgYyA8PSAweDVhID8gMHgyMCA6IDApKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0ZU1ldGFDb250ZW50VmFsdWVRdW90ZWRCZWZvcmVFbmNvZGluZyhjKSB7XG4gICAgICAgIGlmIChjID09PSB0aGlzLnF1b3RlQ2hhcmFjdGVyKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlQXR0cmlidXRlVmFsdWVRdW90ZWQoYyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5maW5kTWV0YUNvbnRlbnRFbmNvZGluZyhjKSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLk1ldGFDb250ZW50VmFsdWVRdW90ZWRBZnRlckVuY29kaW5nO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlTWV0YUNvbnRlbnRWYWx1ZVF1b3RlZEFmdGVyRW5jb2RpbmcoYykge1xuICAgICAgICBpZiAoYyA9PT0gQ2hhcnMuRVFVQUxTKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuTWV0YUNvbnRlbnRWYWx1ZVF1b3RlZEJlZm9yZVZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFTUEFDRV9DSEFSQUNURVJTLmhhcyhjKSkge1xuICAgICAgICAgICAgLy8gTG9vayBmb3IgdGhlIG5leHQgZW5jb2RpbmdcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5NZXRhQ29udGVudFZhbHVlUXVvdGVkQmVmb3JlRW5jb2Rpbmc7XG4gICAgICAgICAgICB0aGlzLnN0YXRlTWV0YUNvbnRlbnRWYWx1ZVF1b3RlZEJlZm9yZUVuY29kaW5nKGMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlTWV0YUNvbnRlbnRWYWx1ZVF1b3RlZEJlZm9yZVZhbHVlKGMpIHtcbiAgICAgICAgaWYgKGMgPT09IHRoaXMucXVvdGVDaGFyYWN0ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVBdHRyaWJ1dGVWYWx1ZVF1b3RlZChjKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1F1b3RlKGMpKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuTWV0YUNvbnRlbnRWYWx1ZVF1b3RlZFZhbHVlUXVvdGVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFTUEFDRV9DSEFSQUNURVJTLmhhcyhjKSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLk1ldGFDb250ZW50VmFsdWVRdW90ZWRWYWx1ZVVucXVvdGVkO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZU1ldGFDb250ZW50VmFsdWVRdW90ZWRWYWx1ZVVucXVvdGVkKGMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlQXR0cmlidXRlVmFsdWVRdW90ZWQoYykge1xuICAgICAgICBpZiAoYyA9PT0gdGhpcy5xdW90ZUNoYXJhY3Rlcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVBdHRyaWJ1dGVWYWx1ZSgpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkJlZm9yZUF0dHJpYnV0ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmF0dHJpYlR5cGUgPT09IEF0dHJpYlR5cGUuQ2hhcnNldCkge1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVWYWx1ZS5wdXNoKGMgfCAoYyA+PSAweDQxICYmIGMgPD0gMHg1YSA/IDB4MjAgOiAwKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gUmVhZCBTVFJJTkdTLlhNTF9ERUNMQVJBVElPTlxuICAgIHN0YXRlWE1MRGVjbGFyYXRpb24oYykge1xuICAgICAgICBpZiAodGhpcy5hZHZhbmNlU2VjdGlvbihleHBvcnRzLlNUUklOR1MuWE1MX0RFQ0xBUkFUSU9OLCBjKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VjdGlvbkluZGV4ID09PSBleHBvcnRzLlNUUklOR1MuWE1MX0RFQ0xBUkFUSU9OLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbkluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuWE1MRGVjbGFyYXRpb25CZWZvcmVFbmNvZGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5XZWlyZFRhZztcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0ZVhNTERlY2xhcmF0aW9uQmVmb3JlRW5jb2RpbmcoYykge1xuICAgICAgICBpZiAodGhpcy5hZHZhbmNlU2VjdGlvbihleHBvcnRzLlNUUklOR1MuRU5DT0RJTkcsIGMpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWN0aW9uSW5kZXggPT09IGV4cG9ydHMuU1RSSU5HUy5FTkNPRElORy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuWE1MRGVjbGFyYXRpb25BZnRlckVuY29kaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGMgPT09IENoYXJzLkdUKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuQmVmb3JlVGFnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgd2UgZW5jb3VudGVyZWQgYW5vdGhlciBgY2AsIGFzc3VtZSB3ZSBzdGFydGVkIG92ZXIuXG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25JbmRleCA9IE51bWJlcihjID09PSBleHBvcnRzLlNUUklOR1MuRU5DT0RJTkdbMF0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlWE1MRGVjbGFyYXRpb25BZnRlckVuY29kaW5nKGMpIHtcbiAgICAgICAgaWYgKGMgPT09IENoYXJzLkVRVUFMUykge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLlhNTERlY2xhcmF0aW9uQmVmb3JlVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYyA+IENoYXJzLlNQQUNFKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuV2VpcmRUYWc7XG4gICAgICAgICAgICB0aGlzLnN0YXRlV2VpcmRUYWcoYyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGVYTUxEZWNsYXJhdGlvbkJlZm9yZVZhbHVlKGMpIHtcbiAgICAgICAgaWYgKGlzUXVvdGUoYykpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlVmFsdWUubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5YTUxEZWNsYXJhdGlvblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGMgPiBDaGFycy5TUEFDRSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLldlaXJkVGFnO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZVdlaXJkVGFnKGMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlWE1MRGVjbGFyYXRpb25WYWx1ZShjKSB7XG4gICAgICAgIGlmIChpc1F1b3RlKGMpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFJlc3VsdChTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLnRoaXMuYXR0cmlidXRlVmFsdWUpLCBSZXN1bHRUeXBlLlhNTF9FTkNPRElORyk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU3RhdGUuV2VpcmRUYWc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYyA9PT0gQ2hhcnMuR1QpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5CZWZvcmVUYWc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYyA8PSBDaGFycy5TUEFDRSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLldlaXJkVGFnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVWYWx1ZS5wdXNoKGMgfCAoYyA+PSAweDQxICYmIGMgPD0gMHg1YSA/IDB4MjAgOiAwKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd3JpdGUoYnVmZmVyKSB7XG4gICAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICAgIGZvciAoOyBpbmRleCA8IGJ1ZmZlci5sZW5ndGggJiYgdGhpcy5vZmZzZXQgKyBpbmRleCA8IHRoaXMubWF4Qnl0ZXM7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBidWZmZXJbaW5kZXhdO1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5CZWdpbjoge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlQmVnaW4oYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLkJPTTE2QkU6IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZUJPTTE2QkUoYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLkJPTTE2TEU6IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZUJPTTE2TEUoYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLkJPTTg6IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZUJPTTgoYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLlVURjE2TEVfWE1MX1BSRUZJWDoge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVVRGMTZMRV9YTUxfUFJFRklYKGMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5CZWdpbkxUOiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVCZWdpbkxUKGMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5VVEYxNkJFX1hNTF9QUkVGSVg6IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVVURjE2QkVfWE1MX1BSRUZJWChjKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuQmVmb3JlVGFnOiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9wdGltaXphdGlvbjogU2tpcCBhbGwgY2hhcmFjdGVycyB1bnRpbCB3ZSBmaW5kIGEgYDxgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IGJ1ZmZlci5pbmRleE9mKENoYXJzLkxULCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpZHggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBhcmUgZG9uZSB3aXRoIHRoaXMgYnVmZmVyLiBTdGF5IGluIHRoZSBzdGF0ZSBhbmQgdHJ5IG9uIHRoZSBuZXh0IG9uZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaWR4O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZUJlZm9yZVRhZyhDaGFycy5MVCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuQmVmb3JlVGFnTmFtZToge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlQmVmb3JlVGFnTmFtZShjKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuQmVmb3JlQ2xvc2VUYWdOYW1lOiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVCZWZvcmVDbG9zZVRhZ05hbWUoYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLkNvbW1lbnRTdGFydDoge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlQ29tbWVudFN0YXJ0KGMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5Db21tZW50RW5kOiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVDb21tZW50RW5kKGMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5UYWdOYW1lTWV0YToge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVGFnTmFtZU1ldGEoYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLlRhZ05hbWVPdGhlcjoge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlVGFnTmFtZU90aGVyKGMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5YTUxEZWNsYXJhdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlWE1MRGVjbGFyYXRpb24oYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLlhNTERlY2xhcmF0aW9uQmVmb3JlRW5jb2Rpbmc6IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVhNTERlY2xhcmF0aW9uQmVmb3JlRW5jb2RpbmcoYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLlhNTERlY2xhcmF0aW9uQWZ0ZXJFbmNvZGluZzoge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlWE1MRGVjbGFyYXRpb25BZnRlckVuY29kaW5nKGMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5YTUxEZWNsYXJhdGlvbkJlZm9yZVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVYTUxEZWNsYXJhdGlvbkJlZm9yZVZhbHVlKGMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5YTUxEZWNsYXJhdGlvblZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVYTUxEZWNsYXJhdGlvblZhbHVlKGMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5XZWlyZFRhZzoge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlV2VpcmRUYWcoYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLkJlZm9yZUF0dHJpYnV0ZToge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlQmVmb3JlQXR0cmlidXRlKGMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5NZXRhQXR0cmliSHR0cEVxdWl2OiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVNZXRhQXR0cmliSHR0cEVxdWl2KGMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5NZXRhQXR0cmliSHR0cEVxdWl2VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZU1ldGFBdHRyaWJIdHRwRXF1aXZWYWx1ZShjKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuTWV0YUF0dHJpYkM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZU1ldGFBdHRyaWJDKGMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5NZXRhQXR0cmliQ29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlTWV0YUF0dHJpYkNvbnRlbnQoYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLk1ldGFBdHRyaWJDaGFyc2V0OiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVNZXRhQXR0cmliQ2hhcnNldChjKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuTWV0YUF0dHJpYkFmdGVyTmFtZToge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlTWV0YUF0dHJpYkFmdGVyTmFtZShjKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuTWV0YUNvbnRlbnRWYWx1ZVF1b3RlZEJlZm9yZUVuY29kaW5nOiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVNZXRhQ29udGVudFZhbHVlUXVvdGVkQmVmb3JlRW5jb2RpbmcoYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLk1ldGFDb250ZW50VmFsdWVRdW90ZWRBZnRlckVuY29kaW5nOiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVNZXRhQ29udGVudFZhbHVlUXVvdGVkQWZ0ZXJFbmNvZGluZyhjKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuTWV0YUNvbnRlbnRWYWx1ZVF1b3RlZEJlZm9yZVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVNZXRhQ29udGVudFZhbHVlUXVvdGVkQmVmb3JlVmFsdWUoYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLk1ldGFDb250ZW50VmFsdWVRdW90ZWRWYWx1ZVF1b3RlZDoge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlTWV0YUNvbnRlbnRWYWx1ZVF1b3RlZFZhbHVlUXVvdGVkKGMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5NZXRhQ29udGVudFZhbHVlUXVvdGVkVmFsdWVVbnF1b3RlZDoge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlTWV0YUNvbnRlbnRWYWx1ZVF1b3RlZFZhbHVlVW5xdW90ZWQoYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLk1ldGFDb250ZW50VmFsdWVVbnF1b3RlZEJlZm9yZUVuY29kaW5nOiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVNZXRhQ29udGVudFZhbHVlVW5xdW90ZWRCZWZvcmVFbmNvZGluZyhjKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuTWV0YUNvbnRlbnRWYWx1ZVVucXVvdGVkQmVmb3JlVmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZU1ldGFDb250ZW50VmFsdWVVbnF1b3RlZEJlZm9yZVZhbHVlKGMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5NZXRhQ29udGVudFZhbHVlVW5xdW90ZWRWYWx1ZVF1b3RlZDoge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlTWV0YUNvbnRlbnRWYWx1ZVVucXVvdGVkVmFsdWVRdW90ZWQoYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLk1ldGFDb250ZW50VmFsdWVVbnF1b3RlZFZhbHVlVW5xdW90ZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZU1ldGFDb250ZW50VmFsdWVVbnF1b3RlZFZhbHVlVW5xdW90ZWQoYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLkFueUF0dHJpYk5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZUFueUF0dHJpYk5hbWUoYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLkFmdGVyQXR0cmlidXRlTmFtZToge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlQWZ0ZXJBdHRyaWJ1dGVOYW1lKGMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZS5CZWZvcmVBdHRyaWJ1dGVWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlQmVmb3JlQXR0cmlidXRlVmFsdWUoYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlLkF0dHJpYnV0ZVZhbHVlUXVvdGVkOiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVBdHRyaWJ1dGVWYWx1ZVF1b3RlZChjKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGUuQXR0cmlidXRlVmFsdWVVbnF1b3RlZDoge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlQXR0cmlidXRlVmFsdWVVbnF1b3RlZChjKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMub2Zmc2V0ICs9IGluZGV4O1xuICAgIH1cbn1cbmV4cG9ydHMuU25pZmZlciA9IFNuaWZmZXI7XG4vKiogR2V0IHRoZSBlbmNvZGluZyBmb3IgdGhlIHBhc3NlZCBidWZmZXIuICovXG5mdW5jdGlvbiBnZXRFbmNvZGluZyhidWZmZXIsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBzbmlmZmVyID0gbmV3IFNuaWZmZXIob3B0aW9ucyk7XG4gICAgc25pZmZlci53cml0ZShidWZmZXIpO1xuICAgIHJldHVybiBzbmlmZmVyLmVuY29kaW5nO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c25pZmZlci5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/encoding-sniffer/dist/commonjs/sniffer.js\n");

/***/ })

};
;